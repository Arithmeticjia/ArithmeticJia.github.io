<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Gibbs-Sampling</title>
    <url>/2020/05/11/Gibbs-Sampling/</url>
    <content><![CDATA[<p>Gibbs Sampling<br><a id="more"></a></p>
<p>å‡è®¾äºŒç»´åœºæ™¯ä¸‹ï¼ŒçŠ¶æ€(x, y)è½¬ç§»åˆ°(xâ€™, yâ€™)ï¼Œå¯ä»¥åˆ†ä¸ºä¸‰ç§åœºæ™¯</p>
<ul>
<li>å¹³è¡Œäºyè½´è½¬ç§»ï¼Œå¦‚ä¸Šå›¾ä¸­ä»çŠ¶æ€Aè½¬ç§»åˆ°çŠ¶æ€B</li>
<li>å¹³è¡Œäºxè½´è½¬ç§»ï¼Œå¦‚ä¸Šå›¾ä¸­ä»çŠ¶æ€Aè½¬ç§»åˆ°çŠ¶æ€C</li>
<li>å…¶ä»–æƒ…å†µè½¬ç§»ï¼Œå¦‚ä¸Šå›¾ä»çŠ¶æ€Aè½¬ç§»åˆ°çŠ¶æ€D</li>
</ul>
<p><img src="https://img2018.cnblogs.com/blog/452535/201810/452535-20181005001150218-101842018.png" alt=""></p>
<p>A-&gt;B:</p>
<script type="math/tex; mode=display">
p(x_{1},y_{1})p(y_{2}|x_{1}) = p(x_{1})p(y_{1}|x_{1})p(y_{2}|x_{1})</script><p>B-&gt;A:</p>
<script type="math/tex; mode=display">
p(x_{1},y_{2})p(y_{1}|x_{1}) = p(x_{1})p(y_{2}|x_{1})p(y_{1}|x_{1})</script><p>å³:</p>
<script type="math/tex; mode=display">
P(A)p(y_{2}|x_{1}) = P(B)p(y_{1}|x_{1})</script><p>åŒç†ï¼Œå¯¹äºåœºæ™¯äºŒ:</p>
<script type="math/tex; mode=display">
P(A)p{x_{2}|y_{1}) = P(C)p(x_{1}|y_{1})</script><p>å¯¹äºåœºæ™¯ä¸‰ï¼Œè§„å®šä¸å…è®¸è½¬ç§»</p>
<script type="math/tex; mode=display">
P(A) * 0 = P(D) * 0</script>]]></content>
      <categories>
        <category>NLP</category>
      </categories>
      <tags>
        <tag>nlp</tag>
      </tags>
  </entry>
  <entry>
    <title>Topic-Compositional-Neural-Language-Model</title>
    <url>/2020/05/11/Topic-Compositional-Neural-Language-Model/</url>
    <content><![CDATA[<p>Topic Compositional Neural Language Model<br><a id="more"></a></p>
<h3 id="Preliminaries"><a href="#Preliminaries" class="headerlink" title="Preliminaries"></a>Preliminaries</h3><ul>
<li>RNN-based language model<script type="math/tex; mode=display">
V(vocabulary set): \{y_{1},...,y_{M}\}</script><script type="math/tex; mode=display">
p(y_{1},...,y_{M}) = p(y_{1})\prod_{m=2}^{M}p(y_{m}|y_{1:m-1})</script></li>
</ul>
<p>æŠŠ$y_{1:m}$ä¸ªå•è¯ä½œä¸ºéšè—æ€</p>
<script type="math/tex; mode=display">
p(y_{m}|y_{1:m-1}) = p(y_{m}|h_{m})</script><p>æ ¹æ®RNNï¼Œå¯å¾—</p>
<script type="math/tex; mode=display">
h_{m} = f(h_{m-1},x_{m})</script><ul>
<li>Topic Model</li>
</ul>
<p>LDA model</p>
<h3 id="Topic-Compositional-Neural-Language-Model"><a href="#Topic-Compositional-Neural-Language-Model" class="headerlink" title="Topic Compositional Neural Language Model"></a>Topic Compositional Neural Language Model</h3><h4 id="neural-topic-model-ç¥ç»ä¸»é¢˜æ¨¡å‹"><a href="#neural-topic-model-ç¥ç»ä¸»é¢˜æ¨¡å‹" class="headerlink" title="neural topic model(ç¥ç»ä¸»é¢˜æ¨¡å‹)"></a>neural topic model(ç¥ç»ä¸»é¢˜æ¨¡å‹)</h4><p>capture the long-range semantic meanings across the document(æ•è·æ–‡æ¡£ä¸­çš„è¿œè·ç¦»è¯­ä¹‰)</p>
<ul>
<li>d:bag-of-words</li>
<li>D:vocabulary size</li>
</ul>
<p>pass a Gaussian random vector through a softmax function to parameterize the multinomial document topic distributions(é€šè¿‡ä¸€ä¸ªsoftmaxå‡½æ•°ä¼ é€’é«˜æ–¯éšæœºå‘é‡æ¥å‚æ•°åŒ–å¤šé¡¹å¼æ–‡æ¡£ä¸»é¢˜åˆ†å¸ƒ)</p>
<h4 id="neural-language-model-ç¥ç»è¯­è¨€æ¨¡å‹"><a href="#neural-language-model-ç¥ç»è¯­è¨€æ¨¡å‹" class="headerlink" title="neural language model(ç¥ç»è¯­è¨€æ¨¡å‹)"></a>neural language model(ç¥ç»è¯­è¨€æ¨¡å‹)</h4><p>learn the local semantic and syntactic relationships between words(å­¦ä¹ å•è¯ä¹‹é—´çš„æœ¬åœ°è¯­ä¹‰å’Œå¥æ³•å…³ç³»)</p>
]]></content>
      <categories>
        <category>NLP</category>
      </categories>
      <tags>
        <tag>nlp</tag>
      </tags>
  </entry>
  <entry>
    <title>TopicRNN</title>
    <url>/2020/04/21/TopicRNN/</url>
    <content><![CDATA[<p>A RECURRENT NEURAL NETWORK WITH LONG-RANGE SEMANTIC DEPENDENCY<br><a id="more"></a></p>
<h3 id="INTRODUCTION"><a href="#INTRODUCTION" class="headerlink" title="INTRODUCTION"></a>INTRODUCTION</h3><ul>
<li>æå‡ºäº†TopicRNNè¯­è¨€æ¨¡å‹ï¼Œé€šè¿‡æ½œåœ¨çš„ä¸»é¢˜æ•è·é•¿è·ç¦»çš„è¯­ä¹‰ä¿¡æ¯ã€‚</li>
<li>è¿™äº›topicæä¾›contextä¿¡æ¯ç»™RNNï¼Œä»¥è¿™æ ·çš„æ–¹å¼è€ƒè™‘å¥å­ï¼ˆæ–‡ç« ï¼‰çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</li>
</ul>
<h3 id="TopicRNN-Model"><a href="#TopicRNN-Model" class="headerlink" title="TopicRNN-Model"></a>TopicRNN-Model</h3><ul>
<li>é¦–å…ˆå¾—åˆ°ä¸»é¢˜å‘é‡$\theta ~ N(0,I$(é«˜æ–¯åˆ†å¸ƒ)</li>
<li>ç»™å®š$y_{1:t-1}$ï¼Œå¯¹äºæ–‡æ¡£ä¸­çš„ç¬¬$t$ä¸ªè¯</li>
<li>è®¡ç®—éšè—æ€$h_{t}=f_{W}(x_{t},h_{t-1})$</li>
</ul>
<p>è‡ªä»Neural Language Modelï¼ˆNLMï¼‰æµè¡Œä»¥æ¥ï¼ŒæœŸæœ›èƒ½å¤ŸæŠŠNLMå’Œè¯é¢˜æ¨¡å‹ï¼ˆTopic Modelï¼‰è¿›è¡Œç»“åˆçš„æƒ³æ³•å°±å±¡è§ä¸é²œã€‚è¿™ç¯‡è®ºæ–‡ä¹Ÿæ˜¯è¿™ä¸ªæ–¹å‘çš„ä¸€æ¬¡å°è¯•ã€‚NLMçš„ä¸»è¦ä¼˜åŠ¿æ˜¯åœ¨å¥å­ä»¥ä¸‹çš„ç»“æ„ä¸Šå¯¹å­—å¥è¿›è¡Œå»ºæ¨¡ï¼Œè€Œè¯é¢˜æ¨¡å‹åˆ™å¾€å¾€èƒ½å¤Ÿåœ¨çœŸä¸ªæ–‡æ¡£ç”šè‡³æ›´é«˜çš„å±‚æ¬¡ä¸Šå¯¹æ–‡æœ¬çš„è¯­ä¹‰è¿›è¡Œå»ºæ¨¡ã€‚æŠŠè¿™ä¸¤è€…ç»“åˆèµ·æ¥å°±æ˜¯æƒ³åˆ©ç”¨è¿™ä¸¤æ–¹é¢çš„ä¼˜åŠ¿ã€‚åœ¨è¿™ç¯‡æ–‡ç« é‡Œï¼Œè¯é¢˜æ¨¡å‹é€šè¿‡Variational Autoencoderçš„æ¡†æ¶æ¥æ•æ‰åˆ°æ–‡æ¡£çš„è¯é¢˜ï¼ˆTopicï¼‰éšå˜é‡ã€‚ä¹‹åï¼Œè¿™ä¸ªå˜é‡æˆä¸ºäº†å¯¹ä¸åŒçš„è¯­è¨€æ¨¡å‹è¿›è¡ŒåŠ æƒçš„æƒé‡ï¼Œè€Œè¯­è¨€æ–‡å­—çš„äº§ç”Ÿåˆ™åˆ©ç”¨äº†Mixture-of-Expertsçš„æ¡†æ¶æ¥å¯¹ä¸åŒçš„RNNè¯­è¨€æ¨¡å‹è¿›è¡Œæ•´åˆã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨è¿™ç¯‡æ–‡ç« æå‡ºçš„æ–¹æ³•é‡Œï¼Œè¯é¢˜æ¨¡å‹å¯¹æ–‡å­—çš„æ•´ä½“æ•°æ®å’Œè¯­è¨€æ¨¡å‹å¯¹å•ç‹¬çš„å­—å¥éƒ½è¿›è¡Œäº†å»ºæ¨¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªæ–‡æ¡£åˆ†åˆ«æœ‰ä¸¤ä¸ªäº§ç”Ÿè¿‡ç¨‹ï¼Œä¸€ä¸ªé’ˆå¯¹å…¨å±€æ–‡å­—ï¼Œä¸€ä¸ªé’ˆå¯¹æœ‰é¡ºåºçš„å­—å¥ã€‚</p>
]]></content>
      <categories>
        <category>NLP</category>
      </categories>
  </entry>
  <entry>
    <title>VAE-å˜åˆ†è‡ªåŠ¨ç¼–ç å™¨</title>
    <url>/2020/04/20/VAE-%E5%8F%98%E5%88%86%E8%87%AA%E5%8A%A8%E7%BC%96%E7%A0%81%E5%99%A8/</url>
    <content><![CDATA[<p>Variational Auto-Encoder<br><a id="more"></a></p>
<h3 id="é¢„å¤‡çŸ¥è¯†"><a href="#é¢„å¤‡çŸ¥è¯†" class="headerlink" title="é¢„å¤‡çŸ¥è¯†"></a>é¢„å¤‡çŸ¥è¯†</h3><h4 id="ä¿¡æ¯é‡"><a href="#ä¿¡æ¯é‡" class="headerlink" title="ä¿¡æ¯é‡"></a>ä¿¡æ¯é‡</h4><script type="math/tex; mode=display">
I(x) = -logp(x)</script><p>p(x) ä¸ºäº‹ä»¶xå‘ç”Ÿçš„æ¦‚ç‡ï¼Œå½“logåº•æ•°ä¸ºeæ—¶ï¼Œä¿¡æ¯é‡çš„å•ä½ä¸ºnatï¼ˆå¥ˆç‰¹ï¼‰ï¼Œå½“logåº•æ•°ä¸º2æ—¶ï¼Œä¿¡æ¯é‡çš„å•ä½ä¸ºbitï¼ˆæ¯”ç‰¹ï¼‰ã€‚</p>
<h4 id="ä¿¡æ¯ç†µ"><a href="#ä¿¡æ¯ç†µ" class="headerlink" title="ä¿¡æ¯ç†µ"></a>ä¿¡æ¯ç†µ</h4><p>è¡¨ç¤ºéšæœºå˜é‡xåœ¨ç¦»æ•£å’Œè¿ç»­æƒ…å†µä¸‹çš„ä¿¡æ¯ç†µH:</p>
<script type="math/tex; mode=display">
H = \sum -\log p(x) * p(x)</script><script type="math/tex; mode=display">
H = \int -\log p(x) * p(x)d(x)</script><h3 id="K-Læ•£åº¦ï¼ˆKullback-Leibler-divergenceï¼‰"><a href="#K-Læ•£åº¦ï¼ˆKullback-Leibler-divergenceï¼‰" class="headerlink" title="K-Læ•£åº¦ï¼ˆKullback-Leibler divergenceï¼‰"></a>K-Læ•£åº¦ï¼ˆKullback-Leibler divergenceï¼‰</h3><p>K-Læ•£åº¦åˆè¢«ç§°ä¸ºç›¸å¯¹ç†µï¼ˆrelative entropyï¼‰ï¼Œæ˜¯å¯¹ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒé—´å·®å¼‚çš„éå¯¹ç§°æ€§åº¦é‡ã€‚</p>
<h3 id="è´å¶æ–¯å…¬å¼ï¼ˆBayes-Ruleï¼‰"><a href="#è´å¶æ–¯å…¬å¼ï¼ˆBayes-Ruleï¼‰" class="headerlink" title="è´å¶æ–¯å…¬å¼ï¼ˆBayes Ruleï¼‰"></a>è´å¶æ–¯å…¬å¼ï¼ˆBayes Ruleï¼‰</h3><script type="math/tex; mode=display">
p(z|x) = \frac{p(z,x)}{p(x)} = \frac{p(x|z)p(z)}{p(x)}</script><h3 id="AE-è‡ªç¼–ç å™¨"><a href="#AE-è‡ªç¼–ç å™¨" class="headerlink" title="AE-è‡ªç¼–ç å™¨"></a>AE-è‡ªç¼–ç å™¨</h3><p>encoder-decoderç»“æ„</p>
<p><img src="https://pic3.zhimg.com/80/v2-8ae0e598375aeeed45488edd064e1cfa_1440w.jpg" alt=""></p>
<h3 id="VAE-å˜åˆ†è‡ªç¼–ç å™¨"><a href="#VAE-å˜åˆ†è‡ªç¼–ç å™¨" class="headerlink" title="VAE-å˜åˆ†è‡ªç¼–ç å™¨"></a>VAE-å˜åˆ†è‡ªç¼–ç å™¨</h3><p>å‡è®¾ç»™å®šæ ·æœ¬xï¼Œå¸Œæœ›åœ¨ç»™å®šxçš„æ¡ä»¶ä¸‹æ¨å‡ºzçš„åˆ†å¸ƒï¼Œå³p(z|x)</p>
<p>æ ¹æ®è´å¶æ–¯å…¬å¼:</p>
<script type="math/tex; mode=display">
p(z|x) = \frac{p(z,x)}{p(x)} = \frac{p(x|z)p(z)}{p(x)}</script><p>å› ä¸ºæ— æ³•å¾—çŸ¥p(x),ä½¿ç”¨q(z|x)å»è¿‘ä¼¼p(z|x),æ»¡è¶³</p>
<script type="math/tex; mode=display">
minKL(q(z|x)||p(z|x))</script><script type="math/tex; mode=display">
KL(q(z|x)||p(z|x)) = \int q(z|x)log\frac{q(z|x)}{p(z|x)}d(z) = \int q(z|x)log\frac{q(z|x)}{\frac{p(x|z)p(z)}{p(x)}}d(z)</script><script type="math/tex; mode=display">
= \int q(z|x)logq(z|x)d(z) + \int q(z|x)logp(x)d(z) - \int q(z|x)logp(x|z)p(z)d(z)</script><p>æ˜¾ç„¶</p>
<script type="math/tex; mode=display">
\int q(z|x)d(z) = 1</script><script type="math/tex; mode=display">
= logp(x) + \int q(z|x)logq(z|x)d(z) - \int q(z|x)logp(x|z)p(z)d(z)</script><p>p(x)ä¸ºå®šå€¼ï¼Œå› æ­¤</p>
<script type="math/tex; mode=display">
minKL(q(z|x)||p(z|x)) = > min(L) = min(\int q(z|x)logq(z|x)d(z) - \int q(z|x)logp(x|z)p(z)d(z))</script><script type="math/tex; mode=display">
= \int q(z|x)logq(z|x)d(z) - \int q(z|x)logp(x|z)d(z) - \int q(z|x)logp(z)d(z)</script><script type="math/tex; mode=display">
= \int q(z|x)log\frac{q(z|x)}{p(z)}d(z) - \int q(z|x)logp(x|z)d(z)</script><script type="math/tex; mode=display">
= KL(q(z|x)||p(z)) - E_{zæœä»q(z|x)}[logp(x|z)]</script><ul>
<li>ç»™å®šçœŸå®æ ·æœ¬$X_{k}$,å‡è®¾å­˜åœ¨ä¸“å±$X_{k}$çš„åˆ†å¸ƒ$p(Z|X_{k})$,ç›®çš„æ˜¯è®­ç»ƒç”Ÿæˆå™¨$X=g(Z)$ï¼ŒæŠŠä»åˆ†å¸ƒ$p(Z|X_{k})$ä¸­é‡‡æ ·çš„$Z_{k}$è¿˜åŸä¸º$X_{k}$</li>
<li>ç»™æ¯ä¸ª$X_{k}$é…ä¸Šä¸“å±çš„æ­£æ€åˆ†å¸ƒï¼Œä½¿ç”¨ç¥ç»ç½‘ç»œè®­ç»ƒå‡å€¼å’Œæ–¹å·®$\mu_{k}$å’Œ$\sigma^{2}_{k}$,æ­¤æ—¶æˆ‘çŸ¥é“äº†$X_{k}$çš„å‡å€¼å’Œæ–¹å·®,ç„¶åä»ä¸“å±åˆ†å¸ƒ$p(Z|X_{k})$ä¸­é‡‡æ ·å‡º$Z_{k}$,ç„¶åç»è¿‡ç”Ÿæˆå™¨å¾—åˆ°$\hat{X} = g(Z_{k})$,æœ€å°åŒ–$D(\hat{X},X_{k})$,åŒæ—¶æ¯ä¸ª$P(Z|X)$è¶‹å‘$N~(0,1)$æ­£æ€åˆ†å¸ƒ</li>
<li>å¯¹äºä¸¤ä¸ªæŸå¤±çš„æ¯”ä¾‹é—®é¢˜ï¼ŒåŸè®ºæ–‡ç›´æ¥è®¡ç®—äº†å„åˆ†é‡ç‹¬ç«‹çš„æ­£æ€åˆ†å¸ƒå’Œæ ‡å‡†æ­£æ€åˆ†å¸ƒçš„KLæ•£åº¦<script type="math/tex; mode=display">
KL(N(\mu,\sigma^{2})||N(0,1))</script></li>
</ul>
]]></content>
      <categories>
        <category>NLP</category>
      </categories>
  </entry>
  <entry>
    <title>2020-04-17å‘¨æŠ¥-å•æ²™å˜‰</title>
    <url>/2020/04/17/2020-04-17%E5%91%A8%E6%8A%A5-%E5%8D%95%E6%B2%99%E5%98%89/</url>
    <content><![CDATA[<p>ä¸çŸ¥é“è¯´å•¥<br><a id="more"></a></p>
<p>1ã€å †å LSTM</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7311123-f4f81fb3930f84a0.png?imageMogr2/auto-orient/strip|imageView2/2/w/640/format/webp.jpg" alt=""></p>
]]></content>
      <categories>
        <category>å‘¨æŠ¥</category>
      </categories>
  </entry>
  <entry>
    <title>2020-04-03å‘¨æŠ¥-å•æ²™å˜‰</title>
    <url>/2020/04/02/2020-04-03%E5%91%A8%E6%8A%A5-%E5%8D%95%E6%B2%99%E5%98%89/</url>
    <content><![CDATA[<p>A Memory-Network Based Solution for Multivariate Time-Series Forecasting<br><a id="more"></a></p>
<h3 id="By-the-way"><a href="#By-the-way" class="headerlink" title="By the way"></a>By the way</h3><p>Modeling Long- and Short-Term Temporal Patterns with Deep Neural Networks(SIGIR2018)</p>
<ul>
<li>LSTNet</li>
<li>åˆ©ç”¨æ•°æ®ä¸­çš„å‘¨æœŸæ¨¡å¼ï¼ŒGRUä¸­è®¡ç®—$t$æ—¶åˆ»çš„éšå‘é‡æ—¶ï¼Œä¸æ˜¯ä»¥$t-1$æ—¶åˆ»çš„éšå‘é‡ä¸ºè¾“å…¥ï¼Œè€Œæ˜¯ä»¥$t-p$æ—¶åˆ»çš„éšå‘é‡ä¸ºè¾“å…¥($p$ä¸ºå‘¨æœŸ)</li>
</ul>
<p><img src="https://pic2.zhimg.com/80/v2-2b3ff23e31f2a6fbc85058f5754b2c09_1440w.jpg" alt=""></p>
<h3 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h3><ul>
<li>ä¸€ç§åŸºäºæ·±åº¦å­¦ä¹ çš„æ—¶é—´åºåˆ—é¢„æµ‹æ¨¡å‹MTNet</li>
<li>MTNetç”±ä¸€ä¸ªå¤§çš„å†…å­˜ç»„ä»¶ã€ä¸‰ä¸ªç‹¬ç«‹çš„ç¼–ç å™¨å’Œä¸€ä¸ªè”åˆè®­ç»ƒçš„è‡ªå›å½’ç»„ä»¶ç»„æˆ</li>
<li>å¯è§£é‡Šæ€§</li>
</ul>
<h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><ul>
<li><p>DA-RNNä¸è€ƒè™‘å¤–æºæ•°æ®ä¸åŒæˆåˆ†é—´çš„ç©ºé—´ç›¸å…³æ€§ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œåœ¨ç¬¬äºŒé˜¶æ®µDA-RNNè¿›è¡Œçš„ç‚¹å¼æ³¨æ„å¯èƒ½ä¸åˆé€‚æ•æ‰è¿ç»­çš„å‘¨æœŸæ¨¡å¼</p>
</li>
<li><p>è®¤ä¸ºLSTNetç½‘ç»œä¸ºäº†è€ƒè™‘å‘¨æœŸä¿¡æ¯ï¼Œéœ€è¦å¼•å…¥è¶…å‚$p$ï¼Œåœ¨å‘¨æœŸé•¿åº¦ä¼šå‘ç”Ÿå˜åŒ–çš„ç¯å¢ƒä¸­ï¼Œè¿™ä¸ªè¶…å‚pæ˜¯æœªçŸ¥çš„</p>
</li>
</ul>
<h3 id="Framework"><a href="#Framework" class="headerlink" title="Framework"></a>Framework</h3><h4 id="Problem-Formulation"><a href="#Problem-Formulation" class="headerlink" title="Problem Formulation"></a>Problem Formulation</h4><script type="math/tex; mode=display">
Y = {y_{1},y_{2},...,y_{T}},y_{t} \in R^{D}</script><p>Dè¡¨ç¤ºå˜é‡çš„ç»´åº¦</p>
<h4 id="Memory-Time-series-Network"><a href="#Memory-Time-series-Network" class="headerlink" title="Memory Time-series Network"></a>Memory Time-series Network</h4><p><img src="https://www.guanacossj.com/media/articlebodypics/1585821126570.jpg" alt=""></p>
<p>long-term time series historical data</p>
<p>{$X_{i}$} = <script type="math/tex">X_{1},...,X_{n}</script></p>
<p>that are to be store in the memory</p>
<p>$Q$<br>a short-term historical time series data</p>
<p><strong>è¿™é‡Œçš„{$X_{i}$}å’ŒQä¸é‡å </strong></p>
<p>Encoder Architecture</p>
<p>ä½¿ç”¨éæ± åŒ–çš„å·ç§¯å±‚æ¥æå–æ—¶é—´ç»´åº¦ä¸Šçš„çŸ­æœŸæ¨¡å¼å’Œå˜é‡ä¹‹é—´çš„å±€éƒ¨ä¾èµ–å…³ç³»</p>
<script type="math/tex; mode=display">
X \in T Ã— D</script><p>å·ç§¯å±‚ç”±å¤šä¸ªå†…æ ¸ç»„æˆï¼Œå°ºå¯¸éƒ½æ˜¯w Ã— Dï¼Œæ‰€ä»¥æœ€åçš„å·ç§¯ç»“æœå°±æ˜¯(T-w+1) Ã— 1</p>
<p>ä¸€å…±æœ‰$d_{c}$ä¸ªè¿‡æ»¤å™¨ï¼ˆå·ç§¯æ ¸ï¼‰ï¼Œå¾—åˆ°äº†</p>
<script type="math/tex; mode=display">
d_{c} Ã— T_{c}</script><p>çŸ©é˜µ</p>
<p>åŠ ä¸Šattentionå±‚ï¼Œå†ä½¿ç”¨RNN(GRU)</p>
<p>é¦–å…ˆï¼Œä¸€æ¡æ—¶åºæ•°æ®è¢«åˆ†ä¸ºé•¿æœŸçš„å†å²æ•°æ®{$X_{i}$}å’Œæœ€è¿‘çš„å†å²æ•°æ®$Q$ ï¼Œ{$X_{i}$}å’Œ$Q$æ²¡æœ‰é‡åˆéƒ¨åˆ†ã€‚<br>æ¯ä¸€ä¸ªX_{i}é€šè¿‡$Encoder_{m}$ç½‘ç»œå¾—åˆ°è¡¨ç¤º$m_{i}$ ï¼›$Q$é€šè¿‡$Encoder_{in}$ç½‘ç»œå¾—åˆ°è¡¨ç¤º$u$ã€‚<br>å…¶ä¸­$Encoder_{m}$å’Œ$Encoder_{in}$çš„ç»“æ„éƒ½ä¸ºä¸ŠèŠ‚æ‰€è¿°çš„ Encoder ç½‘ç»œã€‚</p>
<p>å°†$u$å’Œæ¯ä¸€ä¸ª$m_{i}$åšå†…ç§¯ï¼Œåœ¨é€šè¿‡Softmaxå‡½æ•°å½’ä¸€åŒ–ï¼Œå¾—åˆ°ä¸€ç³»åˆ—çš„æƒé‡$p_{i}$ã€‚</p>
<script type="math/tex; mode=display">
p_{i} = Softmax(u^{T}m_{i})</script><p><strong>æœ¬æ–‡çš„äº®ç‚¹æ˜¯attentionçš„è®¾è®¡ï¼Œå³æƒé‡$p_{i}$çš„å¾—åˆ°ã€‚æƒé‡$p_{i}$è¶Šå¤§è¡¨ç¤ºQå’ŒX_{i}ä½ç½®ä¹‹å‰çš„ä¸€æ®µåºåˆ—çš„ç›¸ä¼¼ç¨‹åº¦å¤§ï¼Œåˆ™è¯¥æ®µåºåˆ—å¯¹äºå½“å‰çš„é¢„æµ‹æ›´é‡è¦</strong></p>
<p>æ¯ä¸€ä¸ª$X_{i}$å†é€šè¿‡$Encoder_{c}$ç½‘ç»œå¾—åˆ°è¡¨ç¤º$c_{i}$ã€‚æ¯ä¸€ä¸ª$c_{i}$å†å’Œ$p_{i}$ç›¸ä¹˜å¾—åˆ°$o_{i}$ã€‚</p>
<script type="math/tex; mode=display">
o_{i} = p_{i} * c_{i}</script><p>å°†æ‰€æœ‰çš„$o_{i}$å’Œ$u$æ‹¼æ¥åé€šè¿‡WçŸ©é˜µè½¬æ¢ï¼Œå¾—åˆ°æœ€ç»ˆçš„é¢„æµ‹è¾“å‡ºï¼š</p>
<script type="math/tex; mode=display">
y_{t}^{D} = W^{D}[u;o_{1};o_{2};...;o_{T}] + b</script><p>Autoregressive Componentï¼ˆè‡ªå›å½’æ¨¡å‹ï¼‰</p>
<script type="math/tex; mode=display">
y_{t,i}^{L} = \sum_{k=0}^{s^{ar}-1}w_{k}^{ar}q_{t-k,i}+b^{ar}</script><p>The final prediction of MTNet</p>
<script type="math/tex; mode=display">
y_{t} = y_{t}^{D} + y_{t}^{L}</script><p>å°†éçº¿æ€§ï¼ˆMTNet ä¸­çš„ç¥ç»ç½‘ç»œéƒ¨åˆ†ï¼‰å’Œçº¿æ€§ï¼ˆMTNet ä¸­çš„è‡ªå›å½’éƒ¨åˆ†ï¼‰æ¨¡å‹è¿›è¡Œensembleã€‚å¾—åˆ°æœ€ç»ˆçš„é¢„æµ‹è¾“å‡ºã€‚</p>
<h3 id="Experiments"><a href="#Experiments" class="headerlink" title="Experiments"></a>Experiments</h3><h4 id="Datasets"><a href="#Datasets" class="headerlink" title="Datasets"></a>Datasets</h4><p>2 univariate datasets:  Beijing PM2.51, GEFCom(2014) Electricity Price (Hong et al. 2016),</p>
<p>4 multivariate datasets: Traffic, Solar-Energy, Electricity,Exchange-Rate. </p>
<h4 id="Methods-for-comparison"><a href="#Methods-for-comparison" class="headerlink" title="Methods for comparison"></a>Methods for comparison</h4><h4 id="Metrics"><a href="#Metrics" class="headerlink" title="Metrics"></a>Metrics</h4><p>univariate: Root Mean Squared Error (RMSE)/Mean Absolute Error (MAE)</p>
<p>multivariate: Root Relative Squared Error (RRSE)/Empirical Correlation Coefficient (CORR)</p>
<h4 id="Interpretability-of-MTNet"><a href="#Interpretability-of-MTNet" class="headerlink" title="Interpretability of MTNet"></a>Interpretability of MTNet</h4><p><img src="https://www.guanacossj.com/media/articlebodypics/1585836468820.jpg" alt=""></p>
]]></content>
      <categories>
        <category>å‘¨æŠ¥</category>
      </categories>
  </entry>
  <entry>
    <title>2020-3-27å‘¨æŠ¥-å•æ²™å˜‰</title>
    <url>/2020/03/26/2020-3-27%E5%91%A8%E6%8A%A5-%E5%8D%95%E6%B2%99%E5%98%89/</url>
    <content><![CDATA[<p>PTMs-Pre-trained Models,PTMs(é¢„è®­ç»ƒæ¨¡å‹)<br><a id="more"></a></p>
<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>åœ¨å›¾åƒé¢†åŸŸï¼Œé¢„è®­ç»ƒè¿‡ç¨‹æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸è§„çš„åšæ³•ï¼Œå¯¹äºå›¾åƒæ¥è¯´ä¸€èˆ¬æ˜¯CNNçš„å¤šå±‚å åŠ ç½‘ç»œç»“æ„ã€‚ä¸€èˆ¬æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>å…ˆç°åœ¨ä¸€ä¸ªå¤§æ•°æ®é›†Aä¸Šé¢„è®­ç»ƒæ¨¡å‹ï¼Œæ¨¡å‹å‚æ•°ä¿å­˜ä¸‹æ¥ï¼Œè®¾ä¸ºModel_A</li>
<li>å¯¹äºtargetä»»åŠ¡Bï¼Œåœ¨Model_Açš„åŸºç¡€ä¸Šè¿›è¡Œå†è®­ç»ƒModel_Bï¼Œè¿™æ—¶å€™ä¸€èˆ¬ç­–ç•¥æ˜¯ä½¿ç”¨Model_Açš„åº•å±‚ç½‘ç»œå‚æ•°åˆå§‹åŒ–Model_Bï¼Œä¸Šå±‚å‚æ•°éšæœºåˆå§‹åŒ–å¹¶è®­ç»ƒ</li>
</ul>
<p>å¯¹äºåº•å±‚å‚æ•°ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§ç­–ç•¥ï¼š</p>
<ul>
<li>ä¸€ç§æ˜¯Frozenï¼Œå³è®­ç»ƒModel_Bè¿‡ç¨‹ä¸­åº•å±‚ç½‘ç»œå‚æ•°è®¾ä¸ºä¸å¯è®­ç»ƒçš„ï¼Œç›´æ¥ä½¿ç”¨Model_Aè®­ç»ƒå¥½çš„å‚æ•°</li>
<li>å¦ä¸€ç§æ˜¯Fine-tuningï¼Œå³è®­ç»ƒModel_Bè¿‡ç¨‹ä¸­åº•å±‚ç½‘ç»œå‚æ•°è®¾ä¸ºå¯è®­ç»ƒçš„ï¼Œåœ¨Model_Aè®­ç»ƒå¥½çš„å‚æ•°åŸºç¡€ä¸Šå¾®è°ƒ</li>
</ul>
<p>åœ¨NLPé¢†åŸŸï¼Œä½¿ç”¨word embedding</p>
<p>Word2vecâ€”-&gt;ELMO(Embedding from Language Models)â€”-&gt;GPT(Generative Pre-Training)â€”-&gt;BERT(Bidirectional Encoder Representations from Transformers)</p>
<h3 id="word-embeddingï¼ˆè¯åµŒå…¥ï¼‰"><a href="#word-embeddingï¼ˆè¯åµŒå…¥ï¼‰" class="headerlink" title="word embeddingï¼ˆè¯åµŒå…¥ï¼‰"></a>word embeddingï¼ˆè¯åµŒå…¥ï¼‰</h3><p>é«˜ç»´è¯å‘é‡åµŒå…¥åˆ°ä¸€ä¸ªä½ç»´ç©ºé—´</p>
<p>Embeddingæ˜¯æ•°å­¦é¢†åŸŸçš„æœ‰åè¯ï¼Œæ˜¯æŒ‡æŸä¸ªå¯¹è±¡ X è¢«åµŒå…¥åˆ°å¦å¤–ä¸€ä¸ªå¯¹è±¡ Y ä¸­ï¼Œæ˜ å°„ f : X â†’ Y </p>
<p>Word Embedding æ˜¯NLPä¸­ä¸€ç»„è¯­è¨€æ¨¡å‹å’Œç‰¹å¾å­¦ä¹ æŠ€æœ¯çš„æ€»ç§°ï¼ŒæŠŠè¯æ±‡è¡¨ä¸­çš„å•è¯æˆ–è€…çŸ­è¯­æ˜ å°„æˆç”±å®æ•°æ„æˆçš„å‘é‡ä¸Š(æ˜ å°„)</p>
<h4 id="One-Hot-Representation"><a href="#One-Hot-Representation" class="headerlink" title="One-Hot-Representation"></a>One-Hot-Representation</h4><p><img src="https://pic2.zhimg.com/80/v2-09e1bda72c4b903e25db203ab4aa6dc6_1440w.jpg" alt=""></p>
<p>åœ¨one hot representationç¼–ç çš„æ¯ä¸ªå•è¯éƒ½æ˜¯ä¸€ä¸ªç»´åº¦ï¼Œå½¼æ­¤independent</p>
<p>è¯­æ–™åº“<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">John likes to watch movies.Marry likes too.</span><br><span class="line">John also likes to watch football games.</span><br></pre></td></tr></table></figure><br>è¯å…¸<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    "John": 1ï¼Œ</span><br><span class="line">    "likes": 2,</span><br><span class="line">    "to": 3,</span><br><span class="line">    "watch": 4,</span><br><span class="line">    "movies": 5,</span><br><span class="line">    "also": 6,</span><br><span class="line">    "football": 7, </span><br><span class="line">    "games": 8,</span><br><span class="line">    "Marry": 9,</span><br><span class="line">    "too": 10</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>one-hotè¡¨ç¤º<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">John:[1,0,0,0,0,0,0,0,0,0]</span><br><span class="line">likes:[0,1,0,0,0,0,0,0,0,0]</span><br><span class="line">...</span><br><span class="line">too:[0,0,0,0,0,0,0,0,0,1]</span><br></pre></td></tr></table></figure><br>å†ä¸¾ä¸ªä¾‹å­</p>
<p><img src="https://img-blog.csdnimg.cn/20190807181106401.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NpbmF0XzI2ODExMzc3,size_16,color_FFFFFF,t_70" alt=""><br>ä¸€å…±æœ‰å››ç§çŠ¶æ€ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ4<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1 -&gt; 0001</span><br><span class="line">2 -&gt; 0010</span><br><span class="line">3 -&gt; 0100</span><br><span class="line">4 -&gt; 1000</span><br></pre></td></tr></table></figure><br><img src="https://img-blog.csdnimg.cn/20190808002943747.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NpbmF0XzI2ODExMzc3,size_16,color_FFFFFF,t_70" alt=""></p>
<ul>
<li>æ— æ³•æ•æ‰ä¸¤ä¸ªwordä¹‹é—´çš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰åŠæ³•æ•æ‰è¯­ä¹‰ä¿¡æ¯</li>
<li>è¯å‘é‡å¯èƒ½éå¸¸é•¿</li>
</ul>
<h4 id="Distributed-Representation"><a href="#Distributed-Representation" class="headerlink" title="Distributed-Representation"></a>Distributed-Representation</h4><h4 id="N-Gram"><a href="#N-Gram" class="headerlink" title="N-Gram"></a>N-Gram</h4><p>N-Gramæ˜¯åŸºäºä¸€ä¸ªå‡è®¾ï¼šç¬¬nä¸ªè¯å‡ºç°ä¸å‰n-1ä¸ªè¯ç›¸å…³ï¼Œè€Œä¸å…¶ä»–ä»»ä½•è¯ä¸ç›¸å…³</p>
<script type="math/tex; mode=display">
S = (w_{1},w_{2},w_{3},...,w_{n})</script><p>å‡è®¾æ¯ä¸€ä¸ªå•è¯$w_{i}$éƒ½è¦ä¾èµ–äºç¬¬ä¸€ä¸ªå•è¯åˆ°$w_{1}$åˆ°ä»–ä¹‹å‰çš„ä¸€ä¸ªå•è¯$w_{i-1}$çš„å½±å“</p>
<script type="math/tex; mode=display">
p(S) = p(w_{1},w_{2},w_{3},...,w_{n})=p(w_{1})p(w_{2}|w_{1})...p(w_{n}|w_{n-1}w_{n-2}...w_{1})</script><p>ä¸å¦¨åˆ©ç”¨é©¬å°”ç§‘å¤«å‡è®¾<br>å³å½“å‰è¿™ä¸ªè¯ä»…ä»…è·Ÿå‰é¢å‡ ä¸ªæœ‰é™çš„è¯ç›¸å…³ï¼Œå› æ­¤ä¹Ÿå°±ä¸å¿…è¿½æº¯åˆ°æœ€å¼€å§‹çš„é‚£ä¸ªè¯ï¼Œè¿™æ ·ä¾¿å¯ä»¥å¤§å¹…ç¼©å‡ä¸Šè¿°ç®—å¼çš„é•¿åº¦</p>
<script type="math/tex; mode=display">
p(S) = p(w_{1},w_{2},w_{3},...,w_{n})=\prod p(w_{i}|w_{i-1}...w_{1})â‰ˆ\prod p(w_{i}|w_{i-1}...w_{i-N+1})</script><p>å½“N=2æ—¶ï¼Œç§°ä¸ºBi-Gram<br>å½“N=3æ—¶ï¼Œç§°ä¸ºTri-Gram<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">I am John</span><br><span class="line">John I am</span><br><span class="line">I like learning</span><br></pre></td></tr></table></figure><br>æ­¤æ—¶Tri-Gramä¸‹</p>
<script type="math/tex; mode=display">
p(am|I) = 2/3</script><p>ä¸¤ä¸ªé‡è¦åº”ç”¨åœºæ™¯</p>
<ul>
<li>è¯„ä¼°å¥å­ä¹‹é—´å·®å¼‚æ€§</li>
<li>è¯„ä¼°ä¸€ä¸ªå¥å­æ˜¯å¦åˆç†<br>N-Gramè·ç¦»<script type="math/tex; mode=display">
s = "ABCD"</script><script type="math/tex; mode=display">
t = "ABC"</script>å½“N=2æ—¶ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å¯ä»¥æ‹†æˆ<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(AB,BC,CD)</span><br></pre></td></tr></table></figure>
ç¬¬äºŒä¸ªå­—ç¬¦ä¸²å¯ä»¥æ‹†æˆ<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(AB,BC)</span><br></pre></td></tr></table></figure>
è·ç¦»å…¬å¼<script type="math/tex; mode=display">
|G_{N}(s)| + |G_{N}(t)| - 2 \times |G_{N}(s) \cap G_{N}(t)|</script>d = 4 + 3 - 2 * 1 = 1</li>
</ul>
<h3 id="word2vec"><a href="#word2vec" class="headerlink" title="word2vec"></a>word2vec</h3><p>é¢„å¤‡çŸ¥è¯†å›é¡¾</p>
<h4 id="sigmoidå‡½æ•°"><a href="#sigmoidå‡½æ•°" class="headerlink" title="sigmoidå‡½æ•°"></a>sigmoidå‡½æ•°</h4><script type="math/tex; mode=display">
\sigma (x) = \frac{1}{1+e^{-x}}</script><p><img src="https://www.guanacossj.com/media/articlebodypics/sigmoid.jpg" alt=""><br>æ±‚å¯¼</p>
<script type="math/tex; mode=display">
\sigma^{'} (x) = \sigma (x)[1-\sigma (x)]</script><p>æ˜“å¾—</p>
<script type="math/tex; mode=display">
[log\sigma (x)]^{'} = 1 - \sigma (x)</script><script type="math/tex; mode=display">
[log(1-\sigma (x))]^{'} = - \sigma (x)</script><h4 id="è´å¶æ–¯å…¬å¼"><a href="#è´å¶æ–¯å…¬å¼" class="headerlink" title="è´å¶æ–¯å…¬å¼"></a>è´å¶æ–¯å…¬å¼</h4><script type="math/tex; mode=display">
P(A|B) = \frac {P(A,B)}{P(B)}</script><script type="math/tex; mode=display">
P(B|A) = \frac {P(A,B)}{P(A)}</script><script type="math/tex; mode=display">
P(A|B) = P(A) \frac {P(B|A)}{P(A)}</script><h4 id="é€»è¾‘å›å½’äºŒåˆ†ç±»å™¨"><a href="#é€»è¾‘å›å½’äºŒåˆ†ç±»å™¨" class="headerlink" title="é€»è¾‘å›å½’äºŒåˆ†ç±»å™¨"></a>é€»è¾‘å›å½’äºŒåˆ†ç±»å™¨</h4><p>è®¾</p>
<script type="math/tex; mode=display">
\{\{x_{i},y_{i}\}\}_{i=1}^{m}</script><p>äºŒåˆ†ç±»å‡½æ•°é•¿è¿™æ ·</p>
<script type="math/tex; mode=display">
h_{\theta }(x) = \sigma (\theta _{0}+\theta _{1}x_{1}+\theta _{1}x_{1}+...+\theta _{n}x_{n})</script><p>ä»¤</p>
<script type="math/tex; mode=display">
\theta =(\theta_{0},\theta_{1},\theta_{2},...,\theta_{n})^{T}</script><p>å…¶ä¸­Î¸ä¸ºå¾…å®šå‚æ•°</p>
<p>ç®€åŒ–äºŒåˆ†ç±»å‡½æ•°</p>
<script type="math/tex; mode=display">
h_{\theta }(x) = \sigma (\theta ^{T}x)=\frac{1}{1+e^{-\theta ^{T}x}}</script><p>å–é˜ˆå€¼T=0.5</p>
<h4 id="Huffmanæ ‘-ç¼–ç "><a href="#Huffmanæ ‘-ç¼–ç " class="headerlink" title="Huffmanæ ‘-ç¼–ç "></a>Huffmanæ ‘-ç¼–ç </h4><p>æœ€ä¼˜äºŒå‰æ ‘â€”-å¸¦æƒè·¯å¾„é•¿åº¦æœ€çŸ­çš„äºŒå‰æ ‘</p>
<p>â€œæˆ‘â€ï¼Œâ€å–œæ¬¢â€ï¼Œâ€è§‚çœ‹â€ï¼Œâ€å·´è¥¿â€ï¼Œâ€è¶³çƒâ€ï¼Œâ€ä¸–ç•Œæ¯â€<br> 15     8      6      5      3       1</p>
<p>é€‰æ ¹èŠ‚ç‚¹æœ€å°çš„æ ‘åˆå¹¶</p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/1585241496316.jpg" alt=""></p>
<p>è¯é¢‘è¶Šå¤§çš„è¯ç¦»æ ¹èŠ‚ç‚¹è¶Šè¿‘<br>æ˜¾ç„¶è¯é¢‘è¶Šå°ï¼Œæƒé‡è¶Šå°</p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/1585241408762.jpg" alt=""></p>
<h4 id="Skip-gram"><a href="#Skip-gram" class="headerlink" title="Skip-gram"></a>Skip-gram</h4><p>ä½¿ç”¨ä¸€ä¸ªè¯é¢„æµ‹ä¸Šä¸‹æ–‡</p>
<h4 id="CBOW-Continues-Bag-of-Words-Model"><a href="#CBOW-Continues-Bag-of-Words-Model" class="headerlink" title="CBOW-Continues Bag-of-Words Model"></a>CBOW-Continues Bag-of-Words Model</h4><p>ä½¿ç”¨ä¸€ä¸ªè¯è¯­çš„ä¸Šä¸‹æ–‡ä½œä¸ºè¾“å…¥ï¼Œæ¥é¢„æµ‹è¿™ä¸ªè¯è¯­æœ¬èº«</p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/1585297454343.jpg" alt=""></p>
<p><strong>è¾“å…¥å±‚åˆ°éšè—å±‚</strong></p>
<p>è¾“å…¥å±‚æ˜¯å››ä¸ªè¯çš„one-hotå‘é‡è¡¨ç¤ºï¼Œåˆ†åˆ«æ˜¯$x_{t-2}$,$x_{t-1}$,$x_{t+1}$,$x_{t+2}$ï¼Œç»´åº¦éƒ½æ˜¯VÃ—1ï¼ŒVæ˜¯æ¨¡å‹çš„è®­ç»ƒæœ¬æ–‡ä¸­æ‰€æœ‰è¯çš„ä¸ªæ•°</p>
<p>è¾“å…¥å±‚åˆ°éšè—å±‚çš„æƒé‡çŸ©é˜µä¸ºWï¼Œç»´åº¦ä¸ºVÃ—dï¼Œdæ˜¯è®¤ä¸ºç»™å®šçš„è¯å‘é‡ç»´åº¦ï¼Œéšè—å±‚çš„å‘é‡ä¸ºhï¼Œç»´åº¦æ˜¯dÃ—1</p>
<script type="math/tex; mode=display">
h = \frac{W*x_{t-2}+W*x_{t-1}+W*x_{t+1}+W*x_{t+2}}{4}</script><p><strong>éšè—å±‚åˆ°è¾“å‡ºå±‚</strong></p>
<p>è®°éšè—å±‚åˆ°è¾“å‡ºå±‚çš„æƒé‡çŸ©é˜µä¸ºUï¼Œç»´åº¦ä¸ºdÃ—Vï¼Œè¾“å‡ºå‘é‡ä¸ºyï¼Œç»´åº¦ä¸ºVÃ—1ï¼Œé‚£ä¹ˆ</p>
<script type="math/tex; mode=display">
y = softmax(U^{T}*h)</script><p>æ­¤æ—¶è¾“å‡ºå±‚çš„å‘é‡yå’Œè¾“å…¥å±‚çš„å‘é‡xï¼Œè™½ç„¶ç»´åº¦ä¸€æ ·ï¼Œä½†æ˜¯yå¹¶ä¸æ˜¯one-hotå‘é‡ï¼Œå‡è®¾è®­ç»ƒæ ·æœ¬æ˜¯</p>
<p>â€œI like to eat appleâ€ï¼Œæ­¤æ—¶ç”¨â€Iâ€,â€likeâ€,â€eatâ€,â€appleâ€é¢„æµ‹â€toâ€ï¼Œè¾“å‡ºçš„yå‘é‡å¤§æ¦‚æ˜¯è¿™æ ·</p>
<p><img src="https://pic4.zhimg.com/80/v2-918b97c077fe15b4a67e0afddb62bfa3_1440w.jpg" alt=""></p>
<p>ç›®çš„æ˜¯æ„é€ æœ€å¤§åŒ–å‡½æ•°L</p>
<script type="math/tex; mode=display">
L = \prod_{t=1}^{V}p(w_{t}|w_{t-k},w_{t-k+1},...,w_{t-1},w_{t+1},...,w_{t+k-1},w_{t+k})</script><h4 id="å±‚æ¬¡softmaxå’Œè´Ÿé‡‡æ ·"><a href="#å±‚æ¬¡softmaxå’Œè´Ÿé‡‡æ ·" class="headerlink" title="å±‚æ¬¡softmaxå’Œè´Ÿé‡‡æ ·"></a>å±‚æ¬¡softmaxå’Œè´Ÿé‡‡æ ·</h4><p>å±‚æ¬¡softmaxæ˜¯ä¸€æ£µhuffmanæ ‘ï¼Œæ ‘çš„å¶å­èŠ‚ç‚¹æ˜¯è®­ç»ƒæ–‡æœ¬ä¸­æ‰€æœ‰çš„è¯ï¼Œéå¶å­èŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªé€»è¾‘å›å½’äºŒåˆ†ç±»å™¨ï¼Œæ¯ä¸ªé€»è¾‘å›å½’åˆ†ç±»å™¨çš„å‚æ•°éƒ½ä¸åŒï¼Œåˆ†åˆ«ç”¨$Î¸_{*}$è¡¨ç¤ºã€‚</p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/1585301521653.jpg" alt=""></p>
<p>åˆ†ç±»å™¨çš„è¾“å…¥æ˜¯å‘é‡h(éšè—å±‚å‘é‡)</p>
<p>é‡‡æ ·åˆ° I çš„æ¦‚ç‡$p(I|context) = (1-\sigma(\theta_{1}h)) * (1-\sigma(\theta_{3}h))$</p>
<p>é‡‡æ ·åˆ° eat çš„æ¦‚ç‡$p(eat|context) = (1-\sigma(\theta_{1}h)) * \sigma(\theta_{3}h)$</p>
<p>é‡‡æ ·åˆ° to çš„æ¦‚ç‡$p(to|context) = \sigma(\theta_{1}h) * (1-\sigma(\theta_{2}h))$</p>
<p>æ­£æ ·æœ¬</p>
<script type="math/tex; mode=display">
p(w|context(w)) = \sigma(\theta^{w}h^{context(w})</script><p>è´Ÿæ ·æœ¬</p>
<script type="math/tex; mode=display">
p(w|NEG(w)) = \sigma(\theta^{w}h^{NEG(w})</script><script type="math/tex; mode=display">
L_{CBOW} = \prod_{t=1}^{V} p(w^{t}|context(w^{t}))p(w^{t}|NEG(w^{t}))</script><p>æœ€å¤§åŒ–â€”-&gt;æ¢¯åº¦ä¸Šå‡æ³•</p>
]]></content>
      <categories>
        <category>å‘¨æŠ¥</category>
      </categories>
  </entry>
  <entry>
    <title>2020-3-20å‘¨æŠ¥-å•æ²™å˜‰</title>
    <url>/2020/03/20/2020-3-20%E5%91%A8%E6%8A%A5-%E5%8D%95%E6%B2%99%E5%98%89/</url>
    <content><![CDATA[<p>searching and mining trillions of time series subsquences under dynamic time warping<br><a id="more"></a></p>
<h3 id="Assumptions"><a href="#Assumptions" class="headerlink" title="Assumptions"></a>Assumptions</h3><ul>
<li>Time Series Subsequences must be Normalized ï¼ˆæ—¶é—´åºåˆ—å­åºåˆ—å¿…é¡»ç»è¿‡å½’ä¸€åŒ–å¤„ç†ï¼‰</li>
<li>Dynamic Time Warping is the Best Measure</li>
<li>Arbitrary Query Lengths cannot be Indexed</li>
<li>There Exists Data Mining Problems that we are Willing to Wait Some Hours to Answer</li>
</ul>
]]></content>
      <categories>
        <category>å‘¨æŠ¥</category>
      </categories>
  </entry>
  <entry>
    <title>2020-3-13å‘¨æŠ¥-å•æ²™å˜‰</title>
    <url>/2020/03/10/2020-3-13%E5%91%A8%E6%8A%A5-%E5%8D%95%E6%B2%99%E5%98%89/</url>
    <content><![CDATA[<p>DTW(Dynamic Time Warping)<br>åŠ¨æ€æ—¶é—´è§„æ•´<br><a id="more"></a></p>
<h3 id="DTW-Dynamic-Time-Warping"><a href="#DTW-Dynamic-Time-Warping" class="headerlink" title="DTW(Dynamic Time Warping)"></a>DTW(Dynamic Time Warping)</h3><p><img src="https://www.guanacossj.com/media/articlebodypics/dtw01.jpg" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/dtw02.jpg" alt=""></p>
<p>å‡è®¾æœ‰ä¸¤ä¸ªåºåˆ—ï¼š</p>
<p>a = [2, 0, 1, 1, 2, 4, 2, 1, 2, 0]</p>
<p>b = [1, 1, 2, 4, 2, 1, 2, 0]</p>
<p>ç”¨æ¬§å¼è·ç¦»è®¡ç®—å‡ºæ¯åºåˆ—çš„æ¯ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»</p>
<figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="code"><pre><span class="line">[[1. 1. 0. 2. 0. 1. 0. 2.]</span><br><span class="line"> [1. 1. 2. 4. 2. 1. 2. 0.]</span><br><span class="line"> [0. 0. 1. 3. 1. 0. 1. 1.]</span><br><span class="line"> [0. 0. 1. 3. 1. 0. 1. 1.]</span><br><span class="line"> [1. 1. 0. 2. 0. 1. 0. 2.]</span><br><span class="line"> [3. 3. 2. 0. 2. 3. 2. 4.]</span><br><span class="line"> [1. 1. 0. 2. 0. 1. 0. 2.]</span><br><span class="line"> [0. 0. 1. 3. 1. 0. 1. 1.]</span><br><span class="line"> [1. 1. 0. 2. 0. 1. 0. 2.]</span><br><span class="line"> [1. 1. 2. 4. 2. 1. 2. 0.]]</span><br></pre></td></tr></table></figure>
<p>waring path W</p>
<p>$W = w_{1},w_{2},w_{3},â€¦,w_{k}$ </p>
<p>$max(m,n) &lt;= k &lt; m+n-1$</p>
<p>$w_{k} = (i,j)_{k}$</p>
<script type="math/tex; mode=display">
DTW(Q,C) = \min (\frac{\sum_{k=1}^{K}w_{k}}{K})</script><p>åˆ†æ¯ä¸­çš„Kä¸»è¦æ˜¯ç”¨æ¥å¯¹ä¸åŒçš„é•¿åº¦çš„è§„æ•´è·¯å¾„åšè¡¥å¿</p>
<p>é‡‡ç”¨åŠ¨æ€è§„åˆ’ç®—æ³•ã€‚å‡è®¾æˆ‘ä»¬è¦æ±‚åˆ°ä½ç½®(ğ‘–,ğ‘—)çš„æœ€å°ç´¯è®¡è·ç¦»ğ·(ğ‘–,ğ‘—)ï¼Œé‚£ä¹ˆå®ƒåªèƒ½ç”±ğ·(ğ‘–âˆ’1,ğ‘—)ï¼Œğ·(ğ‘–,ğ‘—âˆ’1)å’Œğ·(ğ‘–âˆ’1,ğ‘—âˆ’1)è¿™ä¸‰ä¸ªä½ç½®çš„æœ€å°ç´¯è®¡è·ç¦»ä¸­å¯»æ‰¾ï¼Œä¹Ÿå°±æ˜¯</p>
<script type="math/tex; mode=display">
ğ·(i,j)=d_{i,j}+ğ‘šğ‘–ğ‘›[ğ·(iâˆ’1,j),ğ·(i,jâˆ’1),ğ·(iâˆ’1,jâˆ’1)]</script><p><img src="https://www.guanacossj.com/media/articlebodypics/dtw.jpg" alt=""></p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>DTWæ–¹æ³•æ˜¯æ¬§æ°è·ç¦»æ–¹æ³•çš„æ”¹è¿›ï¼Œåªæ”¹è¿›äº†å…¶ä¸èƒ½å¤„ç†local time shiftingçš„é—®é¢˜ã€‚æ²¡æœ‰å¼•å…¥ä»»ä½•é˜ˆå€¼å‚æ•°ï¼Œå› æ­¤å¯¹æ—¶é—´ä¸Šçš„åç§»ï¼ˆå™ªå£°å’Œç¦»ç¾¤ç‚¹ï¼‰çš„æŠ‘åˆ¶å¹¶ä¸å¥½ï¼Œä¸”å¯¹æ—¶é—´ä¸Šçš„åç§»çš„é€‚åº”æ€§ä¹Ÿä¸å¥½ã€‚</p>
<p>ä¼˜ç‚¹ï¼šä½¿ç”¨åŠ¨æ€è§„åˆ’çš„æ€æƒ³ï¼Œå®ç°äº†å¯¹æŸäº›ç‚¹çš„é‡å¤ä½¿ç”¨ï¼Œç¡®ä¿é‡å¤ä½¿ç”¨çš„ç‚¹è¾¾æˆçš„è·¯å¾„æœ€ä¼˜çš„ï¼Œä»è€Œè¾ƒä¸ºé«˜æ•ˆåœ°è§£å†³äº†æ•°æ®ä¸å¯¹é½çš„é—®é¢˜ã€‚</p>
<p>ç¼ºç‚¹ï¼šè¿˜æ˜¯æ— æ³•å¤„ç†ç¦»ç¾¤ç‚¹ã€å¼‚å¸¸ç‚¹ï¼Œå¯¹äºå™ªå£°çš„æŠ‘åˆ¶æ²¡æœ‰è¿›è¡Œå¤„ç†ã€‚è™½ç„¶èƒ½å¤Ÿå¤„ç†local time shiftingï¼Œä½†æ˜¯å¯¹æ—¶é—´ä¸Šçš„åç§»åšçš„ä¹Ÿä¸å¥½ã€‚ç®—æ³•ä¹Ÿä¸æ˜¯metricç±»å‹çš„ã€‚</p>
<h3 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h3>]]></content>
      <categories>
        <category>å‘¨æŠ¥</category>
      </categories>
  </entry>
  <entry>
    <title>2020-3.6å‘¨æŠ¥-å•æ²™å˜‰</title>
    <url>/2020/03/06/2020-3-6%E5%91%A8%E6%8A%A5-%E5%8D%95%E6%B2%99%E5%98%89/</url>
    <content><![CDATA[<p>Shape and Time Distortion Loss for Training DeepTime Series Forecasting Models<br><a id="more"></a></p>
<h3 id="Shape-and-Time-Distortion-Loss-for-Training-DeepTime-Series-Forecasting-Models"><a href="#Shape-and-Time-Distortion-Loss-for-Training-DeepTime-Series-Forecasting-Models" class="headerlink" title="Shape and Time Distortion Loss for Training DeepTime Series Forecasting Models"></a>Shape and Time Distortion Loss for Training DeepTime Series Forecasting Models</h3><p>NeurIPS 2019</p>
<p>è®­ç»ƒæ·±åº¦æ—¶é—´åºåˆ—é¢„æµ‹æ¨¡å‹çš„å½¢çŠ¶å’Œæ—¶é—´å¤±çœŸæŸå¤±</p>
<h4 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h4><p>This paper addresses the problem of time series forecasting for non-stationary signals and multiple future steps prediction. </p>
<p>DILATE (DIstortion Loss including shApe and TimE) å½¢çŠ¶å’Œæ—¶é—´å¤±çœŸæŸå¤±</p>
<p>DILATE aims at accurately predicting sudden changes, and explicitly incorporates two terms supporting precise shape and temporal change detection.</p>
<p><img src="https://img-blog.csdn.net/20180824212209631?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMxODIxNjc1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p>
<p><img src="https://img-blog.csdn.net/20180824212233242?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMxODIxNjc1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p>
<p><img src="https://img-blog.csdn.net/2018082421225311?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMxODIxNjc1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p>
<h4 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h4><p>Time series forecasting [6] consists in analyzing the dynamics and correlations between historical data for predicting future behavior</p>
<p>In one-step prediction problems [39, 30], future prediction reduces to a single scalar value. This is in sharp contrast with multi-step time series prediction [49, 2, 48], which consists in predicting a complete trajectory[trÉ™ËˆdÊ’ektÉ™ri] of future data at a rather long temporal extent. Multi-step forecasting thus requires to accurately describe time series evolution.</p>
<p><img src="https://pic1.zhimg.com/v2-b872cd50b4a341901005bf4246493fa0_r.jpg" alt=""></p>
<p>(a) Non informative prediction éä¿¡æ¯æ€§é¢„æµ‹<br>(b) Correct shape, time delay<br>(c) Correct time, inaccurate shape</p>
<p>In contrast, the DILATE loss proposed in this work, which disentangles shape and temporal decay terms,<br>supports predictions (b) and (c) over prediction (a) that does not capture the sharp change of regime.</p>
<h4 id="Related-work"><a href="#Related-work" class="headerlink" title="Related work"></a>Related work</h4><p>Time series forecasting Traditional methods for time series forecasting include linear autoregressive models, such as the ARIMA model [6], and Exponential[ËŒekspÉ™ËˆnenÊƒl] Smoothing [27], which both fall into the broad category of linear State Space Models (SSMs) [17].</p>
<h4 id="Training-Deep-Neural-Networks-with-DILATE-DIstortion-Loss-including-shApe-and-TimE"><a href="#Training-Deep-Neural-Networks-with-DILATE-DIstortion-Loss-including-shApe-and-TimE" class="headerlink" title="Training Deep Neural Networks with DILATE((DIstortion Loss including shApe and TimE))"></a>Training Deep Neural Networks with DILATE((DIstortion Loss including shApe and TimE))</h4><p><img src="https://pic3.zhimg.com/v2-fc51e16266d817369cbd3bcbd6624552_b.jpg" alt=""></p>
<p>a set of N input time series:</p>
<script type="math/tex; mode=display">
A=\{ X_{i} \}_{i\in \{1:N\}}</script><p>å¯¹äº</p>
<script type="math/tex; mode=display">
x_{i} = (x_{i}^{1},...,x_{i}^{n})</script><p>predicts the future <strong>k-step</strong> ahead trajectory </p>
<script type="math/tex; mode=display">
\hat{y}_{i} = (\hat{y}_{i}^{1},...,\hat{y}_{i}^{k})</script><p>actual ground truth future trajectory</p>
<script type="math/tex; mode=display">
\dot{y}_{i} = (\dot{y}_{i}^{1},...,\dot{y}_{i}^{k})</script><p><img src="https://www.guanacossj.com/media/articlebodypics/1583471554346.jpg" alt=""></p>
<p><script type="math/tex">\alpha \in [0,1]</script>  hyper parameter [ËˆhaÉªpÉ™(r) pÉ™ËˆrÃ¦mÉªtÉ™(r)] </p>
<p>Notations and definitions(ç¬¦å·å’Œå®šä¹‰):</p>
<ul>
<li>A: a warping path as a binary matrix(äºŒå€¼çŸ©é˜µ)</li>
</ul>
<h4 id="Shape-and-temporal-terms"><a href="#Shape-and-temporal-terms" class="headerlink" title="Shape and temporal terms"></a>Shape and temporal terms</h4><h5 id="Shape-term"><a href="#Shape-term" class="headerlink" title="Shape term"></a>Shape term</h5><p>Shape term Our shape loss function is based on the Dynamic Time Warping (DTW)</p>
<p>The DTW loss focuses on the structural shape dissimilarity between signals</p>
<p>Temporal term Our second term Ltemporal in Eq (1) aims at penalizing temporal distortions between $\hat{y}_{i}$ $\dot{y}_{i}$</p>
<h4 id="DILATE-Efficient-Forward-and-Backward-Implementation"><a href="#DILATE-Efficient-Forward-and-Backward-Implementation" class="headerlink" title="DILATE Efficient Forward and Backward Implementation"></a>DILATE Efficient Forward and Backward Implementation</h4><h4 id="Experiments"><a href="#Experiments" class="headerlink" title="Experiments"></a>Experiments</h4><p>To illustrate the relevance of DILATE, we carry out experiments on 3 non-stationary time series datasets from different domains </p>
<p><img src="https://pic3.zhimg.com/v2-b22b26e263592f889b52486b8c1f85ce_b.jpg" alt=""></p>
]]></content>
      <categories>
        <category>å‘¨æŠ¥</category>
      </categories>
  </entry>
  <entry>
    <title>2020-2-28å‘¨æŠ¥-å•æ²™å˜‰</title>
    <url>/2020/02/28/2020-2-28%E5%91%A8%E6%8A%A5-%E5%8D%95%E6%B2%99%E5%98%89/</url>
    <content><![CDATA[<p>Memory In Memoryï¼ˆå­¦ä¹ é«˜é˜¶éå¹³ç¨³ç‰¹å¾ä¿¡æ¯ï¼‰<br><a id="more"></a><br>Memory In Memory: A Predictive Neural Network for Learning Higher-Order Non-Stationarity from Spatiotemporal Dynamics<br>ä¸€ç§ç”¨äºé«˜é˜¶å­¦ä¹ çš„é¢„æµ‹ç¥ç»ç½‘ç»œæ—¶ç©ºåŠ¨åŠ›å­¦ä¸­çš„éå¹³ç¨³æ€§</p>
<p>cvpr2019</p>
<h3 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h3><p>any non-stationary process can be decomposed into deterministic, time-variant polynomials[ËŒpÉ’lÉªËˆnÉ™ÊŠmiÉ™lz] , plus a zero-mean stochastic term. </p>
<p>ä»»ä½•ä¸€ä¸ªéå¹³ç¨³è¿‡ç¨‹éƒ½å¯ä»¥åˆ†è§£ä¸ºï¼šç¡®å®šé¡¹+æ—¶é—´å˜é‡å¤šé¡¹å¼+é›¶å‡å€¼éšæœºé¡¹</p>
<p>By applying differencing operations appropriately, we may turn time-variant polynomials into a constant, making the deterministic[dÉªËŒtÉœËmÉªËˆnÉªstÉªk] component predictable.</p>
<p>é€šè¿‡å·®åˆ†çš„æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ—¶é—´å˜é‡å¤šé¡¹å¼è½¬æ¢æˆä¸€ä¸ªå¸¸é‡ï¼Œä½¿ç¡®å®šæ€§çš„ç»„æˆéƒ¨åˆ†å¯é¢„æµ‹</p>
<p>We propose the Memory In Memory (MIM) networks and corresponding recurrent blocks for this purpose. The MIM blocks exploit the differential signals between adjacent recurrent states to model the non-stationary and approximately stationary properties in spatiotemporal dynamics with two cascaded, self-renewed memory modules.</p>
<h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>We attempt to resolve this problem by proposing a generic RNNs architecture that is more effective in non-stationarity modeling. </p>
<p>In particular, the forget gates in the recent PredRNN model [32] does not work appropriately on precipitation forecasting: about 80% of them are saturated over all timestamps, implying almost timeinvariant memory state transitions. </p>
<h3 id="Related-Work"><a href="#Related-Work" class="headerlink" title="Related Work"></a>Related Work</h3><h4 id="ARIMA-Autoregressive-Integrated-Moving-Average-Model"><a href="#ARIMA-Autoregressive-Integrated-Moving-Average-Model" class="headerlink" title="ARIMA(Autoregressive Integrated Moving Average Model)"></a>ARIMA(Autoregressive Integrated Moving Average Model)</h4><p>A time-series random variable whose power spectrum remains constant over time can be viewed as a combination of signal and noise. </p>
<p>åŠŸç‡è°±æ˜¯åŠŸç‡è°±å¯†åº¦å‡½æ•°ï¼ˆPSDï¼‰çš„ç®€ç§°ï¼Œå®ƒå®šä¹‰ä¸ºå•ä½é¢‘å¸¦å†…çš„ä¿¡å·åŠŸç‡</p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/w.jpg" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/w_f.jpg" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/p.jpg" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/f.jpg" alt=""></p>
<script type="math/tex; mode=display">|S(f)|^2</script><script type="math/tex; mode=display">\lim_{T->\propto }\frac{1}{T}|S(f)|^2</script><h4 id="Deterministic-Spatiotemporal-Prediction"><a href="#Deterministic-Spatiotemporal-Prediction" class="headerlink" title="Deterministic Spatiotemporal Prediction"></a>Deterministic Spatiotemporal Prediction</h4><h4 id="Stochastic-Spatiotemporal-Prediction"><a href="#Stochastic-Spatiotemporal-Prediction" class="headerlink" title="Stochastic Spatiotemporal Prediction"></a>Stochastic Spatiotemporal Prediction</h4><h3 id="Memory-In-Memory"><a href="#Memory-In-Memory" class="headerlink" title="Memory In Memory"></a>Memory In Memory</h3><p><img src="https://pic1.zhimg.com/v2-dc4a2024ce0201315661daf3b43c6ab8_r.jpg" alt=""></p>
<p>å·¦è¾¹æ˜¯ST-LSTMç»“æ„ï¼Œå³è¾¹æ˜¯æ›´æ”¹çš„</p>
<p>ST-LSTMä¸­çš„å¿˜è®°é—¨åŸºæœ¬æ˜¯é¥±å’Œçš„ï¼Œæ‰€ä»¥å®ƒåŸºæœ¬ä¸Šåªè·å–äº†å¹³ç¨³çš„ä¿¡æ¯ï¼Œè€Œæ•´ä¸ªç›´æ¥è”ç³»å°±æ˜¯CçŠ¶æ€å€¼ï¼Œå†åŠ ä¸Šä¸‹é¢çš„è¾“å…¥ä¸ºå·®åˆ†ï¼Œè€Œå·®åˆ†çš„è½¬æ¢å…¶å®å°±æ˜¯éå¹³ç¨³çš„ä¿¡æ¯</p>
<p><img src="https://pic1.zhimg.com/v2-69b9793882f1a8739d6b1d37336cc808_r.jpg" alt=""></p>
<p><img src="https://pic3.zhimg.com/v2-f1eac55dddaa00ab46da1b4ea116072e_r.jpg" alt=""></p>
<p><img src="https://pic3.zhimg.com/80/v2-6ec88fa03dd40e82a037c13ff6b64bd2_1440w.jpg" alt=""></p>
<h3 id="Memory-In-Memory-Networks"><a href="#Memory-In-Memory-Networks" class="headerlink" title="Memory In Memory Networks"></a>Memory In Memory Networks</h3><p><img src="https://pic3.zhimg.com/v2-06741d37a4c01fce37ef43901f5b311e_r.jpg" alt=""></p>
<p>çº¢è‰²ç®­å¤´ï¼šç”¨äºå¾®åˆ†å»ºæ¨¡çš„Hçš„å¯¹è§’çŠ¶æ€è½¬ç§»è·¯å¾„</p>
<p>è“è‰²ç®­å¤´ï¼šå­˜å‚¨å•å…ƒCï¼ŒNå’ŒSçš„æ°´å¹³è½¬æ¢è·¯å¾„</p>
<p>é»‘è‰²ç®­å¤´ï¼šä¹‹å­—å½¢çŠ¶æ€</p>
<h3 id="experience"><a href="#experience" class="headerlink" title="experience"></a>experience</h3><p>æ¨¡å‹å‚æ•°ï¼šä¸€å…±å››å±‚ï¼Œç¬¬ä¸€å±‚æ˜¯ST-LSTMï¼Œå…¶ä½™ä¸‰å±‚ä¸ºMIMï¼ŒMIMçš„feature channelä¸º64ï¼Œåˆ©ç”¨l2æŸå¤±ï¼ŒADAM optimizerï¼Œlrä¸º0.001ï¼Œåˆ©ç”¨äº†ä¸¤ä¸ªtrickï¼Œä¸ºlayer nomalizationå’Œscheduled sampling</p>
<p><img src="https://pic3.zhimg.com/v2-fec039cb2962195deb890b6680c5395a_r.jpg" alt=""></p>
<h3 id="GluonTS-AWS"><a href="#GluonTS-AWS" class="headerlink" title="GluonTS(AWS)"></a>GluonTS(AWS)</h3><p><img src="https://www.guanacossj.com/media/articlebodypics/gluonts_all.jpg" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/gluonts67.jpg" alt=""></p>
]]></content>
      <categories>
        <category>å‘¨æŠ¥</category>
      </categories>
  </entry>
  <entry>
    <title>2020-2-21å‘¨æŠ¥-å•æ²™å˜‰</title>
    <url>/2020/02/20/2020-2-21%E5%91%A8%E6%8A%A5-%E5%8D%95%E6%B2%99%E5%98%89/</url>
    <content><![CDATA[<p>PredRNN++â€¦<br><a id="more"></a></p>
<h3 id="PredRNN"><a href="#PredRNN" class="headerlink" title="PredRNN++:"></a>PredRNN++:</h3><p>Towards A Resolution of the Deep-in-Time Dilemma in Spatiotemporal Predictive Learning</p>
<p>æ—¨åœ¨è§£å†³æ—¶ç©ºé¢„æµ‹çš„æ·±å±‚æ¬¡æ—¶é—´å›°å¢ƒ</p>
<p>ICML2018 Tsinghua</p>
<h4 id="PredRNN-1"><a href="#PredRNN-1" class="headerlink" title="PredRNN"></a>PredRNN</h4><p>nips2017 Tsinghua</p>
<p>PredRNN: Recurrent Neural Networks for Predictive Learning using Spatiotemporal LSTMs</p>
<p>ç”¨ST-LSTMçš„é¢„æµ‹å­¦ä¹ å¾ªç¯ç¥ç»ç½‘ç»œ(spatial + temporal)</p>
<p>PredRNNåˆ©ç”¨äº†ä¸€ç§åŒé‡è®°å¿†æœºåˆ¶ï¼Œé€šè¿‡ç®€å•çš„é—¨æ§çº§è”ï¼Œå°†æ°´å¹³æ›´æ–°çš„æ—¶é—´è®°å¿†Cä¸å‚ç›´è½¬æ¢çš„ç©ºé—´è®°å¿†Mç»“åˆèµ·æ¥</p>
<p>å…ˆæ¥å›å¿†ä¸€ä¸‹LSTM</p>
<p><img src="https://pic2.zhimg.com/v2-810f2d553fa6e6f43854efdc881be8a1_r.jpg" alt=""></p>
<ol>
<li>$h_{t-1}$ä¸$X_{t}$åšconcatæ“ä½œï¼Œä¹‹åç»è¿‡sigmoidå½¢æˆ[0, 1]çš„å¿˜è®°é—¨ï¼Œè¾“å…¥é—¨ï¼Œè¾“å‡ºé—¨</li>
<li>Ct-1é€šè¿‡å¿˜è®°é—¨ </li>
<li>ht-1ä¸Xtåšconcatæ“ä½œé€šè¿‡tanhæ¿€æ´»å‡½æ•°ï¼Œé€šè¿‡è¾“å…¥é—¨ï¼ˆè¿™é‡Œåœ¨é€šè¿‡è¾“å…¥é—¨ä¹‹å‰ç›¸å½“äºç”Ÿæˆäº†æ­¤æ—¶çš„è¾“å…¥ç”ŸæˆçŠ¶æ€ï¼‰ </li>
<li>ä»¥ä¸Šé€šè¿‡é—å¿˜é—¨å’Œè¾“å…¥é—¨çš„ä¸¤ä¸ªå‘é‡ç›¸åŠ å°±æ˜¯æœ€åçš„Ctï¼Œä¹Ÿå°±æ˜¯æ­¤æ—¶çš„cell state</li>
<li>æœ€åï¼Œè¿™ä¸ªcell stateé€šè¿‡å†ä¸€æ¬¡çš„éçº¿æ€§å˜åŒ–tanh æœ€ç»ˆé€šè¿‡è¾“å‡ºé—¨è¾“å‡ºå¾—åˆ°æœ€åçš„ht</li>
</ol>
<p>Spatiotemporal memory flow</p>
<p><img src="https://pic4.zhimg.com/80/v2-7c898aed50f1e1d9aee647e4c273ad33_hd.jpg" alt=""></p>
<p><img src="https://pic1.zhimg.com/80/v2-f5c836f08237baea9393aefce80d0fd8_hd.jpg" alt=""></p>
<p>ç¼ºç‚¹:</p>
<ol>
<li>å»æ‰æ°´å¹³æ–¹å‘çš„æ—¶é—´æµï¼Œä¼šç‰ºç‰²æ—¶é—´ä¸Šçš„ä¸€è‡´æ€§ï¼Œå› ä¸ºåœ¨åŒä¸€å±‚çš„ä¸åŒæ—¶é—´æ²¡æœ‰æ—¶é—´æµäº†ã€‚ </li>
<li>è®°å¿†éœ€è¦åœ¨é¥è¿œçš„çŠ¶æ€ä¹‹é—´æµåŠ¨æ›´é•¿çš„è·¯å¾„ï¼Œæ›´å®¹æ˜“é€ æˆæ¢¯åº¦æ¶ˆå¤±ã€‚ æ‰€ä»¥å¼•å…¥äº†ä¸€ä¸ªæ–°çš„building blocksä¸ºST-LSTMã€‚</li>
</ol>
<p>Spatiotemporal LSTM</p>
<p><img src="https://pic4.zhimg.com/v2-f3cd76086384ede22b29e6c8a5f7f45b_r.jpg" alt=""></p>
<p><img src="https://pic2.zhimg.com/80/v2-fdb1465c439cd9f3eea4ee52bf2b4125_hd.jpg" alt=""></p>
<p>éœ‡æƒŠï¼ï¼ï¼</p>
<ul>
<li>ä¸ŠåŠéƒ¨åˆ†å°±æ˜¯LSTM(Standard Temporal Memory)</li>
<li>ä¸‹åŠéƒ¨åˆ†ç›¸å½“äºæŠŠcå’Œhä¸€èµ·æ›´æ”¹ä¸ºMï¼ŒMå³æ—¶ç©ºè®°å¿†çŠ¶æ€(Spatiotemporal Memory)</li>
</ul>
<p><img src="https://pic2.zhimg.com/80/v2-bbe7560a50ff9d511746fb94562ebd39_hd.jpg" alt=""></p>
<h4 id="PredRNN-2"><a href="#PredRNN-2" class="headerlink" title="PredRNN++"></a>PredRNN++</h4><ul>
<li>Stacked ConvLSTMs(nips2015)</li>
<li>Deep Transition ConvLSTMs</li>
<li>Pred RNN çº¢çº¿è¡¨ç¤ºç©ºé—´è®°å¿†çš„æ·±åº¦è¿‡æ¸¡è·¯å¾„ï¼Œæ°´å¹³çš„é»‘è‰²ç®­å¤´è¡¨ç¤ºæ—¶é—´è®°å¿†çš„æ›´æ–°æ–¹å‘<br><img src="https://img-blog.csdnimg.cn/20191222210421460.png?#pic_center" alt=""></li>
</ul>
<p>Causal LSTM(å› æœé•¿çŸ­æœŸè®°å¿†)<br>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå°†è·å¾—æ›´å¼ºå¤§çš„å»ºæ¨¡èƒ½åŠ›ï¼Œä»¥å®ç°æ›´å¼ºçš„ç©ºé—´ç›¸å…³æ€§å’ŒçŸ­æœŸåŠ¨æ€</p>
<p><img src="https://img-blog.csdnimg.cn/20191222205916540.png?#pic_center" alt=""></p>
<ul>
<li>æ¯ä¸ªé—¨ä¸æ˜¯ç”±Xå’ŒHå†³å®šï¼Œè€Œæ˜¯ç”±Xå’ŒHä»¥åŠCå†³å®šï¼Œé€šè¿‡è¾“å…¥é—¨ä¹‹å‰çš„çŠ¶æ€ä¹Ÿæ˜¯ç”±ä¸‰è€…å†³å®šçš„</li>
<li>ä¸¤ä¸ªmemoryç»“æ„ï¼Œå³Cå’ŒMï¼ŒCä¸ºtemporal stateï¼ŒMä¸ºspatial stateï¼Œå› ä¸ºè¾“å…¥Cä¸ºä¸Šä¸€ä¸ªæ—¶åˆ»çš„Cï¼ŒMæ˜¯ä¸Šä¸€å±‚çš„Mï¼Œæ‰€ä»¥è¿™é‡ŒCä¸æ—¶é—´ç»´åº¦æœ‰å…³ï¼ŒMä¸ç©ºé—´ç»´åº¦æœ‰å…³</li>
<li>Mä½œä¸ºç¬¬äºŒéƒ¨åˆ†çš„stateè¾“å…¥ï¼Œå¹¶ä¸”é€šè¿‡å¿˜è®°é—¨ä¹‹å‰åšäº†ä¸€ä¸ªéçº¿æ€§æ“ä½œtanh</li>
</ul>
<p>å¯¹æ¯”ST-LSTMæ¥è¯´ï¼ŒCausal LSTMå¯¹äºMå’ŒHå®šä¹‰æ›´åŠ æ¸…æ™°ï¼Œå¹¶ä¸”ä¸æ˜¯ç®€å•çš„concatï¼Œè€Œæ˜¯é‡‡ç”¨äº†ä¸€ä¸ªé€’å½’æ·±åº¦æ›´æ·±çš„ä¸€ä¸ªçº§è”ç»“æ„æœ€ç»ˆè¾“å‡ºH</p>
<p>Gradient Highway(é«˜é€Ÿæ¢¯åº¦)</p>
<p>é€šè¿‡Recurrent Highway Networksçš„æ€æƒ³èƒ½å¤Ÿè¯æ˜é«˜é€Ÿç½‘ç»œèƒ½å¤Ÿæœ‰æ•ˆçš„åœ¨éå¸¸æ·±çš„ç½‘ç»œä¸­ä¼ é€’æ¢¯åº¦ï¼Œç»§è€Œé˜²æ­¢é•¿æ—¶å¯¼è‡´çš„æ¢¯åº¦æ¶ˆå¤±</p>
<p><img src="https://pic3.zhimg.com/80/v2-3b541bda171d5f4c9299c77326e13702_hd.jpg" alt=""></p>
<p><img src="https://pic1.zhimg.com/80/v2-cf06c70d336a89700435195a0574b39c_hd.jpg" alt=""></p>
<p>æ€»ä½“æ¶æ„</p>
<p><img src="https://pic3.zhimg.com/80/v2-61d4c59ff38010cb9613574bf0290c9a_hd.jpg" alt=""></p>
<p>GHUè¿æ¥äº†å½“å‰æ—¶åˆ»ä»¥åŠå‰ä¸€ä¸ªæ—¶åˆ»çš„è¾“å…¥ï¼Œå¼•å¯¼çš„ç»“æœå°±æ˜¯æ¢¯åº¦ä¸å†æ˜¯ä¸€è‚¡çº¿ä¼ æ’­äº†ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥åœ¨ç¬¬ä¸€å±‚ä¸ç¬¬äºŒå±‚ä¹‹é—´æœ‰ä¸ªé«˜é€Ÿçš„ä¼ æ’­ï¼Œæ¢å¥è¯è®²å°±æ˜¯ä¼ æ’­çš„è·ç¦»ç¼©çŸ­äº†ï¼Œä¹Ÿå°±å˜å¾—æ²¡æœ‰ä¹‹å‰çš„é‚£ä¹ˆâ€™æ·±â€˜äº†ï¼Œå¯ä»¥æœ‰æ•ˆçš„è§£å†³æ¢¯åº¦æ¶ˆå¤±çš„é—®é¢˜</p>
<h3 id="Block-Hankel-Tensor-ARIMA-for-Multiple-Short-Time-Series-Forecasting"><a href="#Block-Hankel-Tensor-ARIMA-for-Multiple-Short-Time-Series-Forecasting" class="headerlink" title="Block Hankel Tensor ARIMA for Multiple Short Time Series Forecasting"></a>Block Hankel Tensor ARIMA for Multiple Short Time Series Forecasting</h3><h4 id="Hankel-æ±‰å…‹å°”çŸ©é˜µï¼ˆæ¯ä¸€æ¡é€†å¯¹è§’çº¿ä¸Šçš„å…ƒç´ éƒ½ç›¸ç­‰çš„çŸ©é˜µï¼‰"><a href="#Hankel-æ±‰å…‹å°”çŸ©é˜µï¼ˆæ¯ä¸€æ¡é€†å¯¹è§’çº¿ä¸Šçš„å…ƒç´ éƒ½ç›¸ç­‰çš„çŸ©é˜µï¼‰" class="headerlink" title="Hankel:æ±‰å…‹å°”çŸ©é˜µï¼ˆæ¯ä¸€æ¡é€†å¯¹è§’çº¿ä¸Šçš„å…ƒç´ éƒ½ç›¸ç­‰çš„çŸ©é˜µï¼‰"></a>Hankel:æ±‰å…‹å°”çŸ©é˜µï¼ˆæ¯ä¸€æ¡é€†å¯¹è§’çº¿ä¸Šçš„å…ƒç´ éƒ½ç›¸ç­‰çš„çŸ©é˜µï¼‰</h4><script type="math/tex; mode=display">
\begin{bmatrix}
 1&  2&  3&  4&  5&  6& 7\\ 
 2&  3&  4&  5&  6&  7& 8\\ 
 3&  4&  5&  6&  7&  8& 9
\end{bmatrix}</script><h4 id="Tuckeråˆ†è§£"><a href="#Tuckeråˆ†è§£" class="headerlink" title="Tuckeråˆ†è§£"></a>Tuckeråˆ†è§£</h4><p>è¿™æ˜¯ä¸€ä¸ªä¸‰é˜¶å¼ é‡</p>
<p><img src="/Users/Arithmetic/Pictures/tensor.png" alt=""></p>
<p>ç§©ä¸€å¼ é‡ï¼šå¦‚æœä¸€ä¸ªKé˜¶å¼ é‡èƒ½å¤Ÿè¡¨ç¤ºæˆKä¸ªå‘é‡çš„å¤–ç§¯ï¼Œé‚£ä¹ˆè¯¥å¼ é‡ç§°ä¸ºç§©ä¸€å¼ é‡<br>[[3 4],[6 8]]è¿™ä¸ªäºŒé˜¶å¼ é‡å¯ä»¥è¡¨ç¤ºä¸º[1 2]â—‹[3 4]çš„å¤–ç§¯ï¼Œé‚£ä¹ˆè¿™å°±æ˜¯ä¸€ä¸ªäºŒé˜¶ç§©ä¸€å¼ é‡<br><img src="https://www.guanacossj.com/media/articlebodypics/1582207111495.jpg" alt=""></p>
<p>CPåˆ†è§£<br>CPåˆ†è§£å…¶å®å°±æ˜¯å¤šä¸ªrank-one tensorsçš„å’Œ</p>
<p><img src="/Users/Arithmetic/Pictures/cp.png" alt=""></p>
<p>å…¬å¼è¡¨ç¤ºå¦‚ä¸‹ï¼š</p>
<p><img src="/Users/Arithmetic/Pictures/cp_f.png" alt=""></p>
<p>tuckeråˆ†è§£</p>
<p><img src="http://www.xiongfuli.com/assets/img/201606/tucker.png" alt=""></p>
<p><img src="/Users/Arithmetic/Pictures/tucker_f.png" alt=""></p>
<p>è¿™é‡ŒA$\in$R$^{I\times P}$,B$\in$R$^{J\times Q}$,C$\in$R$^{K\times R}$æ˜¯å› å­çŸ©é˜µï¼ˆé€šå¸¸æ˜¯æ­£äº¤çš„ï¼‰ï¼Œå¯ä»¥å½“åšæ˜¯æ¯ä¸€ç»´ä¸Šçš„ä¸»è¦æˆåˆ†ã€‚æ ¸å¼ é‡è¡¨ç¤ºæ¯ä¸€ç»´æˆåˆ†ä¹‹é—´çš„è”ç³»<br>å› æ­¤ï¼Œå¯¹äºä¸€ä¸ªä¸‰é˜¶å¼ é‡ï¼Œå¯ä»¥é€šè¿‡tuckeråˆ†è§£ä¸ºä¸‰ä¸ªäºŒé˜¶å› å­çŸ©é˜µå’Œä¸€ä¸ªä¸‰é˜¶æ ¸å‘é‡</p>
<h4 id="Step1-Block-Hankel-Tensor-via-MDT"><a href="#Step1-Block-Hankel-Tensor-via-MDT" class="headerlink" title="Step1: Block Hankel Tensor via MDT"></a>Step1: Block Hankel Tensor via MDT</h4><p>MDT:multi-way delay embedding transform(å¤šè·¯å»¶è¿Ÿå˜æ¢)<br>ç›®çš„æ˜¯åˆ©ç”¨MDTå°†å¤šä¸ªTSè½¬æ¢æˆä¸€ä¸ªé«˜é˜¶çš„å—Hankelå¼ é‡<br>å‡è®¾æœ‰1000æ¡æ—¶é—´åºåˆ—ï¼Œæ¯æ¡åºåˆ—çš„é•¿åº¦ä¸º40ï¼Œå³ I = 1000ï¼ŒT=40ï¼Œè®¾ç½®å‚æ•°t = 5<br>ç»MDTæ²¿ç€æ—¶é—´ç»´åº¦å˜æ¢åï¼Œå¾—åˆ°ä¸€ä¸ª1000âœ–ï¸5*âœ–ï¸ï¼ˆ40-5+1ï¼‰=1000âœ–ï¸5âœ–ï¸36çš„ä¸‰ç»´å¼ é‡</p>
]]></content>
      <categories>
        <category>å‘¨æŠ¥</category>
      </categories>
  </entry>
  <entry>
    <title>2020-2.14å‘¨æŠ¥-å•æ²™å˜‰</title>
    <url>/2020/02/13/2020-2-14%E5%91%A8%E6%8A%A5-%E5%8D%95%E6%B2%99%E5%98%89/</url>
    <content><![CDATA[<p>DA-RNN + Transformer + CW-RNN<br><a id="more"></a></p>
<h3 id="å½©è›‹"><a href="#å½©è›‹" class="headerlink" title="å½©è›‹"></a>å½©è›‹</h3><ul>
<li>å†™äº†ä¸€ç¯‡å…³äºä½¿ç”¨ç™¾åº¦Echartsç»˜åˆ¶æ–°å‹å† çŠ¶ç—…æ¯’å…¨å›½åˆ†å¸ƒå›¾çš„åšå®¢</li>
<li>æ”¶åˆ°æ¥è‡ªçš–å—åŒ»å­¦é™¢å¼‹çŸ¶å±±åŒ»é™¢æ•™è‚²å¤„é‡‘æ¥æ¶¦çš„é‚®ä»¶å¸Œæœ›åˆä½œ</li>
<li>å…¶å®å°±æ˜¯ä»–ä»¬å›¢é˜Ÿæ”¶é›†äº†ä¸€ç‚¹ç–«æƒ…æ•°æ®æ‰“ç®—å‘ä¸€ç¯‡æ–‡ç« ï¼Œå¸Œæœ›æˆ‘æŒ‰ç…§ä»–ä»¬çš„è¦æ±‚ç»™ä»–ä»¬ç”»ä¸ªå›¾</li>
</ul>
<p><img src="https://www.guanacossj.com/media/articlebodypics/QQ20200214-0.png" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/QQ20200214-1.png" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/echarts.png" alt=""></p>
<h3 id="DA-RNN"><a href="#DA-RNN" class="headerlink" title="DA-RNN"></a>DA-RNN</h3><p><img src="https://www.guanacossj.com/media/articlebodypics/da-rnn-67-1.jpg" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/da-rnn-67-2.jpg" alt=""></p>
<figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Test </span>RMSE: 0.256</span><br><span class="line"><span class="keyword">Test </span>nRMSE: 0.348</span><br></pre></td></tr></table></figure>
<h3 id="CW-RNN-Clock-Work-RNN"><a href="#CW-RNN-Clock-Work-RNN" class="headerlink" title="CW-RNN(Clock Work RNN)"></a>CW-RNN(Clock Work RNN)</h3><p>ICML2014</p>
<p>æœ¬æ–‡ä»‹ç»äº†å¯¹æ ‡å‡†RNNä½“ç³»ç»“æ„çš„ä¸€ä¸ªç®€å•è€Œå¼ºå¤§çš„æ”¹è¿›ï¼Œå³æ—¶é’Ÿå·¥ä½œRNNï¼ˆCW-RNNï¼‰ï¼Œå®ƒå°†éšè—å±‚åˆ’åˆ†ä¸ºä¸åŒçš„æ¨¡å—ï¼Œæ¯ä¸ªå¤„ç†ä»¥è‡ªå·±çš„æ—¶é—´ç²’åº¦è¾“å…¥ï¼Œä»…ä»¥æŒ‡å®šçš„æ—¶é’Ÿé€Ÿç‡è¿›è¡Œè®¡ç®—ã€‚<br>CW-RNNæ²¡æœ‰ä½¿æ ‡å‡†RNNæ¨¡å‹æ›´åŠ å¤æ‚ï¼Œè€Œæ˜¯å‡å°‘äº†RNNå‚æ•°çš„æ•°é‡ï¼Œæ˜¾è‘—æé«˜äº†æµ‹è¯•ä»»åŠ¡çš„æ€§èƒ½ï¼ŒåŠ å¿«äº†ç½‘ç»œè¯„ä¼°çš„é€Ÿåº¦</p>
<p>Input = ($x_{1}$,$x_{2}$,â€¦,$x_{t}$,â€¦)</p>
<p>Output = ($y_{1}$,$y_{2}$,â€¦,$y_{t}$,â€¦)</p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/cwrnn.jpg" alt=""></p>
<ul>
<li>æŠŠéšå«å±‚èŠ‚ç‚¹åˆ†æˆäº†è‹¥å¹²ä¸ªæ¨¡å—ï¼ˆåœ¨å›¾ä¸­åˆ†æˆäº†3ä¸ªæ¨¡å—ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿è¯´æ˜ï¼Œå®é™…ä¸­çš„æ¨¡å—ä¸ªæ•°å¯ä»¥è‡ªå®šä¹‰ï¼‰ï¼Œè€Œä¸”æ¯ä¸ªæ¨¡å—éƒ½åˆ†é…äº†ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸï¼ˆTiï¼‰ï¼Œä¾¿äºç‹¬ç«‹ç®¡ç†</li>
<li>éšå«å±‚ä¹‹é—´çš„è¿æ¥ï¼Œåœ¨ä¸€ä¸ªæ¨¡å—å†…éƒ¨æ˜¯å…¨è¿æ¥ï¼Œä½†æ˜¯æ¨¡å—ä¹‹é—´æ˜¯æœ‰æ–¹å‘çš„ã€‚æ¨¡å—ä¹‹é—´çš„è¿æ¥æ˜¯ä»é«˜æ—¶é’Ÿé¢‘ç‡çš„æ¨¡å—æŒ‡å‘ä½æ—¶é’Ÿé¢‘ç‡çš„æ¨¡å—</li>
<li>æ ‡å‡†RNN<script type="math/tex; mode=display">
y_{H}^{(t)} = f_{H}(W_{H}*y^{(t-1)}+W_{I}*x^{(t)})</script><script type="math/tex; mode=display">
y_{O}^{(t)} = f_{O}(W_{O}*y_{H}^{(t)})</script></li>
<li>åªæœ‰å½“$t$ MOD $T_{i}$ = 0æ—¶æ‰ä¼šè¢«æ‰§è¡Œ</li>
<li>{$T_{1}$,â€¦,$T_{g}$}çš„è®¾ç½®æ˜¯ä»»æ„çš„ï¼Œåœ¨è®ºæ–‡ä¸­ä½¿ç”¨$T_{i}=2^{i-1}$</li>
</ul>
<p>$T_{1}=1$,$T_{2}=2$,$T_{3}=4$,$T_{4}=8$,$T_{5}=16$,$T_{6}=32$,$T_{7}=64$</p>
<ul>
<li>åˆ†å—<script type="math/tex; mode=display">
W_{H} = \begin{pmatrix}
\\ W_{H_{1}}
\\ .
\\ .
\\ W_{H_{g}}
\end{pmatrix}</script><script type="math/tex; mode=display">
W_{I} = \begin{pmatrix}
\\ W_{I_{1}}
\\ .
\\ .
\\ W_{I_{g}}
\end{pmatrix}</script></li>
<li>ä¸å‚ä¸è¿ç®—çš„éƒ¨åˆ†ç½®é›¶<script type="math/tex; mode=display">
\left\{\begin{matrix}
\\ W_{H_{i}},t mod T_{i} = 0
\\ 0,otherwise
\end{matrix}\right.</script></li>
<li>å°†$W_{h}$å¼ºåˆ¶è½¬æˆä¸Šä¸‰è§’<script type="math/tex; mode=display">W_{H_{i}}={0_{1},...,0_{i-1},W_{H_{i,i}},...,W_{H_{i,g}}}</script></li>
</ul>
<p><img src="https://www.guanacossj.com/media/articlebodypics/cwrnn-2.jpg" alt=""></p>
<p>æˆ‘ä»¬è¦å¤„ç†åºåˆ—ä¸­ç¬¬6ï¼ˆt=6ï¼‰ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œé€šè¿‡tä¸æ¯ä¸ªæ¨¡å—çš„æ—¶é’Ÿå‘¨æœŸè¿›è¡ŒMODï¼ˆæ±‚ä½™æ•°ï¼‰è®¡ç®—åå¯ä»¥å¾—åˆ°åªæœ‰å‰ä¸¤ä¸ªæ¨¡å—ä¼šå‚ä¸è¿ç®—ã€‚æ‰€ä»¥$W_{h}$å’Œ$W_{x}$çŸ©é˜µé™¤äº†ä¸Šé¢ä¸¤è¡Œä¹‹å¤–ï¼Œå…¶ä»–å…ƒç´ çš„å€¼éƒ½æ˜¯0ã€‚ç»è¿‡è®¡ç®—ä¹‹åï¼Œå¾—åˆ°çš„$h_{t}$ä¹Ÿåªæœ‰å‰ä¸¤ä¸ªæ¨¡å—æœ‰å€¼ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠCW-RNNè¿‡ç¨‹çœ‹æˆæ˜¯é€šè¿‡ä¸€äº›äººå·¥çš„å¹²é¢„ï¼Œé€‰æ‹©ä¸åŒçš„éšå«å±‚èŠ‚ç‚¹è¿›è¡Œå·¥ä½œ</p>
<p><img src="http://ir.dlut.edu.cn/Uploads/ue/image/20151201/6358457411082925904194442.jpg" alt=""></p>
<ul>
<li>ä½æ—¶é’Ÿé€Ÿç‡æ¨¡å—å¤„ç†ã€ä¿ç•™å’Œè¾“å‡ºä»è¾“å…¥ä¸­è·å¾—çš„é•¿æœŸä¿¡æ¯åºåˆ—ï¼Œ</li>
<li>é«˜æ—¶é’Ÿé€Ÿç‡æ¨¡å—åˆ™ä¾§é‡äºæœ¬åœ°çš„é«˜é¢‘ä¿¡æ¯</li>
</ul>
<p>ä½œè€…å¯¹æ¯”äº†ä¼ ç»ŸRNNã€LSTMã€CW-RNNï¼Œåœ¨å–å±€éƒ¨å›¾çš„æ—¶å€™å¯ä»¥è§‚å¯Ÿåˆ°ï¼ŒLSTMçš„å›å½’æ•ˆæœç›¸å¯¹å¹³æ»‘ï¼Œè€ŒCW-RNNå¹¶æ²¡æœ‰è¿™ç§ç¼ºé™·<br><img src="https://www.guanacossj.com/media/articlebodypics/comparecwrnn.jpg" alt=""></p>
<p>æˆ‘å¤ç°äº†ä¸‹è‚¡ç¥¨æ•°æ®é›†ä¸Šçš„æ•ˆæœï¼Œå®éªŒè¿˜æ²¡å®Œå…¨å®Œæˆ<br><img src="https://www.guanacossj.com/media/articlebodypics/cwrnn-stock.jpg" alt=""></p>
<h3 id="Transformer"><a href="#Transformer" class="headerlink" title="Transformer"></a>Transformer</h3><p><img src="https://www.guanacossj.com/media/articlebodypics/multi_head_net.jpg" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/transf-67-1.jpg" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/transf-67-2.jpg" alt=""></p>
]]></content>
      <categories>
        <category>å‘¨æŠ¥</category>
      </categories>
  </entry>
  <entry>
    <title>2020-1-17å‘¨æŠ¥-å•æ²™å˜‰</title>
    <url>/2020/01/17/2020-1-17%E5%91%A8%E6%8A%A5-%E5%8D%95%E6%B2%99%E5%98%89/</url>
    <content><![CDATA[<p>Django+uwsgi+Nginx<br><a id="more"></a></p>
<h3 id="WSGI"><a href="#WSGI" class="headerlink" title="WSGI"></a>WSGI</h3><p>WSGI Web Server Gateway Interface</p>
<p><img src="https://pic1.zhimg.com/80/v2-6c4572c783816364f2569af961814430_hd.jpg" alt=""></p>
<p>WSGIæ˜¯ä¸€ç§é€šä¿¡åè®®ï¼ŒWSGI ä¸æ˜¯æ¡†æ¶ï¼Œä¹Ÿä¸æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œè€Œæ˜¯ä»‹äº Webåº”ç”¨ç¨‹åºï¼ˆWebæ¡†æ¶ï¼‰ä¸ Web Server ä¹‹é—´äº¤äº’çš„ä¸€ç§è§„èŒƒã€‚</p>
<h3 id="uwsgi"><a href="#uwsgi" class="headerlink" title="uwsgi"></a>uwsgi</h3><ul>
<li>äºŒè¿›åˆ¶åè®®ï¼Œå¯ä»¥æºå¸¦ä»»ä½•ç±»å‹çš„æ•°æ®ã€‚ä¸€ä¸ªuwsgiåˆ†ç»„çš„å¤´4ä¸ªå­—èŠ‚æè¿°äº†è¿™ä¸ªåˆ†ç»„åŒ…å«çš„æ•°æ®ç±»å‹ã€‚</li>
<li>uwsgiæ˜¯ä¸€ç§çº¿è·¯åè®®è€Œä¸æ˜¯é€šä¿¡åè®®ï¼Œåœ¨æ­¤å¸¸ç”¨äºåœ¨uWSGIæœåŠ¡å™¨ä¸å…¶ä»–ç½‘ç»œæœåŠ¡å™¨çš„æ•°æ®é€šä¿¡ã€‚</li>
</ul>
<h3 id="uWSGI"><a href="#uWSGI" class="headerlink" title="uWSGI"></a>uWSGI</h3><p>uWSGIæ˜¯å®ç°äº†uwsgiå’ŒWSGIä¸¤ç§åè®®çš„WebæœåŠ¡å™¨ï¼Œä½¿ç”¨cè¯­è¨€å¼€å‘ã€‚</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">pip <span class="keyword">install</span> uwsgi</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸¤çº§ç»“æ„ åœ¨è¿™ç§ç»“æ„é‡Œï¼ŒuWSGIä½œä¸ºæœåŠ¡å™¨ï¼Œå®ƒç”¨åˆ°äº†HTTPåè®®ä»¥åŠwsgiåè®®ï¼Œflaskåº”ç”¨ä½œä¸ºapplicationï¼Œå®ç°äº†wsgiåè®®ã€‚å½“æœ‰å®¢æˆ·ç«¯å‘æ¥è¯·æ±‚ï¼ŒuWSGIæ¥å—è¯·æ±‚ï¼Œè°ƒç”¨flask appå¾—åˆ°ç›¸åº”ï¼Œä¹‹åç›¸åº”ç»™å®¢æˆ·ç«¯ã€‚ è¿™é‡Œè¯´ä¸€ç‚¹ï¼Œé€šå¸¸æ¥è¯´ï¼ŒFlaskç­‰webæ¡†æ¶ä¼šè‡ªå·±é™„å¸¦ä¸€ä¸ªwsgiæœåŠ¡å™¨(è¿™å°±æ˜¯flaskåº”ç”¨å¯ä»¥ç›´æ¥å¯åŠ¨çš„åŸå› )ï¼Œä½†æ˜¯è¿™åªæ˜¯åœ¨å¼€å‘é˜¶æ®µç”¨åˆ°çš„ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒæ˜¯ä¸å¤Ÿç”¨çš„ï¼Œæ‰€ä»¥ç”¨åˆ°äº†uwsgiè¿™ä¸ªæ€§èƒ½é«˜çš„wsgiæœåŠ¡å™¨ã€‚</li>
<li>ä¸‰çº§ç»“æ„ åœ¨è¿™ç§ç»“æ„é‡Œï¼ŒuWSGIä½œä¸ºä¸­é—´ä»¶ï¼Œå®ƒç”¨åˆ°äº†uwsgiåè®®(ä¸nginxé€šä¿¡)ï¼Œwsgiåè®®(è°ƒç”¨Flask app)ã€‚</li>
<li>æé«˜web serveræ€§èƒ½(uWSGIå¤„ç†é™æ€èµ„æºä¸å¦‚nginxï¼›nginxä¼šåœ¨æ”¶åˆ°ä¸€ä¸ªå®Œæ•´çš„httpè¯·æ±‚åå†è½¬å‘ç»™wWSGI)ã€‚</li>
<li>nginxå¯ä»¥åšè´Ÿè½½å‡è¡¡(å‰ææ˜¯æœ‰å¤šä¸ªæœåŠ¡å™¨)ï¼Œä¿æŠ¤äº†å®é™…çš„webæœåŠ¡å™¨(å®¢æˆ·ç«¯æ˜¯å’Œnginxäº¤äº’è€Œä¸æ˜¯uWSGI)ã€‚</li>
</ul>
<h3 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h3><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">sudo apt-<span class="builtin-name">get</span> install nginx</span><br></pre></td></tr></table></figure>
<p>Nginxæ˜¯ä¸€æ¬¾è½»é‡çº§çš„WebæœåŠ¡å™¨ã€åå‘ä»£ç†æœåŠ¡å™¨ï¼Œç”±äºå®ƒçš„å†…å­˜å ç”¨å°‘ï¼Œå¯åŠ¨æå¿«ï¼Œé«˜å¹¶å‘èƒ½åŠ›å¼ºï¼Œåœ¨äº’è”ç½‘é¡¹ç›®ä¸­å¹¿æ³›åº”ç”¨ã€‚</p>
<p><img src="https://pic2.zhimg.com/80/v2-4787a512240b238ebf928cd0651e1d99_hd.jpg" alt=""></p>
<h3 id="Django-uWSGI-Nginx"><a href="#Django-uWSGI-Nginx" class="headerlink" title="Django + uWSGI + Nginx"></a>Django + uWSGI + Nginx</h3><p><img src="https://img-blog.csdnimg.cn/20181216174304355.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2d5bWFpc3ls,size_16,color_FFFFFF,t_70" alt=""></p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">user</span> www-data;</span><br><span class="line"><span class="attribute">worker_processes</span> auto;</span><br><span class="line"><span class="attribute">pid</span> /run/nginx.pid;</span><br><span class="line"><span class="attribute">include</span> /etc/nginx/modules-enabled/<span class="regexp">*.conf</span>;</span><br><span class="line"></span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">	<span class="attribute">worker_connections</span> <span class="number">768</span>;</span><br><span class="line">	<span class="comment"># multi_accept on;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">##</span></span><br><span class="line">	<span class="comment"># Basic Settings</span></span><br><span class="line">	<span class="comment">##</span></span><br><span class="line"></span><br><span class="line">	<span class="section">server</span> &#123;   		<span class="comment"># è¿™ä¸ªserveræ ‡è¯†æˆ‘è¦é…ç½®äº†</span></span><br><span class="line">		<span class="attribute">listen</span> <span class="number">80</span>;  <span class="comment"># æˆ‘è¦ç›‘å¬é‚£ä¸ªç«¯å£</span></span><br><span class="line">		<span class="attribute">server_name</span> <span class="number">118.25.79.249</span> ;  <span class="comment"># ä½ è®¿é—®çš„è·¯å¾„å‰é¢çš„urlåç§°</span></span><br><span class="line">		<span class="attribute">charset</span>  utf-<span class="number">8</span>; <span class="comment"># Nginxç¼–ç </span></span><br><span class="line">		<span class="attribute">gzip</span> <span class="literal">on</span>;  <span class="comment"># å¯ç”¨å‹ç¼©,è¿™ä¸ªçš„ä½œç”¨å°±æ˜¯ç»™ç”¨æˆ·ä¸€ä¸ªç½‘é¡µ,æ¯”å¦‚3Må‹ç¼©å1Mè¿™æ ·ä¼ è¾“é€Ÿåº¦å°±ä¼šæé«˜å¾ˆå¤š</span></span><br><span class="line">		<span class="attribute">gzip_types</span> text/plain application/x-javascript text/css text/javascript application/x-httpd-php application/json text/json image/jpeg image/gif image/png application/octet-stream;  <span class="comment"># æ”¯æŒå‹ç¼©çš„ç±»å‹</span></span><br><span class="line"></span><br><span class="line">		<span class="attribute">error_page</span>  <span class="number">404</span>           		/<span class="number">404</span>.html;  <span class="comment"># é”™è¯¯é¡µé¢</span></span><br><span class="line">		<span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;  <span class="comment"># é”™è¯¯é¡µé¢</span></span><br><span class="line"></span><br><span class="line">		<span class="comment"># æŒ‡å®šé¡¹ç›®è·¯å¾„uwsgi</span></span><br><span class="line">		<span class="attribute">location</span> / &#123;        <span class="comment"># è¿™ä¸ªlocationå°±å’Œå’±ä»¬Djangoçš„url(r'^admin/', admin.site.urls),</span></span><br><span class="line">			<span class="attribute">include</span> uwsgi_params;  <span class="comment"># å¯¼å…¥ä¸€ä¸ªNginxæ¨¡å—ä»–æ˜¯ç”¨æ¥å’ŒuWSGIè¿›è¡Œé€šè®¯çš„</span></span><br><span class="line">			<span class="attribute">uwsgi_connect_timeout</span> <span class="number">30</span>;  <span class="comment"># è®¾ç½®è¿æ¥uWSGIè¶…æ—¶æ—¶é—´</span></span><br><span class="line">			<span class="attribute">uwsgi_pass</span>  <span class="number">127.0.0.1:8000</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment"># æŒ‡å®šé™æ€æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">		<span class="attribute">location</span> /static/ &#123;</span><br><span class="line">			<span class="attribute">alias</span>  /home/mysite/static/;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="attribute">sendfile</span> <span class="literal">on</span>;</span><br><span class="line">	<span class="attribute">tcp_nopush</span> <span class="literal">on</span>;</span><br><span class="line">	<span class="attribute">tcp_nodelay</span> <span class="literal">on</span>;</span><br><span class="line">	<span class="attribute">keepalive_timeout</span> <span class="number">65</span>;</span><br><span class="line">	<span class="attribute">types_hash_max_size</span> <span class="number">2048</span>;</span><br><span class="line">	<span class="comment"># server_tokens off;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment"># server_names_hash_bucket_size 64;</span></span><br><span class="line">	<span class="comment"># server_name_in_redirect off;</span></span><br><span class="line"></span><br><span class="line">	<span class="attribute">include</span> /etc/nginx/mime.types;</span><br><span class="line">	<span class="attribute">default_type</span> application/octet-stream;</span><br><span class="line"></span><br><span class="line">	<span class="comment">##</span></span><br><span class="line">	<span class="comment"># SSL Settings</span></span><br><span class="line">	<span class="comment">##</span></span><br><span class="line"></span><br><span class="line">	<span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>; <span class="comment"># Dropping SSLv3, ref: POODLE</span></span><br><span class="line">	<span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">##</span></span><br><span class="line">	<span class="comment"># Logging Settings</span></span><br><span class="line">	<span class="comment">##</span></span><br><span class="line"></span><br><span class="line">	<span class="attribute">access_log</span> /var/log/nginx/access.log;</span><br><span class="line">	<span class="attribute">error_log</span> /var/log/nginx/error.log;</span><br><span class="line"></span><br><span class="line">	<span class="comment">##</span></span><br><span class="line">	<span class="comment"># Gzip Settings</span></span><br><span class="line">	<span class="comment">##</span></span><br><span class="line"></span><br><span class="line">	<span class="attribute">gzip</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment"># gzip_vary on;</span></span><br><span class="line">	<span class="comment"># gzip_proxied any;</span></span><br><span class="line">	<span class="comment"># gzip_comp_level 6;</span></span><br><span class="line">	<span class="comment"># gzip_buffers 16 8k;</span></span><br><span class="line">	<span class="comment"># gzip_http_version 1.1;</span></span><br><span class="line">	<span class="comment"># gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">##</span></span><br><span class="line">	<span class="comment"># Virtual Host Configs</span></span><br><span class="line">	<span class="comment">##</span></span><br><span class="line"></span><br><span class="line">	<span class="attribute">include</span> /etc/nginx/conf.d/<span class="regexp">*.conf</span>;</span><br><span class="line">	<span class="attribute">include</span> /etc/nginx/sites-enabled/*;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#mail &#123;</span></span><br><span class="line"><span class="comment">#	# See sample authentication script at:</span></span><br><span class="line"><span class="comment">#	# http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#	# auth_http localhost/auth.php;</span></span><br><span class="line"><span class="comment">#	# pop3_capabilities "TOP" "USER";</span></span><br><span class="line"><span class="comment">#	# imap_capabilities "IMAP4rev1" "UIDPLUS";</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#	server &#123;</span></span><br><span class="line"><span class="comment">#		listen     localhost:110;</span></span><br><span class="line"><span class="comment">#		protocol   pop3;</span></span><br><span class="line"><span class="comment">#		proxy      on;</span></span><br><span class="line"><span class="comment">#	&#125;</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#	server &#123;</span></span><br><span class="line"><span class="comment">#		listen     localhost:143;</span></span><br><span class="line"><span class="comment">#		protocol   imap;</span></span><br><span class="line"><span class="comment">#		proxy      on;</span></span><br><span class="line"><span class="comment">#	&#125;</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line">[uwsgi] </span><br><span class="line">chdir = /home/mysite</span><br><span class="line">module = mysite.wsgi:application</span><br><span class="line">socket = 127.0.0.1:8000</span><br><span class="line">master = true </span><br><span class="line">processes = 1</span><br><span class="line">threads = 2</span><br><span class="line">max-requests = 6000</span><br><span class="line">chmod-socket = 666</span><br><span class="line">buffer-size = 65535</span><br><span class="line">logto = /var/log/mysite.log</span><br><span class="line">async</span><br><span class="line">ugreen =''</span><br><span class="line">http-timeout = 300</span><br><span class="line"><span class="comment">#plugins=python</span></span><br></pre></td></tr></table></figure>
<h3 id="Activemq"><a href="#Activemq" class="headerlink" title="Activemq"></a>Activemq</h3><p>ActiveMQ æ˜¯ Apache å‡ºå“ï¼Œæœ€æµè¡Œçš„ï¼Œèƒ½åŠ›å¼ºåŠ²çš„å¼€æºæ¶ˆæ¯æ€»çº¿ã€‚ActiveMQ æ˜¯ä¸€ä¸ªå®Œå…¨æ”¯æŒ JMS1.1 å’Œ J2EE 1.4 è§„èŒƒçš„ JMS Provider å®ç°ã€‚</p>
<h4 id="queue"><a href="#queue" class="headerlink" title="queue"></a>queue</h4><p><img src="https://pic4.zhimg.com/80/v2-b7edcfa850af9627bed67ef9e89f8d3f_hd.jpg" alt=""></p>
<h4 id="topic"><a href="#topic" class="headerlink" title="topic"></a>topic</h4><p><img src="https://pic2.zhimg.com/80/v2-b1874d392a6119fb4e497425dcc58609_hd.jpg" alt=""></p>
]]></content>
      <categories>
        <category>å‘¨æŠ¥</category>
      </categories>
  </entry>
  <entry>
    <title>2020-1-10å‘¨æŠ¥-å•æ²™å˜‰</title>
    <url>/2020/01/07/2020-1-10%E5%91%A8%E6%8A%A5-%E5%8D%95%E6%B2%99%E5%98%89/</url>
    <content><![CDATA[<p>â€œAll you need is attentionâ€<br><a id="more"></a></p>
<h3 id="LSTM-Attention"><a href="#LSTM-Attention" class="headerlink" title="LSTM + Attention"></a>LSTM + Attention</h3><p>FEED-FORWARD NETWORKS WITH ATTENTION CAN SOLVE SOME LONG-TERM MEMORY PROBLEMS</p>
<h4 id="FEED-FORWARD-ATTENTION"><a href="#FEED-FORWARD-ATTENTION" class="headerlink" title="FEED-FORWARD ATTENTION"></a>FEED-FORWARD ATTENTION</h4><p><img src="https://www.guanacossj.com/media/articlebodypics/FEED-FORWARD-ATTENTION.jpg" alt=""></p>
<script type="math/tex; mode=display">e_{t} = a(h_{t})</script><script type="math/tex; mode=display">\alpha_{t} = \frac{exp(e_{t})}{\sum_{k=1}^{T}exp(e_{k})}</script><script type="math/tex; mode=display">c = \sum_{t=1}^{T}\alpha_{t}h_{t}</script><h4 id="Experiment"><a href="#Experiment" class="headerlink" title="Experiment"></a>Experiment</h4><p><img src="https://www.guanacossj.com/media/articlebodypics/all-lstmattention.png" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/test-lstmattention.png" alt=""></p>
<h3 id="Seq2Seq-Attention"><a href="#Seq2Seq-Attention" class="headerlink" title="Seq2Seq + Attention"></a>Seq2Seq + Attention</h3><p><img src="https://www.guanacossj.com/media/articlebodypics/all-seq2seqattention.png" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/test-seq2seqattention.png" alt=""></p>
<h3 id="DA-RNN"><a href="#DA-RNN" class="headerlink" title="DA-RNN"></a>DA-RNN</h3><p><img src="https://www.guanacossj.com/media/articlebodypics/nasdaq-gru.jpg" alt=""></p>
<h3 id="Transformer"><a href="#Transformer" class="headerlink" title="Transformer"></a>Transformer</h3><h4 id="Self-Attention"><a href="#Self-Attention" class="headerlink" title="Self-Attention"></a>Self-Attention</h4><p>é¡¾åæ€ä¹‰ï¼ŒæŒ‡çš„ä¸æ˜¯Targetå’ŒSourceä¹‹é—´çš„Attentionæœºåˆ¶ï¼Œè€Œæ˜¯Sourceå†…éƒ¨å…ƒç´ ä¹‹é—´æˆ–è€…Targetå†…éƒ¨å…ƒç´ ä¹‹é—´å‘ç”Ÿçš„Attentionæœºåˆ¶ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºTarget=Sourceè¿™ç§ç‰¹æ®Šæƒ…å†µä¸‹çš„æ³¨æ„åŠ›è®¡ç®—æœºåˆ¶</p>
<p>ç»™å‡ºä¿¡æ¯è¾“å…¥ï¼šç”¨X = [x1, Â· Â· Â· , xN ]è¡¨ç¤ºN ä¸ªè¾“å…¥ä¿¡æ¯ï¼›é€šè¿‡çº¿æ€§å˜æ¢å¾—åˆ°ä¸ºæŸ¥è¯¢å‘é‡åºåˆ—ï¼Œé”®å‘é‡åºåˆ—å’Œå€¼å‘é‡åºåˆ—ï¼Œå…¶ä¸­$W^{Q}$,$W^{K}$,$W^{V}$æ˜¯æˆ‘ä»¬æ¨¡å‹è®­ç»ƒè¿‡ç¨‹å­¦ä¹ åˆ°çš„åˆé€‚çš„å‚æ•°</p>
<script type="math/tex; mode=display">Q = W^{Q}X</script><script type="math/tex; mode=display">K = W^{K}X</script><script type="math/tex; mode=display">V = W^{V}X</script><script type="math/tex; mode=display">Attention(Q,K,V) = softmax(\begin{bmatrix}
v_{1}\\ 
v_{2}\\ 
...\\ 
v_{n}
\end{bmatrix}*[v^{T}_{1},v^{T}_{2},...,v^{T}_{n}])*\begin{bmatrix}
v_{1}\\ 
v_{2}\\ 
...\\ 
v_{n}
\end{bmatrix} = softmax(QK^{T})V</script><p><img src="https://pic2.zhimg.com/v2-07c4c02a9bdecb23d9664992f142eaa5_r.jpg" alt=""></p>
<p>Sourceä¸­çš„æ„æˆå…ƒç´ æƒ³è±¡æˆæ˜¯ç”±ä¸€ç³»åˆ—çš„<Key,Value>æ•°æ®å¯¹æ„æˆ<br>Targetä¸­çš„æŸä¸ªå…ƒç´ Query<br>(åœ¨Seq2Se2ä¸­ï¼ŒQæ˜¯Decoderçš„éšè—æ€ï¼ŒKå’ŒVéƒ½æ˜¯Encoderçš„éšè—æ€)</p>
<ul>
<li>1ã€æ ¹æ®Queryå’ŒKeyè®¡ç®—æƒé‡ç³»æ•°ï¼Œå¸¸ç”¨çš„ç›¸ä¼¼åº¦å‡½æ•°æœ‰ç‚¹ç§¯ï¼Œæ‹¼æ¥ï¼Œæ„ŸçŸ¥æœºç­‰</li>
<li>2ã€ä½¿ç”¨softmaxå‡½æ•°å¯¹è¿™äº›æƒé‡è¿›è¡Œå½’ä¸€åŒ–</li>
<li>3ã€æ ¹æ®æƒé‡ç³»æ•°å¯¹Valueè¿›è¡ŒåŠ æƒæ±‚å’Œå¾—åˆ°attention</li>
</ul>
<h4 id="Scaled-Dot-Product-Attention"><a href="#Scaled-Dot-Product-Attention" class="headerlink" title="Scaled Dot-Product Attention"></a>Scaled Dot-Product Attention</h4><p>é˜²æ­¢Qå’ŒKç‚¹ä¹˜ç§¯ç»“æœè¿‡å¤§ï¼Œä¼šé™¤ä»¥ä¸€ä¸ªå°ºåº¦æ ‡åº¦ </p>
<script type="math/tex; mode=display">Attention(Q,K,V) = sofrmax(\frac{QK^{T}}{\sqrt{d_{k}}})V</script><h4 id="Multi-Head-Attention"><a href="#Multi-Head-Attention" class="headerlink" title="Multi-Head Attention"></a>Multi-Head Attention</h4><ul>
<li>$Q$ï¼Œ$K$ï¼Œ$V$é¦–å…ˆè¿›è¿‡ä¸€ä¸ªçº¿æ€§å˜æ¢ï¼Œç„¶åè¾“å…¥åˆ°æ”¾ç¼©ç‚¹ç§¯attention</li>
<li>æ¯æ¬¡$Q$ï¼Œ$K$ï¼Œ$V$è¿›è¡Œçº¿æ€§å˜æ¢çš„å‚æ•°$W$æ˜¯ä¸ä¸€æ ·çš„</li>
<li>é€šè¿‡$h$ä¸ªä¸åŒçš„çº¿æ€§å˜æ¢å¯¹$Q$ï¼Œ$K$ï¼Œ$V$è¿›è¡ŒæŠ•å½±ï¼Œæœ€åå°†ä¸åŒçš„attentionç»“æœæ‹¼æ¥èµ·æ¥</li>
</ul>
<script type="math/tex; mode=display">Multihead(Q,K,V) = Concat(head_{1},...,head_{h})W^{O}</script><script type="math/tex; mode=display">head_{i} = Attention(QW^{Q}_{i},KW^{K}_{i},VW^{V}_{i})</script><h4 id="Experiment-1"><a href="#Experiment-1" class="headerlink" title="Experiment"></a>Experiment</h4><p><img src="https://www.guanacossj.com/media/articlebodypics/all-transformer.png" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/test-transformer.png" alt=""></p>
]]></content>
      <categories>
        <category>å‘¨æŠ¥</category>
      </categories>
  </entry>
  <entry>
    <title>è¯´è¯´LSTM</title>
    <url>/2019/12/29/%E8%AF%B4%E8%AF%B4LSTM/</url>
    <content><![CDATA[<p>Long Short Term Memory<br><a id="more"></a></p>
<h4 id="ä»RNNå¼€å§‹"><a href="#ä»RNNå¼€å§‹" class="headerlink" title="ä»RNNå¼€å§‹"></a>ä»RNNå¼€å§‹</h4><p>RNN(Recurrent Neural Network)æ˜¯ä¸€ç±»ç”¨äºå¤„ç†åºåˆ—æ•°æ®çš„ç¥ç»ç½‘ç»œï¼Œæ“…é•¿å¯¹åºåˆ—æ•°æ®è¿›è¡Œå»ºæ¨¡å¤„ç†ã€‚LSTM(Long Short-Term Memory) åœ¨ä¼ ç»Ÿçš„ RNN çš„åŸºç¡€ä¸Šå¢åŠ äº†çŠ¶æ€$c$ï¼Œç§°ä¸ºè®°å¿†å•å…ƒæ€ (cell state)ï¼Œç”¨ä»¥å–ä»£ä¼ ç»Ÿçš„éšå«ç¥ç»å…ƒèŠ‚ç‚¹ã€‚å®ƒè´Ÿè´£æŠŠè®°å¿†ä¿¡æ¯ä»åºåˆ—çš„åˆå§‹ä½ç½®ï¼Œä¼ é€’åˆ°åºåˆ—çš„æœ«ç«¯ã€‚</p>
<h4 id="LSTMçš„ç»„æˆ"><a href="#LSTMçš„ç»„æˆ" class="headerlink" title="LSTMçš„ç»„æˆ"></a>LSTMçš„ç»„æˆ</h4><p>åœ¨$t$æ—¶åˆ»ï¼Œå½“å‰ç¥ç»å…ƒçš„è¾“å…¥æœ‰ä¸‰ä¸ªï¼šå½“å‰æ—¶åˆ»è¾“å…¥å€¼$x_{t}$ã€å‰ä¸€æ—¶åˆ»è¾“å‡ºå€¼$s_{t-1}$,å’Œå‰ä¸€æ—¶åˆ»çš„è®°å¿†å•å…ƒçŠ¶æ€$c_{t-1}$, è¾“å‡ºæœ‰ä¸¤ä¸ªï¼Œå½“å‰æ—¶åˆ»LSTMçš„è¾“å‡ºå€¼$s_{t}$å’Œå½“å‰æ—¶åˆ»çš„è®°å¿†å•å…ƒçŠ¶æ€$c_{t}$ã€‚<br>LSTMé€šè¿‡ä¸‰ä¸ªé—¨æ§å¼€å…³ä¼ é€’è®°å¿†çŠ¶æ€ã€‚</p>
]]></content>
      <categories>
        <category>LSTM</category>
      </categories>
      <tags>
        <tag>lstm</tag>
        <tag>deeplearning</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcode78Pascal-Triangle-2-Java</title>
    <url>/2019/12/29/Leetcode78Pascal-Triangle-2-Java/</url>
    <content><![CDATA[<p>Java æ‰¾è§„å¾‹æ³•<br><a id="more"></a><br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">getRow</span><span class="params">(<span class="keyword">int</span> rowIndex)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; res = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">        <span class="keyword">long</span> k = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(rowIndex &gt;= <span class="number">0</span>)</span><br><span class="line">            res.add(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= rowIndex + <span class="number">1</span>; i++) &#123;</span><br><span class="line">            k = k * (rowIndex + <span class="number">2</span> - i) / (i-<span class="number">1</span>);</span><br><span class="line">            res.add((<span class="keyword">int</span>)k);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¿™é‡Œç”¨åˆ°äº†æ¨è¾‰ä¸‰è§’çš„è§„å¾‹ï¼Œç¬¬nè¡Œmä¸ªæ•°ç­‰äº</p>
<p>è­¬å¦‚ç¬¬ä¸‰è¡Œç¬¬äºŒä¸ªæ•°</p>
<script type="math/tex; mode=display">C_{3-1}^{2-1} = C_{2}^{1} = 2</script><p>è­¬å¦‚ç¬¬å››è¡Œç¬¬ä¸‰ä¸ªæ•°</p>
<script type="math/tex; mode=display">C_{4-1}^{3-1} = C_{3}^{2} = 3</script><p>é‚£è¿™ä¸ªå¯¹æˆ‘ä»¬çš„ç®—æ³•æœ‰å•¥å¸®åŠ©å‘¢ï¼Ÿ</p>
<p>ä¸¾ä¸ªæ —å­ï¼Œçœ‹ç¬¬å››è¡Œ</p>
<p>åº”è¯¥æ˜¯1 3 3 1</p>
<p>åœ¨æœ¬é¢˜ä¸­æ˜¯1 4 6 4 1</p>
<p>$C_{5-1}^{1-1} = C_{4}^{0} = 1$ï¼Œ$C_{5-1}^{2-1} = C_{4}^{1} = 4$ï¼Œ$C_{5-1}^{3-1} = C_{4}^{2} = 6$ï¼Œ$C_{5-1}^{4-1} = C_{4}^{3} = 4$ï¼Œ$C_{5-1}^{5-1} = C_{4}^{4} = 1$</p>
<p>æ‰¾è§„å¾‹å¦‚ä¸‹ï¼š</p>
<p>ç¬¬ä¸€ä¸ªæ•°ï¼š<script type="math/tex">C_{5-1}^{1-1} = C_{4}^{0} = 1</script></p>
<p>ç¬¬äºŒä¸ªæ•°ï¼š<script type="math/tex">C_{5-1}^{2-1} = C_{4}^{1} = C_{5-1}^{1-1} * \frac{(rowIndex-2+2)}{2-1}</script></p>
<p>ç¬¬nè¡Œmä¸ªæ•°ï¼šç¬¬m-1ä¸ªæ•° Ã— $ \frac{(rowIndex-m+2)}{m-1} $ï¼Œç¬¬nè¡Œç¬¬ä¸€ä¸ªæ•°æ°¸è¿œæ˜¯1</p>
<p>æ™šå®‰~~~</p>
]]></content>
      <categories>
        <category>Leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcode[78]Pascal&#39;s Triangle II</title>
    <url>/2019/12/28/Leetcode78Pascal-Triangle-2/</url>
    <content><![CDATA[<p>python3 æœ€ä¼˜é›…è§£æ³•<br><a id="more"></a><br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getRow</span><span class="params">(self, rowIndex)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type rowIndex: int</span></span><br><span class="line"><span class="string">        :rtype: List[int]</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        res = [<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, rowIndex + <span class="number">1</span>):</span><br><span class="line">            res.insert(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">            <span class="comment"># jå¾ªç¯æ¯æ¬¡ç®—å‡ºr[0]...r[j-1]ï¼Œå†åŠ ä¸Šæœ€åä¸€ä¸ªæ°¸è¿œå­˜åœ¨çš„1ï¼Œæ­£å¥½æ˜¯rowIndex+1ä¸ªæ•°</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(i):</span><br><span class="line">                res[j] = res[j] + res[j + <span class="number">1</span>]</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>Leetcode</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>2019-12-27å‘¨æŠ¥-å•æ²™å˜‰</title>
    <url>/2019/12/27/2019-12-27%E5%91%A8%E6%8A%A5-%E5%8D%95%E6%B2%99%E5%98%89/</url>
    <content><![CDATA[<p>RNN -&gt; LSTM -&gt; GRU -&gt; Seq2Seq -&gt; Attention -&gt; Transformer<br><a id="more"></a></p>
<h3 id="Encoder-Decoder-Seq2Seq"><a href="#Encoder-Decoder-Seq2Seq" class="headerlink" title="Encoder-Decoder(Seq2Seq)"></a>Encoder-Decoder(Seq2Seq)</h3><p><img src="https://pic4.zhimg.com/80/v2-77e8a977fc3d43bec8b05633dc52ff9f_hd.jpg" alt=""></p>
<ul>
<li>Encoder-Decoderç»“æ„å…ˆå°†è¾“å…¥æ•°æ®ç¼–ç æˆä¸€ä¸ªä¸Šä¸‹æ–‡å‘é‡$c$</li>
<li>æŠŠEncoderçš„æœ€åä¸€ä¸ªéšçŠ¶æ€èµ‹å€¼ç»™$c$,è¿˜å¯ä»¥å¯¹æœ€åçš„éšçŠ¶æ€åšä¸€ä¸ªå˜æ¢å¾—åˆ°$c$ï¼Œä¹Ÿå¯ä»¥å¯¹æ‰€æœ‰çš„éšçŠ¶æ€åšå˜æ¢</li>
<li>æ‹¿åˆ°cä¹‹åï¼Œå°±ç”¨å¦ä¸€ä¸ªRNNç½‘ç»œå¯¹å…¶è¿›è¡Œè§£ç (Decoder),å°†cå½“åšä¹‹å‰çš„åˆå§‹çŠ¶æ€$h_{0}$è¾“å…¥åˆ°Decoderä¸­</li>
<li>è¿˜æœ‰ä¸€ç§åšæ³•æ˜¯å°†$c$å½“åšæ¯ä¸€æ­¥çš„è¾“å…¥</li>
</ul>
<p><img src="https://pic4.zhimg.com/80/v2-e0fbb46d897400a384873fc100c442db_hd.jpg" alt=""></p>
<h3 id="Attention"><a href="#Attention" class="headerlink" title="Attention"></a>Attention</h3><ul>
<li>åœ¨Encoder-Decoderç»“æ„ä¸­ï¼ŒEncoderæŠŠæ‰€æœ‰çš„è¾“å…¥åºåˆ—éƒ½ç¼–ç æˆä¸€ä¸ªç»Ÿä¸€çš„è¯­ä¹‰ç‰¹å¾$c$å†è§£ç ï¼Œå› æ­¤ï¼Œ$c$ä¸­å¿…é¡»åŒ…å«åŸå§‹åºåˆ—ä¸­çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå®ƒçš„é•¿åº¦å°±æˆäº†é™åˆ¶æ¨¡å‹æ€§èƒ½çš„ç“¶é¢ˆ</li>
<li>Attentionæœºåˆ¶é€šè¿‡åœ¨æ¯ä¸ªæ—¶é—´è¾“å…¥ä¸åŒçš„$c$æ¥è§£å†³è¿™ä¸ªé—®é¢˜</li>
</ul>
<p><img src="https://www.guanacossj.com/media/articlebodypics/v2-8da16d429d33b0f2705e47af98e66579_hd_gaitubao_525x551_gaitubao_345x362.jpg" alt=""></p>
<ul>
<li>æ¯ä¸€ä¸ª$c$ä¼šè‡ªåŠ¨å»é€‰å–ä¸å½“å‰æ‰€è¦è¾“å‡ºçš„$y$æœ€åˆé€‚çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬ç”¨$\alpha_{ij}$è¡¡é‡Encoderä¸­ç¬¬$j$é˜¶æ®µçš„$h_{j}$å’Œè§£ç æ—¶ç¬¬$i$é˜¶æ®µçš„ç›¸å…³æ€§ï¼Œæœ€ç»ˆDecoderä¸­ç¬¬$i$é˜¶æ®µçš„è¾“å…¥çš„ä¸Šä¸‹æ–‡ä¿¡æ¯$c_{i}$å°±æ¥è‡ªäºæ‰€æœ‰$h_{j}$å¯¹$\alpha_{ij}$çš„åŠ æƒå’Œã€‚</li>
<li>$\alpha_{ij}$å’ŒDecoderçš„ç¬¬$i$é˜¶æ®µçš„éšè—çŠ¶æ€ã€Encoderç¬¬$j$ä¸ªé˜¶æ®µçš„éšè—çŠ¶æ€æœ‰å…³</li>
<li>åœ¨Encoderçš„è¿‡ç¨‹ä¸­ä¿ç•™æ¯ä¸ªRNNå•å…ƒçš„éšè—çŠ¶æ€(hidden state)å¾—åˆ°($h_{1}$â€¦$h_{N}$)ï¼Œå–$h_{j}$ï¼Œè¡¨ç¤ºEncoderå±‚çš„éšå±‚ç¬¬$j$æ—¶åˆ»çš„è¾“å‡º</li>
<li>åœ¨Decoderçš„è¿‡ç¨‹ä¸­æ ¹æ®$x_{i}$å’Œ$hâ€™_{i-1}$(è¿™é‡Œå’ŒEncoderçš„$h_{i}$åŒºåˆ†ä¸€ä¸‹)å¾—åˆ°$hâ€™_{i}$ï¼Œè®¾ä¸º$s_{i}$</li>
<li>æ³¨ï¼šæœ€å¼€å§‹çš„è®ºæ–‡åœ¨Encoder-Decoderé‡Œé¢çš„å½“å‰Decoderçš„attentionå¾—åˆ†ç”¨çš„æ˜¯$s_{i-1}$å’Œ$h_{j}$æ¥ç®—ï¼Œä½†æ–¯å¦ç¦æ•™æä¸Šå›¾ä¸Šç¡®å®æ˜¯ç”»çš„$s_{i}$å’Œ$h_{j}$æ¥ç®—ï¼Œè€Œä¸”åç»­è®ºæ–‡å¤§å¤šæ˜¯ç”¨çš„è¿™ç§æ–¹å¼ï¼Œå³å½“å‰æ­¥çš„attention scoreç”¨çš„å½“å‰æ­¥çš„éšè—çŠ¶æ€$s_{i}$å’Œå‰é¢çš„$h_{j}$å»ç®—çš„</li>
<li>é€šè¿‡Decoderçš„hidden statesåŠ ä¸ŠEncoderçš„hidden statesæ¥è®¡ç®—ä¸€ä¸ªåˆ†æ•°ï¼Œç”¨äºè®¡ç®—æƒé‡<script type="math/tex; mode=display">e_{ij} = score(s_{i},h_{j})</script></li>
<li>æ³¨ï¼šè¿™é‡Œæœ‰å¾ˆå¤šè®¡ç®—æ–¹å¼<script type="math/tex; mode=display">score(s_{i},h_{j}) = \left\{\begin{matrix}
s^{T}_{i}h_{j}\\ 
s^{T}_{i}W_{a}h_{j}\\ 
v^{T}_{a}tanh(W_{a}[s^{T}_{i};h_{j}])
\end{matrix}\right.</script></li>
<li>softmaxæƒé‡å½’ä¸€åŒ–<script type="math/tex; mode=display">\alpha_{ij} = \frac{exp(e_{ij})}{\sum_{k=1}^{T_{x}}exp(e_{ik})}</script></li>
<li>è®¡ç®—$c$<script type="math/tex; mode=display">c_{i} = \sum_{j=1}^{T_{x}}\alpha_{ij}h_{j}</script></li>
</ul>
<p><img src="https://pic4.zhimg.com/80/v2-8ddf993a95ee6e525fe2cd5ccd49bba7_hd.jpg" alt=""></p>
<p>(1)$h_{t} = RNN_{enc}(x_{t},h_{t-1})$, Encoderæ–¹é¢æ¥å—çš„æ˜¯æ¯ä¸€ä¸ªå•è¯word embeddingï¼Œå’Œä¸Šä¸€ä¸ªæ—¶é—´ç‚¹çš„hidden stateã€‚è¾“å‡ºçš„æ˜¯è¿™ä¸ªæ—¶é—´ç‚¹çš„hidden stateã€‚</p>
<p>(2)$s_{t} = RNN_{dnc}(y_{t},s_{t-1})$, Decoderæ–¹é¢æ¥å—çš„æ˜¯ç›®æ ‡å¥å­é‡Œå•è¯çš„word embeddingï¼Œå’Œä¸Šä¸€ä¸ªæ—¶é—´ç‚¹çš„hidden stateã€‚</p>
<p>(3)$c_{i} = \sum_{j=1}^{T_{x}}\alpha _{ij}h_{j}$, context vectoræ˜¯ä¸€ä¸ªå¯¹äºencoderè¾“å‡ºçš„hidden statesçš„ä¸€ä¸ªåŠ æƒå¹³å‡ã€‚</p>
<p>(4)$\alpha_{ij} = \frac{exp(e_{ij})}{\sum_{k=1}^{T_{x}}exp(e_{ik})}$, æ¯ä¸€ä¸ªencoderçš„hidden stateså¯¹åº”çš„æƒé‡ã€‚</p>
<p>(5)$e_{ij} = score(s_{i},h_{j})$, é€šè¿‡decoderçš„hidden statesåŠ ä¸Šencoderçš„hidden statesæ¥è®¡ç®—ä¸€ä¸ªåˆ†æ•°ï¼Œç”¨äºè®¡ç®—æƒé‡(4)</p>
<p>(6)$\hat{s}_{t}=tanh(W_{c}[c_{t};s_{t}])$, å°†context vector å’Œ decoderçš„hidden states ä¸²èµ·æ¥ã€‚</p>
<p>(7)$p(y_{t}|y_{&lt;t},x) = softmax(W_{s}\hat{s}_{t})$, è®¡ç®—æœ€åçš„è¾“å‡ºæ¦‚ç‡ã€‚</p>
<h3 id="Transformerâ€”-Attention-Is-All-You-Need"><a href="#Transformerâ€”-Attention-Is-All-You-Need" class="headerlink" title="Transformerâ€”-Attention Is All You Need"></a>Transformerâ€”-Attention Is All You Need</h3><p><img src="https://pic1.zhimg.com/80/v2-4b53b731a961ee467928619d14a5fd44_hd.jpg" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/v2-4b53b731a961ee467928619d14a5fd44_r.jpg" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/4155986-208004e73fb93c97.png" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/4155986-e7fd5fcf3acc00a3.png" alt=""></p>
<ul>
<li>Transformer çš„ Encoder ç”± 6 ä¸ªç¼–ç å™¨å åŠ ç»„æˆï¼ŒDecoder ä¹Ÿç”± 6 ä¸ªè§£ç å™¨ç»„æˆï¼Œåœ¨ç»“æ„ä¸Šéƒ½æ˜¯ç›¸åŒçš„ï¼Œä½†å®ƒä»¬ä¸å…±äº«æƒé‡ã€‚</li>
<li>Encoderçš„æ¯ä¸€å±‚æœ‰ä¸¤ä¸ªæ“ä½œï¼Œåˆ†åˆ«æ˜¯Self-Attentionå’ŒFeed Forwardï¼›</li>
<li>Decoderçš„æ¯ä¸€å±‚æœ‰ä¸‰ä¸ªæ“ä½œï¼Œåˆ†åˆ«æ˜¯Self-Attentionã€Encoder-Decoder Attentionä»¥åŠFeed Forwardæ“ä½œã€‚</li>
<li>è¿™é‡Œçš„Self-Attentionå’ŒEncoder-Decoder Attentionéƒ½æ˜¯ç”¨çš„æ˜¯Multi-Head Attentionæœºåˆ¶</li>
</ul>
<p><img src="https://www.guanacossj.com/media/articlebodypics/v2-df2ca1b7a60d829245b7b7c37f80a3aa_r.jpg" alt=""></p>
<h4 id="Self-Attention"><a href="#Self-Attention" class="headerlink" title="Self Attention"></a>Self Attention</h4><ul>
<li>RNNçš„å¾ªç¯ç‰¹æ€§å¯¼è‡´å…¶ä¸åˆ©äºå¹¶è¡Œè®¡ç®—ï¼Œæ¨¡å‹è®­ç»ƒæ—¶é—´è¾ƒé•¿</li>
<li>åœ¨ä¼ ç»Ÿçš„seq2seqä¸­ï¼Œæˆ‘ä»¬é€šè¿‡RNNè·å–hidden stateå»åšattentionï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬å®Œå…¨æŠ›å¼ƒRNNçš„æ—¶å€™ï¼Œæ€ä¹ˆå»åšattentionå‘¢ï¼Ÿ</li>
<li>å¯¹æ¯ä¸ªinputåšembeddingï¼Œä»£æ›¿hidden stateï¼Œembeddingé€šè¿‡ä¸‰ä¸ªä¸åŒçš„çº¿æ€§å±‚ç”Ÿæˆ$Q$ï¼Œ$K$ï¼Œ$V$ã€‚</li>
<li>Q: query;K: key; V: value</li>
<li>K = V = Q</li>
</ul>
<script type="math/tex; mode=display">Q = W_{Q}X</script><script type="math/tex; mode=display">K = W_{K}X</script><script type="math/tex; mode=display">V = W_{V}X</script><script type="math/tex; mode=display">Attention(Q,K,V) = softmax(\begin{bmatrix}
v_{1}\\ 
v_{2}\\ 
...\\ 
v_{n}
\end{bmatrix}*[v^{T}_{1},v^{T}_{2},...,v^{T}_{n}])*\begin{bmatrix}
v_{1}\\ 
v_{2}\\ 
...\\ 
v_{n}
\end{bmatrix} = softmax(QK^{T})V</script><p>ä¸¾ä¸ªæ —å­</p>
<p><img src="https://pic1.zhimg.com/80/v2-087b831f622f83e4529c1bbf646530f0_hd.jpg" alt=""></p>
<ul>
<li>å‡å¦‚æˆ‘ä»¬è¦ç¿»è¯‘ä¸€ä¸ªè¯ç»„Thinking Machinesï¼Œå…¶ä¸­Thinkingçš„è¾“å…¥çš„embedding vectorç”¨$x_{1}$è¡¨ç¤ºï¼ŒMachinesçš„embedding vectorç”¨$x_{2}$è¡¨ç¤º</li>
<li>$W^{Q}$ï¼Œ$W^{K}$ï¼Œ$W^{V}$æ˜¯æˆ‘ä»¬æ¨¡å‹è®­ç»ƒè¿‡ç¨‹å­¦ä¹ åˆ°çš„åˆé€‚çš„å‚æ•°</li>
<li>$x$ä¸$W^{Q}$ï¼Œ$W^{K}$ï¼Œ$W^{V}$ç›¸ä¹˜è·å¾—$q$ï¼Œ$k$ï¼Œ$v$</li>
<li>å¦‚ä¸Šå›¾ä¸­æ‰€ç¤ºæˆ‘ä»¬åˆ†åˆ«å¾—åˆ°äº†$q_{1}$ä¸$k_{1}$ï¼Œ$k_{2}$çš„ç‚¹ä¹˜ç§¯ï¼Œç„¶åæˆ‘ä»¬è¿›è¡Œå°ºåº¦ç¼©æ”¾ä¸softmaxå½’ä¸€åŒ–</li>
</ul>
<h4 id="Scaled-Dot-Product-Attention-ç¼©æ”¾äº†çš„ç‚¹ä¹˜æ³¨æ„åŠ›"><a href="#Scaled-Dot-Product-Attention-ç¼©æ”¾äº†çš„ç‚¹ä¹˜æ³¨æ„åŠ›" class="headerlink" title="Scaled Dot-Product Attention(ç¼©æ”¾äº†çš„ç‚¹ä¹˜æ³¨æ„åŠ›)"></a>Scaled Dot-Product Attention(ç¼©æ”¾äº†çš„ç‚¹ä¹˜æ³¨æ„åŠ›)</h4><script type="math/tex; mode=display">Attention(Q,K,V) = sofrmax(\frac{QK^{T}}{\sqrt{d_{k}}})V</script><ul>
<li>è¾“å…¥åŒ…å«$d_{k}$ç»´çš„queryå’Œkeyï¼Œä»¥åŠ$d_{v}$ç»´çš„valueã€‚é€šè¿‡è®¡ç®—queryå’Œå„ä¸ªkeyçš„ç‚¹ç§¯ï¼Œé™¤ä»¥$\sqrt{d_{k}}$å½’ä¸€åŒ–ï¼Œç„¶åç»è¿‡softmaxæ¿€æ´»å˜æˆæƒé‡ï¼Œæœ€åå†ä¹˜valueã€‚ç‚¹ç§¯æ³¨æ„åŠ›æœºåˆ¶çš„ä¼˜ç‚¹æ˜¯é€Ÿåº¦å¿«ã€å ç”¨ç©ºé—´å°ã€‚</li>
</ul>
<h4 id="Multi-Head-Attention"><a href="#Multi-Head-Attention" class="headerlink" title="Multi-Head Attention"></a>Multi-Head Attention</h4><ul>
<li>$Q$ï¼Œ$K$ï¼Œ$V$é¦–å…ˆè¿›è¿‡ä¸€ä¸ªçº¿æ€§å˜æ¢ï¼Œç„¶åè¾“å…¥åˆ°æ”¾ç¼©ç‚¹ç§¯attention</li>
<li>æ¯æ¬¡$Q$ï¼Œ$K$ï¼Œ$V$è¿›è¡Œçº¿æ€§å˜æ¢çš„å‚æ•°$W$æ˜¯ä¸ä¸€æ ·çš„</li>
<li>é€šè¿‡$h$ä¸ªä¸åŒçš„çº¿æ€§å˜æ¢å¯¹$Q$ï¼Œ$K$ï¼Œ$V$è¿›è¡ŒæŠ•å½±ï¼Œæœ€åå°†ä¸åŒçš„attentionç»“æœæ‹¼æ¥èµ·æ¥</li>
</ul>
<script type="math/tex; mode=display">Multihead(Q,K,V) = Concat(head_{1},...,head_{h})W^{O}</script><script type="math/tex; mode=display">head_{i} = Attention(QW^{Q}_{i},KW^{K}_{i},VW^{V}_{i})</script><h4 id="Position-wise-feed-forward-networks-ä½ç½®å…¨é“¾æ¥å‰é¦ˆç½‘ç»œ"><a href="#Position-wise-feed-forward-networks-ä½ç½®å…¨é“¾æ¥å‰é¦ˆç½‘ç»œ" class="headerlink" title="Position-wise feed-forward networks(ä½ç½®å…¨é“¾æ¥å‰é¦ˆç½‘ç»œ)"></a>Position-wise feed-forward networks(ä½ç½®å…¨é“¾æ¥å‰é¦ˆç½‘ç»œ)</h4><ul>
<li>ç”±ä¸¤ä¸ªçº¿æ€§å˜æ¢ï¼ˆWx+bï¼‰å’Œä¸€ä¸ªReLUï¼ˆreluçš„æ•°å­¦è¡¨è¾¾å¼å°±æ˜¯f(x)=max(0,x)ï¼‰<script type="math/tex; mode=display">FFN(x) = max(0,xW_{1} + b_{1})W_{2} + b_{2}</script></li>
</ul>
<h4 id="Positional-Encoding-ä½ç½®ç¼–ç "><a href="#Positional-Encoding-ä½ç½®ç¼–ç " class="headerlink" title="Positional Encoding(ä½ç½®ç¼–ç )"></a>Positional Encoding(ä½ç½®ç¼–ç )</h4><h3 id="Experiment"><a href="#Experiment" class="headerlink" title="Experiment"></a>Experiment</h3><figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line">1115<span class="string">-1120</span> after data smoothing</span><br><span class="line">T = 10</span><br><span class="line">features = 70</span><br><span class="line">train = all * 0.7</span><br><span class="line"><span class="keyword">test </span>= all * 0.3</span><br></pre></td></tr></table></figure>
<p><img src="https://www.guanacossj.com/media/articlebodypics/da-rnn-1115-1120-all.jpg" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/da-rnn-1115-1120-test-m.jpg" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/da-rnn-1115-1120-test.jpg" alt=""></p>
<figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Test </span>RMSE: 3.955</span><br><span class="line"><span class="keyword">Test </span>nRMSE: 0.289</span><br></pre></td></tr></table></figure>
<figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line">nasdaq100_padding</span><br><span class="line">T = 10</span><br><span class="line">features = 81</span><br><span class="line">train = all * 0.7</span><br><span class="line"><span class="keyword">test </span>= all * 0.3</span><br></pre></td></tr></table></figure>
<figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">Encoder:</span> LSTM</span><br><span class="line"><span class="symbol">Decoder:</span> LSTM</span><br></pre></td></tr></table></figure>
<p><img src="https://www.guanacossj.com/media/articlebodypics/nasdaq-lstm.jpg" alt=""><br><figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Test </span>RMSE: 0.579</span><br><span class="line"><span class="keyword">Test </span>nRMSE: 0.105</span><br></pre></td></tr></table></figure></p>
<figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">Encoder:</span> BiLSTM</span><br><span class="line"><span class="symbol">Decoder:</span> LSTM</span><br></pre></td></tr></table></figure>
<p><img src="https://www.guanacossj.com/media/articlebodypics/nasdaq-bi-lstm.jpg" alt=""><br><figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Test </span>RMSE: 0.384</span><br><span class="line"><span class="keyword">Test </span>nRMSE: 0.069</span><br></pre></td></tr></table></figure></p>
<figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">Encoder:</span> GRU</span><br><span class="line"><span class="symbol">Decoder:</span> LSTM</span><br></pre></td></tr></table></figure>
<p><img src="https://www.guanacossj.com/media/articlebodypics/nasdaq-gru.jpg" alt=""><br><figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Test </span>RMSE: 0.252</span><br><span class="line"><span class="keyword">Test </span>nRMSE: 0.046</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>å‘¨æŠ¥</category>
      </categories>
  </entry>
  <entry>
    <title>Leetcode38Count-and-Say</title>
    <url>/2019/12/24/Leetcode38Count-and-Say/</url>
    <content><![CDATA[<p>Nothing<br><a id="more"></a><br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">countAndSay</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"1"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        String str = countAndSay(n-<span class="number">1</span>) + <span class="string">"*"</span>;<span class="comment">// è¿™æ ·æœ«å°¾çš„æ•°æ‰èƒ½è¢«å¾ªç¯å¤„ç†åˆ°</span></span><br><span class="line">        <span class="keyword">char</span>[] str_c = str.toCharArray();</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">1</span>;</span><br><span class="line">        StringBuilder temp = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; str_c.length-<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(str_c[i] == str_c[i+<span class="number">1</span>])&#123;</span><br><span class="line">                count++;  <span class="comment">//é‡åˆ°ç›¸åŒçš„è®¡æ•°å™¨åŠ </span></span><br><span class="line">                i++;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                temp.append(Integer.toString(count)+ str_c[i]);</span><br><span class="line">                <span class="comment">// é‡åˆ°ä¸åŒçš„ï¼Œå…ˆappendè®¡æ•°å™¨çš„å€¼ï¼Œå†appendæœ€åä¸€ä¸ªç›¸åŒçš„å€¼</span></span><br><span class="line">                <span class="comment">// temp.append("" + count + str_c[i]);</span></span><br><span class="line">                count = <span class="number">1</span>;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> temp.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>Leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>Seq2seqæ¨¡å‹åŠæ³¨æ„åŠ›æœºåˆ¶æ¨¡å‹</title>
    <url>/2019/12/22/Seq2seq%E6%A8%A1%E5%9E%8B%E5%8F%8A%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E6%A8%A1%E5%9E%8B/</url>
    <content><![CDATA[<p>å¯¹äºå¤„ç†è¾“å‡ºåºåˆ—ä¸ºä¸å®šé•¿æƒ…å†µçš„é—®é¢˜ï¼Œä¾‹å¦‚æœºå™¨ç¿»è¯‘ï¼Œä¾‹å¦‚è‹±æ–‡åˆ°æ³•è¯­çš„å¥å­ç¿»è¯‘ï¼Œè¾“å…¥å’Œè¾“å‡ºå‡ä¸ºä¸å®šé•¿ã€‚å‰äººæå‡ºäº†seq2seqæ¨¡å‹ï¼Œbasic ideaæ˜¯è®¾è®¡ä¸€ä¸ªencoderä¸decoderï¼Œå…¶ä¸­encoderå°†è¾“å…¥åºåˆ—ç¼–ç ä¸ºä¸€ä¸ªåŒ…å«è¾“å…¥åºåˆ—æ‰€æœ‰ä¿¡æ¯çš„context vector $ c $ï¼Œdecoderé€šè¿‡å¯¹$ c $çš„è§£ç è·å¾—è¾“å…¥åºåˆ—çš„ä¿¡æ¯ï¼Œä»è€Œå¾—åˆ°è¾“å‡ºåºåˆ—ã€‚encoderåŠdecoderéƒ½é€šå¸¸ä¸ºRNNå¾ªç¯ç¥ç»ç½‘ç»œ<br><a id="more"></a></p>
<h4 id="LSTM"><a href="#LSTM" class="headerlink" title="LSTM"></a>LSTM</h4><ul>
<li>input: å½“å‰æ—¶åˆ»è¾“å…¥å€¼$x_{t}$,ä¸Šä¸€æ—¶åˆ»LSTMçš„è¾“å‡ºå€¼$h_{t-1}$,ä¸Šä¸€æ—¶åˆ»çš„å•å…ƒçŠ¶æ€$c_{t-1}$</li>
<li>output: å½“å‰æ—¶åˆ»LSTMçš„è¾“å‡ºå€¼$h_{t}$,å½“å‰æ—¶åˆ»çš„å•å…ƒçŠ¶$c_{t}$</li>
<li>forget gate:</li>
</ul>
<script type="math/tex; mode=display">f_{t} = \sigma (W_{f}[h_{t-1};x_{t}]+b_{f})</script><p>$W_{f}$æ˜¯é—å¿˜é—¨çš„æƒé‡çŸ©é˜µï¼Œ$[h_{t-1};x_{t}]$è¡¨ç¤ºæŠŠä¸¤ä¸ªå‘é‡è¿æ¥æˆä¸€ä¸ªæ›´é•¿çš„å‘é‡ï¼Œ$b_{f}$æ˜¯é—å¿˜é—¨çš„åç½®é¡¹ï¼Œ$\sigma$æ˜¯sigmoidå‡½æ•°<br>å¦‚æœè¾“å…¥çš„ç»´åº¦æ˜¯$d_{x}$ï¼Œéšè—å±‚çš„ç»´åº¦æ˜¯$d_{h}$ï¼Œå•å…ƒçŠ¶æ€çš„ç»´åº¦æ˜¯$d_{c}$ï¼ˆé€šå¸¸$d_{c} = d_{h}$ï¼‰ï¼Œåˆ™é—å¿˜é—¨çš„æƒé‡çŸ©é˜µ$W_{f}$çš„ç»´åº¦æ˜¯$d_{c}Ã—(d_{h}+d_{x})$</p>
<ul>
<li><p>input gate:</p>
<script type="math/tex; mode=display">i_{t} = \sigma (W_{i}[h_{t-1};x_{t}]+b_{i})</script></li>
<li><p>output gate:</p>
<script type="math/tex; mode=display">o_{t} = \sigma (W_{o}[h_{t-1};x_{t}]+b_{o})</script></li>
<li><p>final out:</p>
<script type="math/tex; mode=display">\tilde{c}_{t}= tanh(W_{c}[h_{t-1};x_{t}]+b_{c})</script><script type="math/tex; mode=display">c_{t} = f_{t} * c_{t-1} + i_{t} * \tilde{c}_{t}</script><script type="math/tex; mode=display">h_{t} = o_{t} * tanh(c_{t})</script></li>
<li><p>å‰å‘è®¡ç®—æ¯ä¸ªç¥ç»å…ƒçš„è¾“å‡ºå€¼ï¼Œå¯¹äºLSTMæ¥è¯´å°±æ˜¯$f_{t}$,$i_{t}$,$c_{t}$,$o_{t}$,$h_{t}$ 5ä¸ªå‘é‡çš„å€¼</p>
</li>
<li>åå‘è®¡ç®—æ¯ä¸ªç¥ç»å…ƒçš„è¯¯å·®é¡¹$\delta$ï¼ŒåŒ…æ‹¬ä¸¤ä¸ªæ–¹å‘ï¼Œä¸€æ˜¯æ²¿æ—¶é—´çš„åå‘ä¼ æ’­ï¼Œå³ä»å½“å‰tæ—¶åˆ»å¼€å§‹ï¼Œè®¡ç®—æ¯ä¸ªæ—¶åˆ»çš„è¯¯å·®é¡¹ï¼›å¦ä¸€ä¸ªæ˜¯å°†è¯¯å·®é¡¹å‘ä¸Šä¸€å±‚ä¼ æ’­</li>
<li>æ ¹æ®ç›¸åº”çš„è¯¯å·®é¡¹ï¼Œè®¡ç®—æ¯ä¸ªæƒé‡çš„æ¢¯åº¦</li>
<li>sigmoid</li>
</ul>
<script type="math/tex; mode=display">\delta (x) = \frac{1}{1+e^{-x}}</script><script type="math/tex; mode=display">\delta^{'} (x) = \frac{e^{-x}}{(1+e^{-x})^{2}}=\delta(x)(1-\delta(x))</script><ul>
<li>tanh</li>
</ul>
<script type="math/tex; mode=display">tanh(x) = \frac{e^{x}-e^{-x}}{e^{x}+e^{-x}}</script><script type="math/tex; mode=display">tanh^{'}(x) = 1 - tanh^{2}(x)</script><p>LSTMéœ€è¦å­¦ä¹ çš„å‚æ•°å…±æœ‰8ç»„ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li>é—å¿˜é—¨çš„æƒé‡çŸ©é˜µ$W_{f}$å’Œåç½®é¡¹$b_{f}$</li>
<li>è¾“å…¥é—¨çš„æƒé‡çŸ©é˜µ$W_{i}$å’Œåç½®é¡¹$b_{i}$</li>
<li>è¾“å‡ºé—¨çš„æƒé‡çŸ©é˜µ$W_{o}$å’Œåç½®é¡¹$b_{o}$</li>
<li>è®¡ç®—å•å…ƒçŠ¶æ€çš„æƒé‡çŸ©é˜µ$W_{c}$å’Œåç½®é¡¹$b_{c}$</li>
</ul>
<h4 id="seq2seqæ¨¡å‹"><a href="#seq2seqæ¨¡å‹" class="headerlink" title="seq2seqæ¨¡å‹"></a>seq2seqæ¨¡å‹</h4><h5 id="Encoder"><a href="#Encoder" class="headerlink" title="Encoder"></a>Encoder</h5><p>ç¼–ç å™¨çš„ä½œç”¨æ˜¯æŠŠä¸€ä¸ªä¸å®šé•¿çš„è¾“å…¥åºåˆ—$ x_{1},x_{2},â€¦,x_{T} $è½¬åŒ–æˆä¸€ä¸ªå®šé•¿çš„context vector $c$. è¯¥context vectorç¼–ç äº†è¾“å…¥åºåˆ—$ x_{1},x_{2},â€¦,x_{T} $çš„åºåˆ—ã€‚å›å¿†ä¸€ä¸‹å¾ªç¯ç¥ç»ç½‘ç»œï¼Œå‡è®¾è¯¥å¾ªç¯ç¥ç»ç½‘ç»œå•å…ƒä¸º$f$ï¼ˆå¯ä»¥ä¸ºvanilla RNN, LSTM, GRU)ï¼Œé‚£ä¹ˆhidden stateä¸º</p>
<script type="math/tex; mode=display">h_{t} = f(x_{t},h_{t-1})</script><p>ç¼–ç å™¨çš„context vectoræ˜¯æ‰€æœ‰æ—¶åˆ»hidden stateçš„å‡½æ•°ï¼Œå³ï¼š</p>
<script type="math/tex; mode=display">c=q(h_{1},...,h_{T})</script><p>ç®€å•åœ°ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæœ€ç»ˆæ—¶åˆ»çš„hidden state[å…¬å¼]ä½œä¸ºcontext vecterã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å–å„ä¸ªæ—¶åˆ»hidden statesçš„å¹³å‡ï¼Œä»¥åŠå…¶ä»–æ–¹æ³•ã€‚</p>
<h5 id="Decoder"><a href="#Decoder" class="headerlink" title="Decoder"></a>Decoder</h5><p>ç¼–ç å™¨æœ€ç»ˆè¾“å‡ºä¸€ä¸ªcontext vector $c$ï¼Œè¯¥context vectorç¼–ç äº†è¾“å…¥åºåˆ—$ x_{1},x_{2},â€¦,x_{T} $çš„ä¿¡æ¯ã€‚</p>
<p>å‡è®¾è®­ç»ƒæ•°æ®ä¸­çš„è¾“å‡ºåºåˆ—ä¸º$y_{1}y_{2},â€¦,y_{T}^{â€˜}$,æˆ‘ä»¬å¸Œæœ›æ¯ä¸ª$t$æ—¶åˆ»çš„è¾“å‡ºå³å–å†³äºä¹‹å‰çš„è¾“å‡ºä¹Ÿå–å†³äºcontext vectorï¼Œå³ä¼°è®¡$P(y_{tâ€™}|y_{1},â€¦,y_{tâ€™-1},c)$ï¼Œä»è€Œå¾—åˆ°è¾“å‡ºåºåˆ—çš„è”åˆæ¦‚ç‡åˆ†å¸ƒï¼š</p>
<script type="math/tex; mode=display">P(y_{1},...,y_{T'})=\prod_{t'-1}^{T'}P(y_{t'}|y_{1},...,y_{t'-1},c)</script><p>å¹¶å®šä¹‰è¯¥åºåˆ—çš„æŸå¤±å‡½æ•°loss function</p>
<script type="math/tex; mode=display">-\log P(y_{1},...,y_{T'})</script><p>é€šè¿‡æœ€å°åŒ–æŸå¤±å‡½æ•°æ¥è®­ç»ƒseq2seqæ¨¡å‹ã€‚</p>
<p>é‚£ä¹ˆå¦‚ä½•ä¼°è®¡$ P(y_{tâ€™}|y_{1},â€¦,y_{tâ€™-1},c) $ï¼Ÿ</p>
<p>æˆ‘ä»¬ä½¿ç”¨å¦ä¸€ä¸ªå¾ªç¯ç¥ç»ç½‘ç»œä½œä¸ºè§£ç å™¨ã€‚è§£ç å™¨ä½¿ç”¨å‡½æ•°$p$æ¥è¡¨ç¤º$tâ€™$æ—¶åˆ»è¾“å‡º$y_{tâ€™}$çš„æ¦‚ç‡</p>
<script type="math/tex; mode=display">P(y_{t'}|y_{1},...,y_{t'-1},c) = p(y_{t'-1},s_{t'},c)</script><p>ä¸ºäº†åŒºåˆ†ç¼–ç å™¨ä¸­çš„hidden state[å…¬å¼]ï¼Œå…¶ä¸­[å…¬å¼]ä¸º[å…¬å¼]æ—¶åˆ»è§£ç å™¨çš„hidden stateã€‚åŒºåˆ«äºç¼–ç å™¨ï¼Œè§£ç å™¨ä¸­çš„å¾ªç¯ç¥ç»ç½‘ç»œçš„è¾“å…¥é™¤äº†å‰ä¸€ä¸ªæ—¶åˆ»çš„è¾“å‡ºåºåˆ—[å…¬å¼]ï¼Œå’Œå‰ä¸€ä¸ªæ—¶åˆ»çš„hidden state[å…¬å¼]ä»¥å¤–ï¼Œè¿˜åŒ…å«äº†context vector[å…¬å¼]ã€‚å³ï¼š</p>
<script type="math/tex; mode=display">s_{t'} = g(y_{t'-1},s_{t'-1},c)</script><p>å…¶ä¸­å‡½æ•°gä¸ºè§£ç å™¨çš„å¾ªç¯ç¥ç»ç½‘ç»œå•å…ƒã€‚</p>
<h4 id="DA-RNN"><a href="#DA-RNN" class="headerlink" title="DA-RNN"></a>DA-RNN</h4><h5 id="ç¬¬ä¸€é˜¶æ®µï¼Œä½¿ç”¨æ³¨æ„åŠ›æœºåˆ¶è‡ªé€‚åº”åœ°æå–æ¯ä¸ªæ—¶åˆ»çš„ç›¸å…³feature"><a href="#ç¬¬ä¸€é˜¶æ®µï¼Œä½¿ç”¨æ³¨æ„åŠ›æœºåˆ¶è‡ªé€‚åº”åœ°æå–æ¯ä¸ªæ—¶åˆ»çš„ç›¸å…³feature" class="headerlink" title="ç¬¬ä¸€é˜¶æ®µï¼Œä½¿ç”¨æ³¨æ„åŠ›æœºåˆ¶è‡ªé€‚åº”åœ°æå–æ¯ä¸ªæ—¶åˆ»çš„ç›¸å…³feature"></a>ç¬¬ä¸€é˜¶æ®µï¼Œä½¿ç”¨æ³¨æ„åŠ›æœºåˆ¶è‡ªé€‚åº”åœ°æå–æ¯ä¸ªæ—¶åˆ»çš„ç›¸å…³feature</h5><script type="math/tex; mode=display">e_{t}^{k}=v_{e}^{T}tanh(W_{e}[h_{t-1};c_{t-1}]+U_{e}x^{k})</script><ul>
<li>ç”¨softmaxå‡½æ•°å°†å…¶å½’ä¸€åŒ–<script type="math/tex; mode=display">\alpha _{t}^{k}=\frac{exp(e_{t}^{k})}{\sum_{i-1}^{n}exp(e_{t}^{i})}</script></li>
<li>å¾—åˆ°æ›´æ–°åçš„x<script type="math/tex; mode=display">\tilde{x} = (\alpha _{t}^{1}x_{t}^{1}, \alpha _{t}^{2}x_{t}^{2},...,\alpha _{t}^{n}x_{t}^{n})</script></li>
</ul>
<p><img src="https://www.guanacossj.com/media/articlebodypics/lstm.jpg" alt=""></p>
<ul>
<li><p>é€‰å–LSTMä½œä¸ºç¼–ç å™¨<script type="math/tex">f_{1}</script></p>
<script type="math/tex; mode=display">h_{t} = f_{1}(h_{t-1},  \tilde{x})</script></li>
<li><p>Encoderæ–¹é¢æ¥å—çš„æ˜¯æ¯ä¸€ä¸ªè¾“å…¥ï¼Œå’Œä¸Šä¸€ä¸ªæ—¶é—´ç‚¹çš„éšè—æ€ã€‚è¾“å‡ºçš„æ˜¯å½“å‰æ—¶é—´ç‚¹çš„éšè—æ€</p>
</li>
</ul>
<h5 id="ç¬¬äºŒé˜¶æ®µï¼Œä½¿ç”¨å¦ä¸€ä¸ªæ³¨æ„åŠ›æœºåˆ¶é€‰å–ä¸ä¹‹ç›¸å…³çš„encoder-hidden-states"><a href="#ç¬¬äºŒé˜¶æ®µï¼Œä½¿ç”¨å¦ä¸€ä¸ªæ³¨æ„åŠ›æœºåˆ¶é€‰å–ä¸ä¹‹ç›¸å…³çš„encoder-hidden-states" class="headerlink" title="ç¬¬äºŒé˜¶æ®µï¼Œä½¿ç”¨å¦ä¸€ä¸ªæ³¨æ„åŠ›æœºåˆ¶é€‰å–ä¸ä¹‹ç›¸å…³çš„encoder hidden states"></a>ç¬¬äºŒé˜¶æ®µï¼Œä½¿ç”¨å¦ä¸€ä¸ªæ³¨æ„åŠ›æœºåˆ¶é€‰å–ä¸ä¹‹ç›¸å…³çš„encoder hidden states</h5><ul>
<li><p>Decoderæ–¹é¢æ¥å—çš„æ˜¯ç›®æ ‡è¾“å…¥ï¼Œå’Œä¸Šä¸€ä¸ªæ—¶é—´ç‚¹çš„éšè—æ€</p>
</li>
<li><p>å¯¹æ‰€æœ‰æ—¶åˆ»çš„$h_{tâ€™}$å–åŠ æƒå¹³å‡ï¼Œå³ï¼š</p>
</li>
</ul>
<script type="math/tex; mode=display">c_{t}^{'} = \sum_{t-1}^{T}\beta _{t^{'}}^{t}h_{t}</script><ul>
<li><script type="math/tex">\beta _{t^{'}}^{t}</script>çš„è®¾è®¡ç±»ä¼¼äºBahanauçš„å·¥ä½œï¼ŒåŸºäºå‰ä¸€ä¸ªæ—¶åˆ»è§£ç å™¨çš„hidden state $ d_{tâ€™-1} $å’Œcell state$s_{tâ€™-1}^{â€˜}$è®¡ç®—å¾—åˆ°ï¼š</li>
</ul>
<script type="math/tex; mode=display">l_{t}^{t}=v_{d}^{T}tanh(W_{d}[d_{t-1};s_{t-1}^{'}]+U_{d}h_{t})</script><script type="math/tex; mode=display">\beta _{t}^{i}=\frac{exp(l_{t}^{i})}{\sum_{j=1}^{T}exp(l_{t}^{j})}</script><script type="math/tex; mode=display">c_{t}=\sum_{i=1}^{T}\beta _{t}^{i}h_{i}</script><ul>
<li>è§£ç å™¨çš„è¾“å…¥æ˜¯ä¸Šä¸€ä¸ªæ—¶åˆ»çš„ç›®æ ‡åºåˆ—$y_{tâ€™-1}$å’Œhidden state$d_{tâ€™-1}$ä»¥åŠcontext vector $c_{tâ€™-1}$ï¼Œå³<script type="math/tex; mode=display">d_{t'}=f_{2}(y_{t'-1},c_{t'-1},d_{t'-1})</script></li>
<li>è¿™é‡Œè®¾è®¡äº†$\tilde{y}_{tâ€™-1}$æ¥combie$y_{tâ€™-1}$ä¸$c_{tâ€™-1}$çš„ä¿¡æ¯ï¼Œå³<script type="math/tex; mode=display">\tilde{y}_{t'-1} = \tilde{\omega }^{T}[y_{t'-1};c_{t'-1}]+\tilde{b}</script></li>
<li>ç„¶å<script type="math/tex; mode=display">d_{t}=f_{2}(d_{t-1},\tilde{y}_{t-1})</script></li>
</ul>
]]></content>
      <tags>
        <tag>seq2seq</tag>
        <tag>attention</tag>
      </tags>
  </entry>
  <entry>
    <title>da-rnn-bug-fix</title>
    <url>/2019/12/21/da-rnn-bug-fix/</url>
    <content><![CDATA[<p>Bugs fix for<br><a href="https://github.com/chandlerzuo/chandlerzuo.github.io/blob/master/codes/da_rnn/DA_RNN.py" target="_blank" rel="noopener" title="https://github.com/chandlerzuo/chandlerzuo.github.io/blob/master/codes/da_rnn/DA_RNN.py">https://github.com/chandlerzuo/chandlerzuo.github.io/blob/master/codes/da_rnn/DA_RNN.py</a><br><a id="more"></a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> unicode_literals, print_function, division</span><br><span class="line"><span class="keyword">from</span> io <span class="keyword">import</span> open</span><br><span class="line"><span class="keyword">import</span> unicodedata</span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> concatenate</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">from</span> torch.autograd <span class="keyword">import</span> Variable</span><br><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> optim</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line">filename = <span class="string">'nasdaq100_padding.csv'</span></span><br><span class="line">device = torch.device(<span class="string">"cuda"</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">"cpu"</span>)</span><br><span class="line"></span><br><span class="line">dataset = pd.read_csv(filename)</span><br><span class="line"><span class="comment"># print(dataset.values)</span></span><br><span class="line"></span><br><span class="line">features = dataset.values.shape[<span class="number">1</span>]</span><br><span class="line"><span class="comment"># 82</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EncoderAtt</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, input_size, hidden_size, T)</span>:</span></span><br><span class="line">        <span class="comment"># input size: number of underlying factors (81)</span></span><br><span class="line">        <span class="comment"># T: number of time steps (10)</span></span><br><span class="line">        <span class="comment"># hidden_size: dimension of the hidden state</span></span><br><span class="line">        super(EncoderAtt, self).__init__()</span><br><span class="line">        self.input_size = input_size</span><br><span class="line">        self.hidden_size = hidden_size</span><br><span class="line">        self.T = T</span><br><span class="line"></span><br><span class="line">        self.lstm_layer = nn.LSTM(input_size=input_size, hidden_size=hidden_size, num_layers=<span class="number">1</span>)</span><br><span class="line">        self.attn_linear = nn.Linear(in_features=<span class="number">2</span> * hidden_size + T - <span class="number">1</span>, out_features=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, input_data)</span>:</span></span><br><span class="line">        <span class="comment"># input_data: batch_size * T - 1 * input_size</span></span><br><span class="line">        input_weighted = Variable(input_data.data.new(input_data.size(<span class="number">0</span>), self.T - <span class="number">1</span>, self.input_size).zero_())</span><br><span class="line">        input_encoded = Variable(input_data.data.new(input_data.size(<span class="number">0</span>), self.T - <span class="number">1</span>, self.hidden_size).zero_())</span><br><span class="line">        <span class="comment"># hidden, cell: initial states with dimention hidden_size</span></span><br><span class="line">        hidden = self.init_hidden(input_data) <span class="comment"># 1 * batch_size * hidden_size</span></span><br><span class="line">        cell = self.init_hidden(input_data)</span><br><span class="line">        <span class="comment"># hidden.requires_grad = False</span></span><br><span class="line">        <span class="comment"># cell.requires_grad = False</span></span><br><span class="line">        <span class="keyword">for</span> t <span class="keyword">in</span> range(self.T - <span class="number">1</span>):</span><br><span class="line">            <span class="comment"># Eqn. 8: concatenate the hidden states with each predictor</span></span><br><span class="line">            x = torch.cat((hidden.repeat(self.input_size, <span class="number">1</span>, <span class="number">1</span>).permute(<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>),</span><br><span class="line">                           cell.repeat(self.input_size, <span class="number">1</span>, <span class="number">1</span>).permute(<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>),</span><br><span class="line">                           input_data.permute(<span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>)), dim = <span class="number">2</span>) <span class="comment"># batch_size * input_size * (2*hidden_size + T - 1)</span></span><br><span class="line">            <span class="comment"># Eqn. 9: Get attention weights</span></span><br><span class="line">            x = self.attn_linear(x.view(<span class="number">-1</span>, self.hidden_size * <span class="number">2</span> + self.T - <span class="number">1</span>)) <span class="comment"># (batch_size * input_size) * 1</span></span><br><span class="line">            attn_weights = F.softmax(x.view(<span class="number">-1</span>, self.input_size)) <span class="comment"># batch_size * input_size, attn weights with values sum up to 1.</span></span><br><span class="line">            <span class="comment"># Eqn. 10: LSTM</span></span><br><span class="line">            weighted_input = torch.mul(attn_weights, input_data[:, t, :]) <span class="comment"># batch_size * input_size</span></span><br><span class="line">            <span class="comment"># Fix the warning about non-contiguous memory</span></span><br><span class="line">            <span class="comment"># see https://discuss.pytorch.org/t/dataparallel-issue-with-flatten-parameter/8282</span></span><br><span class="line">            self.lstm_layer.flatten_parameters()</span><br><span class="line">            _, lstm_states = self.lstm_layer(weighted_input.unsqueeze(<span class="number">0</span>), (hidden, cell))</span><br><span class="line">            hidden = lstm_states[<span class="number">0</span>]</span><br><span class="line">            cell = lstm_states[<span class="number">1</span>]</span><br><span class="line">            <span class="comment"># Save output</span></span><br><span class="line">            input_weighted[:, t, :] = weighted_input</span><br><span class="line">            input_encoded[:, t, :] = hidden</span><br><span class="line">        <span class="keyword">return</span> input_weighted, input_encoded</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">init_hidden</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="comment"># No matter whether CUDA is used, the returned variable will have the same type as x.</span></span><br><span class="line">        <span class="keyword">return</span> Variable(x.data.new(<span class="number">1</span>, x.size(<span class="number">0</span>), self.hidden_size).zero_()) <span class="comment"># dimension 0 is the batch dimension</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DecoderAtt</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, encoder_hidden_size, decoder_hidden_size, T)</span>:</span></span><br><span class="line">        super(DecoderAtt, self).__init__()</span><br><span class="line"></span><br><span class="line">        self.T = T</span><br><span class="line">        self.encoder_hidden_size = encoder_hidden_size</span><br><span class="line">        self.decoder_hidden_size = decoder_hidden_size</span><br><span class="line"></span><br><span class="line">        self.attn_layer = nn.Sequential(nn.Linear(<span class="number">2</span> * decoder_hidden_size + encoder_hidden_size, encoder_hidden_size),</span><br><span class="line">                                        nn.Tanh(), nn.Linear(encoder_hidden_size, <span class="number">1</span>))</span><br><span class="line">        self.lstm_layer = nn.LSTM(input_size=<span class="number">1</span>, hidden_size=decoder_hidden_size)</span><br><span class="line">        self.fc = nn.Linear(encoder_hidden_size + <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        self.fc_final = nn.Linear(decoder_hidden_size + encoder_hidden_size, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        self.fc.weight.data.normal_()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, input_encoded, y_history)</span>:</span></span><br><span class="line">        <span class="comment"># input_encoded: batch_size * T - 1 * encoder_hidden_size</span></span><br><span class="line">        <span class="comment"># y_history: batch_size * (T-1)</span></span><br><span class="line">        <span class="comment"># Initialize hidden and cell, 1 * batch_size * decoder_hidden_size</span></span><br><span class="line">        hidden = self.init_hidden(input_encoded)</span><br><span class="line">        cell = self.init_hidden(input_encoded)</span><br><span class="line">        <span class="comment"># hidden.requires_grad = False</span></span><br><span class="line">        <span class="comment"># cell.requires_grad = False</span></span><br><span class="line">        <span class="keyword">for</span> t <span class="keyword">in</span> range(self.T - <span class="number">1</span>):</span><br><span class="line">            <span class="comment"># Eqn. 12-13: compute attention weights</span></span><br><span class="line">            <span class="comment">## batch_size * T * (2*decoder_hidden_size + encoder_hidden_size)</span></span><br><span class="line">            x = torch.cat((hidden.repeat(self.T - <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>).permute(<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>),</span><br><span class="line">                           cell.repeat(self.T - <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>).permute(<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>), input_encoded), dim=<span class="number">2</span>)</span><br><span class="line">            x = F.softmax(self.attn_layer(x.view(<span class="number">-1</span>, <span class="number">2</span> * self.decoder_hidden_size + self.encoder_hidden_size</span><br><span class="line">                                                 )).view(<span class="number">-1</span>, self.T - <span class="number">1</span>))  <span class="comment"># batch_size * T - 1, row sum up to 1</span></span><br><span class="line">            <span class="comment"># Eqn. 14: compute context vector</span></span><br><span class="line">            context = torch.bmm(x.unsqueeze(<span class="number">1</span>), input_encoded)[:, <span class="number">0</span>, :]  <span class="comment"># batch_size * encoder_hidden_size</span></span><br><span class="line">            <span class="keyword">if</span> t &lt; self.T - <span class="number">1</span>:</span><br><span class="line">                <span class="comment"># Eqn. 15</span></span><br><span class="line">                y_tilde = self.fc(torch.cat((context, y_history[:, t].unsqueeze(<span class="number">1</span>)), dim=<span class="number">1</span>))  <span class="comment"># batch_size * 1</span></span><br><span class="line">                <span class="comment"># Eqn. 16: LSTM</span></span><br><span class="line">                self.lstm_layer.flatten_parameters()</span><br><span class="line">                _, lstm_output = self.lstm_layer(y_tilde.unsqueeze(<span class="number">0</span>), (hidden, cell))</span><br><span class="line">                hidden = lstm_output[<span class="number">0</span>]  <span class="comment"># 1 * batch_size * decoder_hidden_size</span></span><br><span class="line">                cell = lstm_output[<span class="number">1</span>]  <span class="comment"># 1 * batch_size * decoder_hidden_size</span></span><br><span class="line">        <span class="comment"># Eqn. 22: final output</span></span><br><span class="line">        y_pred = self.fc_final(torch.cat((hidden[<span class="number">0</span>], context), dim=<span class="number">1</span>))</span><br><span class="line">        <span class="comment"># self.logger.info("hidden %s context %s y_pred: %s", hidden[0][0][:10], context[0][:10], y_pred[:10])</span></span><br><span class="line">        <span class="keyword">return</span> y_pred</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">init_hidden</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> Variable(x.data.new(<span class="number">1</span>, x.size(<span class="number">0</span>), self.decoder_hidden_size).zero_())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">preprocess_data</span><span class="params">(dat, col_names)</span>:</span></span><br><span class="line">    scale = StandardScaler().fit(dat)</span><br><span class="line">    proc_dat = scale.transform(dat)</span><br><span class="line"></span><br><span class="line">    mask = np.ones(proc_dat.shape[<span class="number">1</span>], dtype=bool)</span><br><span class="line">    dat_cols = list(dat.columns)</span><br><span class="line">    <span class="keyword">for</span> col_name <span class="keyword">in</span> col_names:</span><br><span class="line">        mask[dat_cols.index(col_name)] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    feats = proc_dat[:, mask]</span><br><span class="line">    targs = proc_dat[:, ~mask]</span><br><span class="line">    <span class="keyword">return</span> feats, targs, scale</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Train the model</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">da_rnn</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, file_data, encoder_hidden_size=<span class="number">64</span>, decoder_hidden_size=<span class="number">64</span>, T=<span class="number">10</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">                 learning_rate=<span class="number">0.01</span>, batch_size=<span class="number">128</span>, parallel=True, debug=False)</span>:</span></span><br><span class="line">        self.T = T</span><br><span class="line">        dat = pd.read_csv(file_data, nrows=<span class="number">100</span> <span class="keyword">if</span> debug <span class="keyword">else</span> <span class="literal">None</span>)</span><br><span class="line">        <span class="comment"># read first 100 rows</span></span><br><span class="line">        <span class="comment"># self.logger.info("Shape of data: %s.\nMissing in data: %s.", dat.shape, dat.isnull().sum().sum())</span></span><br><span class="line">        <span class="comment"># scale = StandardScaler().fit(dat.values)</span></span><br><span class="line">        <span class="comment"># dat = pd.DataFrame(scale.transform(dat.values))</span></span><br><span class="line">        <span class="comment"># self.X = dat.loc[:, [x for x in dat.columns.tolist() if x != 'NDX']].as_matrix()</span></span><br><span class="line">        self.X, self.y, self.scaler = preprocess_data(dat, (<span class="string">"NDX"</span>,))</span><br><span class="line">        <span class="comment"># select matrix without NDX</span></span><br><span class="line">        <span class="comment"># (ndarray:(40560,81))</span></span><br><span class="line">        self.y = (self.y).reshape((self.y).shape[<span class="number">0</span>],)</span><br><span class="line">        <span class="comment"># self.y = np.array(dat.NDX)</span></span><br><span class="line">        <span class="comment"># (ndarray:(40560,))</span></span><br><span class="line">        self.batch_size = batch_size</span><br><span class="line">        <span class="comment"># 128</span></span><br><span class="line">        self.encoder = EncoderAtt(input_size=self.X.shape[<span class="number">1</span>], hidden_size=encoder_hidden_size, T=T).to(device)</span><br><span class="line">        self.decoder = DecoderAtt(encoder_hidden_size=encoder_hidden_size, decoder_hidden_size=decoder_hidden_size, T=T).to(device)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> parallel:</span><br><span class="line">            self.encoder = nn.DataParallel(self.encoder)</span><br><span class="line">            self.decoder = nn.DataParallel(self.decoder)</span><br><span class="line">        <span class="comment">#  multiple GPU training</span></span><br><span class="line"></span><br><span class="line">        self.encoder_optimizer = optim.Adam(params=filter(<span class="keyword">lambda</span> p: p.requires_grad, self.encoder.parameters()),</span><br><span class="line">                                           lr=learning_rate)</span><br><span class="line">        self.decoder_optimizer = optim.Adam(params=filter(<span class="keyword">lambda</span> p: p.requires_grad, self.decoder.parameters()),</span><br><span class="line">                                           lr=learning_rate)</span><br><span class="line">        <span class="comment"># self.learning_rate = learning_rate</span></span><br><span class="line"></span><br><span class="line">        self.train_size = int(self.X.shape[<span class="number">0</span>] * <span class="number">0.7</span>)</span><br><span class="line">        <span class="comment"># &#123;int&#125; 28392</span></span><br><span class="line">        <span class="comment"># self.y = self.y - np.mean(self.y[:self.train_size])</span></span><br><span class="line">        <span class="comment"># self.y = (self.y - np.mean(self.y[:self.train_size])) / np.std(self.y[:self.train_size])</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Question: why Adam requires data to be normalized?</span></span><br><span class="line">        <span class="comment"># self.logger.info("Training size: %d.", self.train_size)</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">train</span><span class="params">(self, n_epochs=<span class="number">10</span>)</span>:</span></span><br><span class="line">        iter_per_epoch = int(np.ceil(self.train_size * <span class="number">1.</span> / self.batch_size))</span><br><span class="line">        print(<span class="string">"Iterations per epoch: %3.3f ~ %d."</span>, self.train_size * <span class="number">1.</span> / self.batch_size, iter_per_epoch)</span><br><span class="line">        self.iter_losses = np.zeros(n_epochs * iter_per_epoch)</span><br><span class="line">        self.epoch_losses = np.zeros(n_epochs)</span><br><span class="line"></span><br><span class="line">        self.loss_func = nn.MSELoss()</span><br><span class="line"></span><br><span class="line">        n_iter = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        learning_rate = <span class="number">1.</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n_epochs):</span><br><span class="line">            perm_idx = np.random.permutation(self.train_size - self.T)</span><br><span class="line">            j = <span class="number">0</span></span><br><span class="line">            <span class="keyword">while</span> j &lt; self.train_size:</span><br><span class="line">                batch_idx = perm_idx[j:(j + self.batch_size)]</span><br><span class="line">                X = np.zeros((len(batch_idx), self.T - <span class="number">1</span>, self.X.shape[<span class="number">1</span>]))</span><br><span class="line">                y_history = np.zeros((len(batch_idx), self.T - <span class="number">1</span>))</span><br><span class="line">                y_target = self.y[batch_idx + self.T]</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span> k <span class="keyword">in</span> range(len(batch_idx)):</span><br><span class="line">                    X[k, :, :] = self.X[batch_idx[k] : (batch_idx[k] + self.T - <span class="number">1</span>), :]</span><br><span class="line">                    y_history[k, :] = self.y[batch_idx[k]: (batch_idx[k] + self.T - <span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line">                loss = self.train_iteration(X, y_history, y_target)</span><br><span class="line">                self.iter_losses[int(i * iter_per_epoch + j / self.batch_size)] = loss</span><br><span class="line">                <span class="comment">#if (j / self.batch_size) % 50 == 0:</span></span><br><span class="line">                <span class="comment">#    self.logger.info("Epoch %d, Batch %d: loss = %3.3f.", i, j / self.batch_size, loss)</span></span><br><span class="line">                j += self.batch_size</span><br><span class="line">                n_iter += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> n_iter % <span class="number">10000</span> == <span class="number">0</span> <span class="keyword">and</span> n_iter &gt; <span class="number">0</span>:</span><br><span class="line">                    <span class="keyword">for</span> param_group <span class="keyword">in</span> self.encoder_optimizer.param_groups:</span><br><span class="line">                        param_group[<span class="string">'lr'</span>] = param_group[<span class="string">'lr'</span>] * <span class="number">0.9</span></span><br><span class="line">                    <span class="keyword">for</span> param_group <span class="keyword">in</span> self.decoder_optimizer.param_groups:</span><br><span class="line">                        param_group[<span class="string">'lr'</span>] = param_group[<span class="string">'lr'</span>] * <span class="number">0.9</span></span><br><span class="line"></span><br><span class="line">            self.epoch_losses[i] = np.mean(self.iter_losses[range(i * iter_per_epoch, (i + <span class="number">1</span>) * iter_per_epoch)])</span><br><span class="line">            <span class="keyword">if</span> i % <span class="number">10</span> == <span class="number">0</span>:</span><br><span class="line">                print(<span class="string">"Epoch %d, loss: %3.3f."</span> % (i, self.epoch_losses[i]))</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> i % <span class="number">10</span> == <span class="number">0</span>:</span><br><span class="line">                y_train_pred = self.predict(on_train=<span class="literal">True</span>)  <span class="comment"># 28383</span></span><br><span class="line">                y_test_pred = self.predict(on_train=<span class="literal">False</span>)  <span class="comment"># 12168</span></span><br><span class="line">                y_pred = np.concatenate((y_train_pred, y_test_pred))    <span class="comment"># 40551</span></span><br><span class="line">                <span class="comment"># X (40560,)</span></span><br><span class="line">                <span class="comment"># y (40560,)</span></span><br><span class="line">                print(y_train_pred.shape, y_test_pred.shape, y_pred.shape)</span><br><span class="line">                print((self.y).shape,(self.X).shape)</span><br><span class="line">                <span class="comment"># (40560,) (40560, 81)</span></span><br><span class="line">                true = concatenate(((self.y).reshape(self.y.shape[<span class="number">0</span>], <span class="number">1</span>), self.X), axis=<span class="number">1</span>)</span><br><span class="line">                true = self.scaler.inverse_transform(true)</span><br><span class="line">                self.y = true[:, <span class="number">0</span>]</span><br><span class="line">                <span class="comment"># true [1,40560] len = 40560</span></span><br><span class="line">                print(self.T, len(y_train_pred) + self.T)</span><br><span class="line">                <span class="comment"># 10 28393</span></span><br><span class="line">                print(self.T + len(y_train_pred), len(self.y) + <span class="number">1</span>)</span><br><span class="line">                <span class="comment"># 28393 40561</span></span><br><span class="line">                <span class="comment"># y_train_pred = concatenate((y_train_pred.reshape(y_train_pred.shape[0], 1), self.X[self.T-1: len(y_train_pred) + self.T-1]), axis=1)</span></span><br><span class="line">                y_train_pred = concatenate((y_train_pred.reshape(y_train_pred.shape[<span class="number">0</span>], <span class="number">1</span>),</span><br><span class="line">                                            self.X[: len(y_train_pred)]), axis=<span class="number">1</span>)</span><br><span class="line">                y_train_pred = self.scaler.inverse_transform(y_train_pred)</span><br><span class="line">                y_train_pred = y_train_pred[:, <span class="number">0</span>]</span><br><span class="line">                <span class="comment"># y_train_pred [10,28392] len = 28383</span></span><br><span class="line">                <span class="comment"># y_test_pred = concatenate((y_test_pred.reshape(y_test_pred.shape[0], 1), self.X[self.T + len(y_train_pred)-1:]), axis=1)</span></span><br><span class="line">                y_test_pred = concatenate(</span><br><span class="line">                    (y_test_pred.reshape(y_test_pred.shape[<span class="number">0</span>], <span class="number">1</span>), self.X[len(y_train_pred):len(y_train_pred)+len(y_test_pred)]), axis=<span class="number">1</span>)</span><br><span class="line">                y_test_pred = self.scaler.inverse_transform(y_test_pred)</span><br><span class="line">                y_test_pred = y_test_pred[:, <span class="number">0</span>]</span><br><span class="line">                <span class="comment"># y_test_pred [28393,40560] len = 12168</span></span><br><span class="line">                plt.figure()</span><br><span class="line">                plt.plot(range(<span class="number">1</span>, <span class="number">1</span> + len(self.y)), self.y, label=<span class="string">"True"</span>)</span><br><span class="line">                plt.plot(range(self.T, len(y_train_pred) + self.T), y_train_pred, label = <span class="string">'Predicted - Train'</span>)</span><br><span class="line">                plt.plot(range(self.T + len(y_train_pred), len(self.y) + <span class="number">1</span>), y_test_pred, label = <span class="string">'Predicted - Test'</span>)</span><br><span class="line">                plt.legend(loc=<span class="string">'upper left'</span>)</span><br><span class="line">                plt.savefig(<span class="string">'./resultpic/epoch_%d.jpg'</span> % i)</span><br><span class="line">                plt.show()</span><br><span class="line"></span><br><span class="line">        y_train_pred = self.predict(on_train=<span class="literal">True</span>)</span><br><span class="line">        y_test_pred = self.predict(on_train=<span class="literal">False</span>)</span><br><span class="line">        y_pred = np.concatenate((y_train_pred, y_test_pred))</span><br><span class="line">        plt.figure()</span><br><span class="line">        plt.plot(range(<span class="number">1</span>, <span class="number">1</span> + len(self.y)), self.y, label=<span class="string">"True"</span>)</span><br><span class="line">        plt.plot(range(self.T, len(y_train_pred) + self.T), y_train_pred, label=<span class="string">'Predicted - Train'</span>)</span><br><span class="line">        plt.plot(range(self.T + len(y_train_pred), len(self.y) + <span class="number">1</span>), y_test_pred, label=<span class="string">'Predicted - Test'</span>)</span><br><span class="line">        plt.legend(loc=<span class="string">'upper left'</span>)</span><br><span class="line">        plt.savefig(<span class="string">'./resultpic/final.jpg'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">train_iteration</span><span class="params">(self, X, y_history, y_target)</span>:</span></span><br><span class="line">        self.encoder_optimizer.zero_grad()</span><br><span class="line">        self.decoder_optimizer.zero_grad()</span><br><span class="line"></span><br><span class="line">        input_weighted, input_encoded = self.encoder(Variable(torch.from_numpy(X).type(torch.FloatTensor).to(device)))</span><br><span class="line">        y_pred = self.decoder(input_encoded, Variable(torch.from_numpy(y_history).type(torch.FloatTensor).to(device)))</span><br><span class="line">        y_pred = y_pred.view(<span class="number">-1</span>)</span><br><span class="line">        <span class="comment"># print('y_pred', y_pred.shape)</span></span><br><span class="line">        y_true = Variable(torch.from_numpy(y_target).type(torch.FloatTensor).to(device))</span><br><span class="line">        <span class="comment"># print('y_true', y_true.shape)</span></span><br><span class="line">        loss = self.loss_func(y_pred, y_true)</span><br><span class="line">        loss.backward()</span><br><span class="line"></span><br><span class="line">        self.encoder_optimizer.step()</span><br><span class="line">        self.decoder_optimizer.step()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> loss.item()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">predict</span><span class="params">(self, on_train = False)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> on_train:</span><br><span class="line">            y_pred = np.zeros(self.train_size - self.T + <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            y_pred = np.zeros(self.X.shape[<span class="number">0</span>] - self.train_size)</span><br><span class="line"></span><br><span class="line">        i = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; len(y_pred):</span><br><span class="line">            batch_idx = np.array(range(len(y_pred)))[i : (i + self.batch_size)]</span><br><span class="line">            X = np.zeros((len(batch_idx), self.T - <span class="number">1</span>, self.X.shape[<span class="number">1</span>]))</span><br><span class="line">            y_history = np.zeros((len(batch_idx), self.T - <span class="number">1</span>))</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(len(batch_idx)):</span><br><span class="line">                <span class="keyword">if</span> on_train:</span><br><span class="line">                    X[j, :, :] = self.X[range(batch_idx[j], batch_idx[j] + self.T - <span class="number">1</span>), :]</span><br><span class="line">                    y_history[j, :] = self.y[range(batch_idx[j],  batch_idx[j]+ self.T - <span class="number">1</span>)]</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    X[j, :, :] = self.X[range(batch_idx[j] + self.train_size - self.T, batch_idx[j] + self.train_size - <span class="number">1</span>), :]</span><br><span class="line">                    y_history[j, :] = self.y[range(batch_idx[j] + self.train_size - self.T,  batch_idx[j]+ self.train_size - <span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line">            y_history = Variable(torch.from_numpy(y_history).type(torch.FloatTensor).to(device))</span><br><span class="line">            _, input_encoded = self.encoder(Variable(torch.from_numpy(X).type(torch.FloatTensor).to(device)))</span><br><span class="line">            y_pred[i:(i + self.batch_size)] = self.decoder(input_encoded, y_history).cpu().data.numpy()[:, <span class="number">0</span>]</span><br><span class="line">            i += self.batch_size</span><br><span class="line">        <span class="keyword">return</span> y_pred</span><br><span class="line"></span><br><span class="line">io_dir = <span class="string">'nasdaq100_padding.csv'</span></span><br><span class="line"></span><br><span class="line">model = da_rnn(file_data=<span class="string">'&#123;&#125;'</span>.format(io_dir), parallel=<span class="literal">False</span>, learning_rate=<span class="number">.001</span>)</span><br><span class="line"></span><br><span class="line">model.train(n_epochs=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">y_pred = model.predict()</span><br><span class="line"></span><br><span class="line">plt.figure()</span><br><span class="line">plt.semilogy(range(len(model.iter_losses)), model.iter_losses)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">plt.figure()</span><br><span class="line">plt.semilogy(range(len(model.epoch_losses)), model.epoch_losses)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">plt.figure()</span><br><span class="line">plt.plot(y_pred, label = <span class="string">'Predicted'</span>)</span><br><span class="line">plt.plot(model.y[model.train_size:], label = <span class="string">"True"</span>)</span><br><span class="line">plt.legend(loc = <span class="string">'upper left'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
]]></content>
  </entry>
  <entry>
    <title>Learn-Pytorch-Variable</title>
    <url>/2019/12/10/Learn-Pytorch-Variable/</url>
    <content><![CDATA[<p>Tensoræ˜¯Pytorchçš„ä¸€ä¸ªå®Œç¾ç»„ä»¶(å¯ä»¥ç”Ÿæˆé«˜ç»´æ•°ç»„)ï¼Œä½†æ˜¯è¦æ„å»ºç¥ç»ç½‘ç»œè¿˜æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬éœ€è¦èƒ½å¤Ÿè®¡ç®—å›¾çš„Tensorï¼Œé‚£å°±æ˜¯Variableã€‚Variableæ˜¯å¯¹Tensorçš„ä¸€ä¸ªå°è£…ï¼Œæ“ä½œå’ŒTensoræ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æ¯ä¸ªVariableéƒ½æœ‰ä¸‰ä¸ªå±æ€§ï¼ŒVaribaleçš„Tensoræœ¬èº«çš„.dataï¼Œå¯¹åº”Tensorçš„æ¢¯åº¦.gradï¼Œä»¥åŠè¿™ä¸ªVariableæ˜¯é€šè¿‡ä»€ä¹ˆæ–¹å¼å¾—åˆ°çš„.grad_fn<br><a id="more"></a></p>
<h4 id="Variable"><a href="#Variable" class="headerlink" title="Variable"></a>Variable</h4><p>autograd.Variable æ˜¯åŒ…çš„æ ¸å¿ƒç±». å®ƒåŒ…è£…äº†å¼ é‡, å¹¶ä¸”æ”¯æŒå‡ ä¹æ‰€æœ‰çš„æ“ä½œ. ä¸€æ—¦ä½ å®Œæˆäº†ä½ çš„è®¡ç®—, ä½ å°±å¯ä»¥è°ƒç”¨ .backward() æ–¹æ³•, ç„¶åæ‰€æœ‰çš„æ¢¯åº¦è®¡ç®—ä¼šè‡ªåŠ¨è¿›è¡Œ.ä½ è¿˜å¯ä»¥é€šè¿‡ .data å±æ€§æ¥è®¿é—®åŸå§‹çš„å¼ é‡, è€Œå…³äºè¯¥ variableï¼ˆå˜é‡ï¼‰çš„æ¢¯åº¦ä¼šè¢«ç´¯è®¡åˆ° .gradä¸Šå».è¿˜æœ‰ä¸€ä¸ªé’ˆå¯¹è‡ªåŠ¨æ±‚å¯¼å®ç°æ¥è¯´éå¸¸é‡è¦çš„ç±» - Function.Variable å’Œ Function æ˜¯ç›¸äº’è”ç³»çš„, å¹¶ä¸”å®ƒä»¬æ„å»ºäº†ä¸€ä¸ªéå¾ªç¯çš„å›¾, ç¼–ç äº†ä¸€ä¸ªå®Œæ•´çš„è®¡ç®—å†å²ä¿¡æ¯. æ¯ä¸€ä¸ª variableï¼ˆå˜é‡ï¼‰éƒ½æœ‰ä¸€ä¸ª .grad_fn å±æ€§, å®ƒå¼•ç”¨äº†ä¸€ä¸ªå·²ç»åˆ›å»ºäº† Variable çš„ Function ï¼ˆé™¤äº†ç”¨æˆ·åˆ›å»ºçš„ Variable <code>ä¹‹å¤– - å®ƒä»¬çš„</code>grad_fn is None ï¼‰.å¦‚æœä½ æƒ³è®¡ç®—å¯¼æ•°, ä½ å¯ä»¥åœ¨ Variable ä¸Šè°ƒç”¨ .backward() æ–¹æ³•. å¦‚æœ Variable æ˜¯æ ‡é‡çš„å½¢å¼ï¼ˆä¾‹å¦‚, å®ƒåŒ…å«ä¸€ä¸ªå…ƒç´ æ•°æ®ï¼‰, ä½ ä¸å¿…æŒ‡å®šä»»ä½•å‚æ•°ç»™ backward(), ä½†æ˜¯, å¦‚æœå®ƒæœ‰æ›´å¤šçš„å…ƒç´ . ä½ éœ€è¦å»æŒ‡å®šä¸€ä¸ª grad_output å‚æ•°, è¯¥å‚æ•°æ˜¯ä¸€ä¸ªåŒ¹é… shapeï¼ˆå½¢çŠ¶ï¼‰çš„å¼ é‡.</p>
<h4 id="åˆ›å»ºä¸€ä¸ª2Ã—2çš„å˜é‡"><a href="#åˆ›å»ºä¸€ä¸ª2Ã—2çš„å˜é‡" class="headerlink" title="åˆ›å»ºä¸€ä¸ª2Ã—2çš„å˜é‡"></a>åˆ›å»ºä¸€ä¸ª2Ã—2çš„å˜é‡</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">View more, visit my tutorial page: https://arithmeticjia.github.io</span></span><br><span class="line"><span class="string">My Blog: https://www.guanacossj.com</span></span><br><span class="line"><span class="string">Dependencies:</span></span><br><span class="line"><span class="string">torch: 1.3.0</span></span><br><span class="line"><span class="string">matplotlib</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch.autograd <span class="keyword">import</span> Variable</span><br><span class="line"></span><br><span class="line"><span class="comment"># Variable in torch is to build a computational graph,</span></span><br><span class="line"><span class="comment"># but this graph is dynamic compared with a static graph in Tensorflow or Theano.</span></span><br><span class="line"><span class="comment"># So torch does not have placeholder, torch can just pass variable to the computational graph.</span></span><br><span class="line"></span><br><span class="line">tensor = torch.FloatTensor([[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>]])            <span class="comment"># build a tensor</span></span><br><span class="line">variable = Variable(tensor, requires_grad=<span class="literal">True</span>)      <span class="comment"># build a variable, usually for compute gradients</span></span><br><span class="line"></span><br><span class="line">print(tensor)       <span class="comment"># [torch.FloatTensor of size 2x2]</span></span><br><span class="line">print(variable)     <span class="comment"># [torch.FloatTensor of size 2x2]</span></span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tensor([[1., 2.],</span><br><span class="line">        [3., 4.]])</span><br><span class="line">tensor([[1., 2.],</span><br><span class="line">        [3., 4.]], requires_grad=True)</span><br></pre></td></tr></table></figure>
<h4 id="è®¡ç®—å˜é‡çš„ç‚¹ä¹˜ç§¯ã€æ¢¯åº¦"><a href="#è®¡ç®—å˜é‡çš„ç‚¹ä¹˜ç§¯ã€æ¢¯åº¦" class="headerlink" title="è®¡ç®—å˜é‡çš„ç‚¹ä¹˜ç§¯ã€æ¢¯åº¦"></a>è®¡ç®—å˜é‡çš„ç‚¹ä¹˜ç§¯ã€æ¢¯åº¦</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">View more, visit my tutorial page: https://arithmeticjia.github.io</span></span><br><span class="line"><span class="string">My Blog: https://www.guanacossj.com</span></span><br><span class="line"><span class="string">Dependencies:</span></span><br><span class="line"><span class="string">torch: 1.3.0</span></span><br><span class="line"><span class="string">matplotlib</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch.autograd <span class="keyword">import</span> Variable</span><br><span class="line"></span><br><span class="line"><span class="comment"># Variable in torch is to build a computational graph,</span></span><br><span class="line"><span class="comment"># but this graph is dynamic compared with a static graph in Tensorflow or Theano.</span></span><br><span class="line"><span class="comment"># So torch does not have placeholder, torch can just pass variable to the computational graph.</span></span><br><span class="line"></span><br><span class="line">tensor = torch.FloatTensor([[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>]])            <span class="comment"># build a tensor</span></span><br><span class="line">variable = Variable(tensor, requires_grad=<span class="literal">True</span>)      <span class="comment"># build a variable, usually for compute gradients</span></span><br><span class="line"></span><br><span class="line">print(tensor)       <span class="comment"># [torch.FloatTensor of size 2x2]</span></span><br><span class="line">print(variable)     <span class="comment"># [torch.FloatTensor of size 2x2]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># till now the tensor and variable seem the same.</span></span><br><span class="line"><span class="comment"># However, the variable is a part of the graph, it's a part of the auto-gradient.</span></span><br><span class="line"></span><br><span class="line">t_out = torch.mean(tensor*tensor)       <span class="comment"># x^2</span></span><br><span class="line">v_out = torch.mean(variable*variable)   <span class="comment"># x^2</span></span><br><span class="line">print(t_out)</span><br><span class="line">print(v_out)                            <span class="comment"># 7.5</span></span><br><span class="line"></span><br><span class="line">print(variable*variable)</span><br><span class="line"><span class="comment"># ç‚¹ä¹˜æ“ä½œ</span></span><br><span class="line">print(torch.mm(variable,variable))</span><br><span class="line"><span class="comment"># çŸ©é˜µç›¸ä¹˜</span></span><br><span class="line">v_out.backward()    <span class="comment"># backpropagation from v_out</span></span><br><span class="line"><span class="comment"># v_out = 1/4 * sum(variable*variable)</span></span><br><span class="line"><span class="comment"># the gradients w.r.t the variable, d(v_out)/d(variable) = 1/4*2*variable = variable/2</span></span><br><span class="line">print(variable.grad)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string"> 0.5000  1.0000</span></span><br><span class="line"><span class="string"> 1.5000  2.0000</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tensor([[1., 2.],</span><br><span class="line">        [3., 4.]])</span><br><span class="line">tensor([[1., 2.],</span><br><span class="line">        [3., 4.]], requires_grad=True)</span><br><span class="line">tensor(7.5000)</span><br><span class="line">tensor(7.5000, grad_fn=&lt;MeanBackward0&gt;)</span><br><span class="line">tensor([[ 1.,  4.],</span><br><span class="line">        [ 9., 16.]], grad_fn=&lt;MulBackward0&gt;)</span><br><span class="line">tensor([[ 7., 10.],</span><br><span class="line">        [15., 22.]], grad_fn=&lt;MmBackward&gt;)</span><br><span class="line">tensor([[0.5000, 1.0000],</span><br><span class="line">        [1.5000, 2.0000]])</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„è¿™é‡Œçš„å˜é‡çš„ç‚¹ä¹˜å’Œç›¸ä¹˜çš„åŒºåˆ«</p>
<h4 id="æŸ¥çœ‹å˜é‡çš„æ•°æ®"><a href="#æŸ¥çœ‹å˜é‡çš„æ•°æ®" class="headerlink" title="æŸ¥çœ‹å˜é‡çš„æ•°æ®"></a>æŸ¥çœ‹å˜é‡çš„æ•°æ®</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(variable)     <span class="comment"># this is data in variable format</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">Variable containing:</span></span><br><span class="line"><span class="string"> 1  2</span></span><br><span class="line"><span class="string"> 3  4</span></span><br><span class="line"><span class="string">[torch.FloatTensor of size 2x2]</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line">print(variable.data)    <span class="comment"># this is data in tensor format</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string"> 1  2</span></span><br><span class="line"><span class="string"> 3  4</span></span><br><span class="line"><span class="string">[torch.FloatTensor of size 2x2]</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tensor([[1., 2.],</span><br><span class="line">        [3., 4.]], requires_grad=True)</span><br><span class="line">tensor([[1., 2.],</span><br><span class="line">        [3., 4.]])</span><br></pre></td></tr></table></figure>
<h4 id="Variableè½¬numpy"><a href="#Variableè½¬numpy" class="headerlink" title="Variableè½¬numpy"></a>Variableè½¬numpy</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(variable.data.numpy())    <span class="comment"># numpy format</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">[[ 1.  2.]</span></span><br><span class="line"><span class="string"> [ 3.  4.]]</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[[1. 2.]</span><br><span class="line"> [3. 4.]]</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Pytorch</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title>2019-12-13å‘¨æŠ¥</title>
    <url>/2019/12/10/2019-12-13%E5%91%A8%E6%8A%A5-%E5%8D%95%E6%B2%99%E5%98%89/</url>
    <content><![CDATA[<p>Work between 2019/12/07-2019/12/13<br><a id="more"></a></p>
<h4 id="A-Dual-Stage-Attention-Based-Recurrent-Neural-Network-for-Time-Series-Prediction"><a href="#A-Dual-Stage-Attention-Based-Recurrent-Neural-Network-for-Time-Series-Prediction" class="headerlink" title="A Dual-Stage Attention-Based Recurrent Neural Network for Time Series Prediction"></a>A Dual-Stage Attention-Based Recurrent Neural Network for Time Series Prediction</h4><h5 id="Theory"><a href="#Theory" class="headerlink" title="Theory"></a>Theory</h5><p><img src="https://www.guanacossj.com/media/articlebodypics/lstm-attention.jpg" alt=""></p>
<ul>
<li>Bi-LSTM + Attention å°±æ˜¯åœ¨Bi-LSTMçš„æ¨¡å‹ä¸ŠåŠ å…¥Attentionå±‚ï¼Œåœ¨Bi-LSTMä¸­æˆ‘ä»¬ä¼šç”¨æœ€åä¸€ä¸ªæ—¶åºçš„è¾“å‡ºå‘é‡ ä½œä¸ºç‰¹å¾å‘é‡ï¼Œç„¶åè¿›è¡Œsoftmaxåˆ†ç±»ã€‚Attentionæ˜¯å…ˆè®¡ç®—æ¯ä¸ªæ—¶åºçš„æƒé‡ï¼Œç„¶åå°†æ‰€æœ‰æ—¶åº çš„å‘é‡è¿›è¡ŒåŠ æƒå’Œä½œä¸ºç‰¹å¾å‘é‡ï¼Œç„¶åè¿›è¡Œsoftmaxåˆ†ç±»</li>
<li>sigmoidæŠŠä¸€ä¸ªreal valueæ˜ å°„åˆ°(0,1)çš„åŒºé—´(å½“ç„¶ä¹Ÿå¯ä»¥æ˜¯(-1,1)),è¿™æ ·å¯ä»¥ç”¨æ¥åšäºŒåˆ†ç±»</li>
<li>softmaxæŠŠä¸€ä¸ªkç»´çš„real valueå‘é‡(a1,a2,a3,a4â€¦)æ˜ å°„æˆä¸€ä¸ª(b1,b2,b3,b4â€¦)å…¶ä¸­biæ˜¯ä¸€ä¸ª0-1çš„å¸¸æ•°ï¼Œç„¶åå¯ä»¥æ ¹æ®biçš„å¤§å°æ¥è¿›è¡Œå¤šåˆ†ç±»çš„ä»»åŠ¡ï¼Œå¦‚å–æƒé‡æœ€å¤§çš„ä¸€ç»´</li>
<li>ä¼ ç»Ÿçš„æ³¨æ„åŠ›æœºåˆ¶åªç”¨åœ¨è§£ç å™¨çš„è¾“å…¥é˜¶æ®µï¼Œå³å¯¹ä¸åŒæ—¶åˆ»äº§ç”Ÿä¸åŒçš„context vectorä¸åŒï¼Œè¯¥æ–‡è¿˜åœ¨ç¼–ç å™¨çš„è¾“å…¥é˜¶æ®µå¼•å…¥äº†æ³¨æ„åŠ›æœºåˆ¶ï¼Œä»è€ŒåŒæ—¶å®ç°äº†é€‰å–ç‰¹å¾å› å­(feature selection)å’ŒæŠŠæ¡é•¿æœŸæ—¶åºä¾èµ–å…³ç³»(long-term temporal dependencies)</li>
<li>ç¬¬ä¸€é˜¶æ®µï¼Œä½¿ç”¨æ³¨æ„åŠ›æœºåˆ¶è‡ªé€‚åº”åœ°æå–æ¯ä¸ªæ—¶åˆ»çš„ç›¸å…³feature<script type="math/tex; mode=display">e_{t}^{k}=v_{e}^{T}tanh(W_{e}[h_{t-1};s_{t-1}]+U_{e}x^{k})</script></li>
<li>ç”¨softmaxå‡½æ•°å°†å…¶å½’ä¸€åŒ–<script type="math/tex; mode=display">\alpha _{t}^{k}=\frac{exp(e_{t}^{k})}{\sum_{i-1}^{n}exp(e_{t}^{i})}</script></li>
<li>å¾—åˆ°æ›´æ–°åçš„x<script type="math/tex; mode=display">\tilde{x} = (\alpha _{t}^{1}x_{t}^{1}, \alpha _{t}^{2}x_{t}^{2},...,\alpha _{t}^{n}x_{t}^{n})</script></li>
<li>é€‰å–LSTMä½œä¸ºç¼–ç å™¨<script type="math/tex">f_{1}</script><script type="math/tex; mode=display">h_{t} = f_{1}(h_{t-1},  \tilde{x})</script></li>
<li><p>ç¬¬äºŒé˜¶æ®µï¼Œä½¿ç”¨å¦ä¸€ä¸ªæ³¨æ„åŠ›æœºåˆ¶é€‰å–ä¸ä¹‹ç›¸å…³çš„encoder hidden states</p>
<script type="math/tex; mode=display">c_{t}^{'} = \sum_{t-1}^{T}\beta _{t^{'}}^{t}h_{t}</script></li>
<li><p><script type="math/tex">\beta _{t^{'}}^{t}</script>çš„è®¾è®¡ç±»ä¼¼äºBahanauçš„å·¥ä½œï¼ŒåŸºäºå‰ä¸€ä¸ªæ—¶åˆ»è§£ç å™¨çš„hidden state[å…¬å¼]å’Œcell state[å…¬å¼]è®¡ç®—å¾—åˆ°ï¼š</p>
</li>
</ul>
<h5 id="Experiment"><a href="#Experiment" class="headerlink" title="Experiment"></a>Experiment</h5><figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line">Epochs: 10</span><br><span class="line"><span class="keyword">Test </span>RMSE: 0.259</span><br><span class="line"><span class="keyword">Test </span>nRMSE: 0.056</span><br><span class="line"><span class="keyword">Test </span>Data: all</span><br></pre></td></tr></table></figure>
<p><img src="https://www.guanacossj.com/media/articlebodypics/pred_0.png" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/final_predicted_reloaded.png" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/final_predicted_reloaded_standard.png" alt=""></p>
<figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line">Epochs: 10</span><br><span class="line"><span class="keyword">Test </span>RMSE: 0.327</span><br><span class="line"><span class="keyword">Test </span>nRMSE: 0.275</span><br><span class="line"><span class="keyword">Test </span>Data: all * 0.3</span><br></pre></td></tr></table></figure>
<p><img src="https://www.guanacossj.com/media/articlebodypics/final_predicted.png" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/final_predicted_standard.png" alt=""></p>
<h4 id="Vm1-Power-Matrix-From-Paper"><a href="#Vm1-Power-Matrix-From-Paper" class="headerlink" title="Vm1-Power-Matrix-From-Paper"></a>Vm1-Power-Matrix-From-Paper</h4><figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line">Epochs: 10</span><br><span class="line"><span class="keyword">Test </span>RMSE: 2.602</span><br><span class="line"><span class="keyword">Test </span>nRMSE: 0.207</span><br><span class="line"><span class="keyword">Test </span>Data: all<span class="string">-1116</span><span class="string">-1120</span></span><br></pre></td></tr></table></figure>
<p><img src="https://www.guanacossj.com/media/articlebodypics/all_server_final_predicted_reloaded-larger.png" alt=""></p>
<figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line">Epochs: 10</span><br><span class="line"><span class="keyword">Test </span>RMSE: 3.057</span><br><span class="line"><span class="keyword">Test </span>nRMSE: 0.361</span><br><span class="line"><span class="keyword">Test </span>Data: 49000<span class="string">-50000</span><span class="string">-1116</span><span class="string">-1120</span></span><br></pre></td></tr></table></figure>
<p><img src="https://www.guanacossj.com/media/articlebodypics/49000_50000_server_final_predicted_reloaded.png" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/49000_50000_server_final_predicted_reloaded-larger.png" alt=""><br><figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line">Epochs: 10</span><br><span class="line"><span class="keyword">Test </span>RMSE: 2.949</span><br><span class="line"><span class="keyword">Test </span>nRMSE: 0.259</span><br><span class="line"><span class="keyword">Test </span>Data: 32000<span class="string">-33000</span><span class="string">-1116</span><span class="string">-1120</span></span><br></pre></td></tr></table></figure><br><img src="https://www.guanacossj.com/media/articlebodypics/32000_33000_server_final_predicted_reloaded-larger.png" alt=""></p>
<h4 id="Vm1-Power-Matrix-From-Jia"><a href="#Vm1-Power-Matrix-From-Jia" class="headerlink" title="Vm1-Power-Matrix-From-Jia"></a>Vm1-Power-Matrix-From-Jia</h4><h5 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h5><figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line">Training Data: 1111<span class="string">-1115</span></span><br><span class="line"><span class="keyword">Testing </span>Data: 1116<span class="string">-1120</span></span><br></pre></td></tr></table></figure>
<figure class="highlight livescript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="params">(n,m)</span> -&gt;</span> <span class="function"><span class="params">(n,m * timestamp)</span> -&gt;</span> (n,timestamp,m)</span><br></pre></td></tr></table></figure>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">    var1(t<span class="number">-60</span>)  var2(t<span class="number">-60</span>)  var3(t<span class="number">-60</span>)  ...   var5(t)   var6(t)   var7(t)</span><br><span class="line"><span class="number">60</span>    <span class="number">0.655771</span>   <span class="number">-1.060919</span>   <span class="number">-0.735941</span>  ... <span class="number">-0.447461</span> <span class="number">-0.217168</span> <span class="number">-0.030555</span></span><br><span class="line"><span class="number">61</span>    <span class="number">0.560612</span>   <span class="number">-1.060919</span>   <span class="number">-0.735941</span>  ... <span class="number">-0.023654</span> <span class="number">-0.222058</span> <span class="number">-0.030555</span></span><br><span class="line"><span class="number">62</span>    <span class="number">0.655771</span>   <span class="number">-1.060919</span>   <span class="number">-0.735941</span>  ... <span class="number">-0.222916</span> <span class="number">-0.207537</span> <span class="number">-0.030555</span></span><br><span class="line"><span class="number">63</span>    <span class="number">0.465453</span>   <span class="number">-1.060919</span>   <span class="number">-0.735941</span>  ... <span class="number">-0.638782</span> <span class="number">-0.222058</span> <span class="number">-0.030555</span></span><br><span class="line"><span class="number">64</span>   <span class="number">-0.010342</span>   <span class="number">-1.047501</span>   <span class="number">-0.735941</span>  ...  <span class="number">1.133103</span> <span class="number">-0.222058</span> <span class="number">-0.030555</span></span><br></pre></td></tr></table></figure>
<h5 id="Normalization"><a href="#Normalization" class="headerlink" title="Normalization"></a>Normalization</h5><ul>
<li>Mean Normaliztion(å‡å€¼å½’ä¸€åŒ–)</li>
</ul>
<script type="math/tex; mode=display">
x^{*} = \frac{x-\mu}{\sigma }</script><ul>
<li>Min-Max Normalization</li>
</ul>
<script type="math/tex; mode=display">
x^{*} = \frac{x-min}{max-min }</script><h5 id="Bi-GRU-Attention"><a href="#Bi-GRU-Attention" class="headerlink" title="Bi-GRU + Attention"></a>Bi-GRU + Attention</h5><figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line">Epochs: 20</span><br><span class="line"><span class="keyword">Test </span>RMSE: 3.054</span><br><span class="line"><span class="keyword">Test </span>nRMSE: 0.243</span><br><span class="line"><span class="keyword">Test </span>Data: all<span class="string">-1116</span><span class="string">-1120</span></span><br></pre></td></tr></table></figure>
<p><img src="https://www.guanacossj.com/media/articlebodypics/gru-bi-20-all-att-1620.jpg" alt=""></p>
<figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line">Epochs: 20</span><br><span class="line"><span class="keyword">Test </span>RMSE: 3.458</span><br><span class="line"><span class="keyword">Test </span>nRMSE: 0.418</span><br><span class="line"><span class="keyword">Test </span>Data: 49000<span class="string">-50000</span><span class="string">-1116</span><span class="string">-1120</span></span><br></pre></td></tr></table></figure>
<p><img src="https://www.guanacossj.com/media/articlebodypics/49000_50000_n_final_gru_pro_attention_bi_20.png" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/mark_49000_50000_n_final_gru_pro_attention_bi_20.png" alt=""></p>
<figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line">Epochs: 20</span><br><span class="line"><span class="keyword">Test </span>RMSE: 3.196</span><br><span class="line"><span class="keyword">Test </span>nRMSE: 0.287</span><br><span class="line"><span class="keyword">Test </span>Data: 32000<span class="string">-33000</span><span class="string">-1116</span><span class="string">-1120</span></span><br></pre></td></tr></table></figure>
<p><img src="https://www.guanacossj.com/media/articlebodypics/32000_33000_n_final_gru_pro_attention_bi_20.png" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/mark_32000_33000_n_final_gru_pro_attention_bi_20.png" alt=""></p>
<figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line">Epochs: 20</span><br><span class="line"><span class="keyword">Test </span>RMSE: 4.573</span><br><span class="line"><span class="keyword">Test </span>nRMSE: 0.45</span><br><span class="line"><span class="keyword">Test </span>Data: 70000<span class="string">-70500</span><span class="string">-1116</span><span class="string">-1120</span></span><br></pre></td></tr></table></figure>
<p><img src="https://www.guanacossj.com/media/articlebodypics/70000-70500-gru-bi-att-20-1620.jpg" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/mark_70000-70500-gru-bi-att-20-1620.jpg" alt=""></p>
<h5 id="Bi-LSTM-Attention"><a href="#Bi-LSTM-Attention" class="headerlink" title="Bi-LSTM + Attention"></a>Bi-LSTM + Attention</h5><figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line">Epochs: 20</span><br><span class="line"><span class="keyword">Test </span>RMSE: 2.776</span><br><span class="line"><span class="keyword">Test </span>nRMSE: 0.221</span><br><span class="line"><span class="keyword">Test </span>Data: all<span class="string">-1116</span><span class="string">-1120</span></span><br></pre></td></tr></table></figure>
<p><img src="https://www.guanacossj.com/media/articlebodypics/lstm-bi-20-att-all-1620.jpg" alt=""></p>
<figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line">Epochs: 20</span><br><span class="line"><span class="keyword">Test </span>RMSE: 4.596</span><br><span class="line"><span class="keyword">Test </span>nRMSE: 0.460</span><br><span class="line"><span class="keyword">Test </span>Data: 70000<span class="string">-70500</span><span class="string">-1116</span><span class="string">-1120</span></span><br></pre></td></tr></table></figure>
<p><img src="https://www.guanacossj.com/media/articlebodypics/70000-70500-lstm-bi-att-20-01-1620.jpg" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/mark_70000-70500-lstm-bi-att-20-01-1620.jpg" alt=""></p>
<h5 id="Bi-LSTM-Only"><a href="#Bi-LSTM-Only" class="headerlink" title="Bi-LSTM Only"></a>Bi-LSTM Only</h5><figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line">Epochs: 500</span><br><span class="line">Train-Data: 1111<span class="string">-1115</span></span><br><span class="line">Test-Data: 1116<span class="string">-1120</span></span><br><span class="line"><span class="keyword">Test </span>RMSE: 3.880</span><br><span class="line"><span class="keyword">Test </span>nRMSE: 0.308</span><br></pre></td></tr></table></figure>
<p>Test Data: all-1116-1120<br><img src="https://www.guanacossj.com/media/articlebodypics/lstm-bi-500-all-1620.jpg" alt=""></p>
<p>Test Data: 50000-50500-1116-1120<br><img src="https://www.guanacossj.com/media/articlebodypics/lstm-bi-500-01-1620.jpg" alt=""></p>
<p>Test Data: 60000-60500-1116-1120<br><img src="https://www.guanacossj.com/media/articlebodypics/lstm-bi-500-02-1620.jpg" alt=""></p>
<p>Test Data: 30000-30500-1116-1120<br><img src="https://www.guanacossj.com/media/articlebodypics/lstm-bi-500-03-1620.jpg" alt=""></p>
<h4 id="Bi-LSTM-Attenion-amp-GRU-LSTM-Attenion-In-Stock-With-Pytorch"><a href="#Bi-LSTM-Attenion-amp-GRU-LSTM-Attenion-In-Stock-With-Pytorch" class="headerlink" title="Bi-LSTM-Attenion &amp; GRU-LSTM-Attenion In Stock With Pytorch"></a>Bi-LSTM-Attenion &amp; GRU-LSTM-Attenion In Stock With Pytorch</h4><h5 id="Bi-GRU"><a href="#Bi-GRU" class="headerlink" title="Bi-GRU"></a>Bi-GRU</h5><figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Test </span>RMSE: 66.403</span><br><span class="line"><span class="keyword">Test </span>nRMSE: 0.077</span><br></pre></td></tr></table></figure>
<p><img src="https://www.guanacossj.com/media/articlebodypics/pytorch-bi-gru-stock.png" alt=""></p>
<h5 id="Bi-LSTM"><a href="#Bi-LSTM" class="headerlink" title="Bi-LSTM"></a>Bi-LSTM</h5><figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Test </span>RMSE: 88.421</span><br><span class="line"><span class="keyword">Test </span>nRMSE: 0.103</span><br></pre></td></tr></table></figure>
<p><img src="https://www.guanacossj.com/media/articlebodypics/pytorch-bi-lstm-stock.png" alt=""></p>
<h5 id="Bi-GRU-Attention-1"><a href="#Bi-GRU-Attention-1" class="headerlink" title="Bi-GRU-Attention"></a>Bi-GRU-Attention</h5><figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Test </span>RMSE: 86.775</span><br><span class="line"><span class="keyword">Test </span>nRMSE: 0.101</span><br></pre></td></tr></table></figure>
<p><img src="https://www.guanacossj.com/media/articlebodypics/pytorch-bi-gru-att-stock.png" alt=""></p>
<h5 id="Bi-LSTM-Attention-1"><a href="#Bi-LSTM-Attention-1" class="headerlink" title="Bi-LSTM-Attention"></a>Bi-LSTM-Attention</h5><figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Test </span>RMSE: 86.588</span><br><span class="line"><span class="keyword">Test </span>nRMSE: 0.101</span><br></pre></td></tr></table></figure>
<p><img src="https://www.guanacossj.com/media/articlebodypics/pytorch-bi-lstm-att-stock.png" alt=""></p>
]]></content>
      <categories>
        <category>å‘¨æŠ¥</category>
      </categories>
  </entry>
  <entry>
    <title>Djangoä¸ªäººåšå®¢æ­å»ºæ•™ç¨‹-Django-Rest-Frameworkå¤–é”®ä¸å¤šå¯¹å¤šåºåˆ—åŒ–</title>
    <url>/2019/12/09/Django%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B-Django-Rest-Framework%E5%A4%96%E9%94%AE%E4%B8%8E%E5%A4%9A%E5%AF%B9%E5%A4%9A%E5%BA%8F%E5%88%97%E5%8C%96/</url>
    <content><![CDATA[<p>å¦‚æœå¯¹ä¸€ä¸ªå«æœ‰å¤šå¯¹å¤šã€å¤–é”®çš„æ¨¡å‹è¿›è¡Œåºåˆ—åŒ–ï¼Œè¿™æ—¶å€™è¿™äº›å…³è”çš„å­—æ®µä¼šåªå±•ç¤ºidï¼Œå› æ­¤éœ€è¦å¯¹å¤–é”®æˆ–è€…å¤šå¯¹å¤šçš„å­—æ®µè¿›è¡Œåºåˆ—åŒ–å¤„ç†<br><a id="more"></a></p>
<h4 id="å¤–é”®åºåˆ—åŒ–ï¼ˆForeignKeyï¼‰-amp-å¤šå¯¹å¤šåºåˆ—åŒ–ï¼ˆmanytomany"><a href="#å¤–é”®åºåˆ—åŒ–ï¼ˆForeignKeyï¼‰-amp-å¤šå¯¹å¤šåºåˆ—åŒ–ï¼ˆmanytomany" class="headerlink" title="å¤–é”®åºåˆ—åŒ–ï¼ˆForeignKeyï¼‰&amp;å¤šå¯¹å¤šåºåˆ—åŒ–ï¼ˆmanytomany)"></a>å¤–é”®åºåˆ—åŒ–ï¼ˆForeignKeyï¼‰&amp;å¤šå¯¹å¤šåºåˆ—åŒ–ï¼ˆmanytomany)</h4><p>è¿™é‡Œè¦åºåˆ—åŒ–çš„æ¨¡å‹æ˜¯Articles,å…¶ä¸­çš„authornameã€tagsã€categoryç”¨äº†å¤–é”®æˆ–è€…å¤šå¯¹å¤šå…³è”<br>å…³è”çš„ä¸¤ä¸ªæ¨¡å‹æ˜¯Tagå’ŒCategory<br>models.py<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Category</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">        Django è¦æ±‚æ¨¡å‹å¿…é¡»ç»§æ‰¿ models.Model ç±»ã€‚</span></span><br><span class="line"><span class="string">        Category åªéœ€è¦ä¸€ä¸ªç®€å•çš„åˆ†ç±»å name å°±å¯ä»¥äº†ã€‚</span></span><br><span class="line"><span class="string">        CharField æŒ‡å®šäº†åˆ†ç±»å name çš„æ•°æ®ç±»å‹ï¼ŒCharField æ˜¯å­—ç¬¦å‹ï¼Œ</span></span><br><span class="line"><span class="string">        CharField çš„ max_length å‚æ•°æŒ‡å®šå…¶æœ€å¤§é•¿åº¦ï¼Œè¶…è¿‡è¿™ä¸ªé•¿åº¦çš„åˆ†ç±»åå°±ä¸èƒ½è¢«å­˜å…¥æ•°æ®åº“ã€‚</span></span><br><span class="line"><span class="string">        å½“ç„¶ Django è¿˜ä¸ºæˆ‘ä»¬æä¾›äº†å¤šç§å…¶å®ƒçš„æ•°æ®ç±»å‹ï¼Œå¦‚æ—¥æœŸæ—¶é—´ç±»å‹ DateTimeFieldã€æ•´æ•°ç±»å‹ IntegerField ç­‰ç­‰ã€‚</span></span><br><span class="line"><span class="string">        Django å†…ç½®çš„å…¨éƒ¨ç±»å‹å¯æŸ¥çœ‹æ–‡æ¡£ï¼š</span></span><br><span class="line"><span class="string">        https://docs.djangoproject.com/en/1.10/ref/models/fields/#field-types</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">    name = models.CharField(max_length=<span class="number">100</span>)</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">catcount</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> Articles.objects.filter(category__name__exact=self.name).filter(status=<span class="string">'æœ‰æ•ˆ'</span>).count()</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.name</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tag</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">        æ ‡ç­¾ Tag ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå’Œ Category ä¸€æ ·ã€‚</span></span><br><span class="line"><span class="string">        å†æ¬¡å¼ºè°ƒä¸€å®šè¦ç»§æ‰¿ models.Model ç±»ï¼</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">    name = models.CharField(max_length=<span class="number">100</span>)</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.name</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Articles</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    id = models.AutoField(primary_key=<span class="literal">True</span>)  <span class="comment"># id</span></span><br><span class="line">    title = models.CharField(max_length=<span class="number">150</span>)  <span class="comment"># åšå®¢æ ‡é¢˜</span></span><br><span class="line">    body = models.TextField()  <span class="comment"># åšå®¢æ­£æ–‡</span></span><br><span class="line">    timestamp = models.DateTimeField()  <span class="comment"># åˆ›å»ºæ—¶é—´</span></span><br><span class="line">    authorname = models.ForeignKey(<span class="string">'JiaBlog.BlogUser'</span>, on_delete=models.CASCADE)  <span class="comment"># ä½œè€…å§“å</span></span><br><span class="line">    views = models.PositiveIntegerField(default=<span class="number">0</span>)</span><br><span class="line">    category = models.ForeignKey(Category, on_delete=models.CASCADE, primary_key=<span class="literal">False</span>)</span><br><span class="line">    tags = models.ManyToManyField(Tag, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line">    greats = models.PositiveIntegerField(default=<span class="number">0</span>)</span><br><span class="line">    comments = models.IntegerField(default=<span class="number">0</span>)</span><br><span class="line">    status = models.CharField(max_length=<span class="number">20</span>, default=<span class="string">"DEL"</span>)</span><br><span class="line">    brief = models.CharField(max_length=<span class="number">200</span>, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line">    pic = models.ImageField(upload_to=<span class="string">'jiablogimages'</span>)</span><br><span class="line">    <span class="comment"># bodypic = models.ImageField(upload_to='jiablogimages', blank=True, null=True)</span></span><br><span class="line">    istop = models.CharField(max_length=<span class="number">5</span>, default=<span class="string">''</span>, null=<span class="literal">True</span>, blank=<span class="literal">True</span>)</span><br><span class="line">    articlebodybrief = models.TextField(blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><br>views.py<br>è¿™é‡Œçš„sourceå¯¹åº”çš„æ˜¯å­—æ®µå<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticlesSerializers</span><span class="params">(serializers.ModelSerializer)</span>:</span></span><br><span class="line">    authorname = serializers.CharField(source=<span class="string">'authorname.name'</span>)</span><br><span class="line">    category = serializers.CharField(source=<span class="string">'category.name'</span>)</span><br><span class="line">    tags = serializers.StringRelatedField(many=<span class="literal">True</span>)</span><br><span class="line"> </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Articles  <span class="comment"># æŒ‡å®šçš„æ¨¡å‹ç±»</span></span><br><span class="line">        fields = (<span class="string">'id'</span>, <span class="string">'title'</span>, <span class="string">'body'</span>, <span class="string">'timestamp'</span>, <span class="string">'authorname'</span>, <span class="string">'views'</span>, <span class="string">'tags'</span>, <span class="string">'category'</span>)  <span class="comment"># éœ€è¦åºåˆ—åŒ–çš„å±æ€§</span></span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>django</tag>
        <tag>restframework</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>Learn-Pytorch-ä½¿ç”¨LSTMé¢„æµ‹èˆªç­å®¢æµé‡</title>
    <url>/2019/12/08/Learn-Pytorch-%E4%BD%BF%E7%94%A8LSTM%E9%A2%84%E6%B5%8B%E8%88%AA%E7%8F%AD%E5%AE%A2%E6%B5%81%E9%87%8F/</url>
    <content><![CDATA[<p>æœ¬æ–‡ä¼šè¯¦ç»†è®²è§£å¦‚ä½•ä½¿ç”¨Pytorché¢„æµ‹èˆªç­å®¢æµé‡ï¼ŒåŒ…æ‹¬æ•°æ®çš„å¤„ç†ã€ç½‘ç»œçš„ç»“æ„<br><a id="more"></a></p>
<h3 id="æ•°æ®é¢„å¤„ç†"><a href="#æ•°æ®é¢„å¤„ç†" class="headerlink" title="æ•°æ®é¢„å¤„ç†"></a>æ•°æ®é¢„å¤„ç†</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">data_csv = pd.read_csv(<span class="string">'airline-passengers.csv'</span>,usecols=[<span class="number">1</span>])</span><br><span class="line">plt.plot(data_csv)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå¦‚ä¸‹<br><img src="https://www.guanacossj.com/media/articlebodypics/1575815313343.jpg" alt=""><br>è¿™é‡Œæ˜¯çœŸå®çš„æ•°æ®ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ•°æ®é¢„å¤„ç†</span></span><br><span class="line">data_csv = data_csv.dropna()    <span class="comment"># æ»¤é™¤ç¼ºå¤±æ•°æ®</span></span><br><span class="line">dataset = data_csv.values       <span class="comment"># è·å¾—csvçš„å€¼</span></span><br><span class="line">print((dataset,type(dataset),dataset.shape))</span><br><span class="line">dataset = dataset.astype(<span class="string">'float32'</span>)</span><br><span class="line">max_value = np.max(dataset)     <span class="comment"># è·å¾—æœ€å¤§å€¼</span></span><br><span class="line">min_value = np.min(dataset)     <span class="comment"># è·å¾—æœ€å°å€¼</span></span><br><span class="line">scalar = max_value - min_value  <span class="comment"># è·å¾—é—´éš”æ•°é‡</span></span><br><span class="line">dataset = list(map(<span class="keyword">lambda</span> x: x / scalar, dataset)) <span class="comment"># å½’ä¸€åŒ–</span></span><br></pre></td></tr></table></figure><br>å¯ä»¥çœ‹ä¸€ä¸‹æœ€åå¤„ç†å®Œæˆçš„datasetï¼Œæ˜¯ä¸€ä¸ªlist<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[0.21621622] [0.22779922] [0.25482625]...</span><br></pre></td></tr></table></figure><br>åˆ›å»ºè¾“å…¥è¾“å‡ºï¼Œè¿™é‡Œä½¿ç”¨å½“å‰æ—¶é—´çš„å‰ä¸¤ä¸ªæ—¶åˆ»<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_dataset</span><span class="params">(dataset, look_back=<span class="number">2</span>)</span>:</span></span><br><span class="line">    dataX, dataY = [], []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(dataset) - look_back):</span><br><span class="line">        a = dataset[i:(i + look_back)]</span><br><span class="line">        dataX.append(a)</span><br><span class="line">        dataY.append(dataset[i + look_back])</span><br><span class="line">    <span class="keyword">return</span> np.array(dataX), np.array(dataY)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data_X, data_Y = create_dataset(dataset)</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>Pytorch</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>pytorch</tag>
        <tag>lstm</tag>
      </tags>
  </entry>
  <entry>
    <title>Learn-Pytorch-ç”¨Pytorchå†™ä¸€ä¸ªç¥ç»ç½‘ç»œ</title>
    <url>/2019/12/07/Learn-Pytorch-%E7%94%A8Pytorch%E5%86%99%E4%B8%80%E4%B8%AA%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/</url>
    <content><![CDATA[<p>æœ¬æ–‡å°†ç”¨Pytorchæ„å»ºä¸€ä¸ªæœ€ç®€å•çš„çº¿æ€§ç¥ç»ç½‘ç»œï¼Œç»ƒä¹ Pytorchä¸­ç¥ç»ç½‘ç»œæ¨¡å‹çš„ä¿å­˜å’Œé‡è½½<br><a id="more"></a></p>
<h4 id="å®šä¹‰ä¸€ä¸ªçº¿æ€§ç¥ç»ç½‘ç»œ"><a href="#å®šä¹‰ä¸€ä¸ªçº¿æ€§ç¥ç»ç½‘ç»œ" class="headerlink" title="å®šä¹‰ä¸€ä¸ªçº¿æ€§ç¥ç»ç½‘ç»œ"></a>å®šä¹‰ä¸€ä¸ªçº¿æ€§ç¥ç»ç½‘ç»œ</h4><script type="math/tex; mode=display">
y = wx + b</script><p>è¿™æ˜¯ä¸€ä¸ªåŸºæœ¬çš„ç½‘ç»œNetï¼Œå®ƒåªåŒ…å«ä¸€ä¸ªå…¨è¿æ¥å±‚<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> nn</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Net</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(Net,self).__init__()</span><br><span class="line">        self.layer = nn.Linear(<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">        self.layer.weight = nn.Parameter(torch.FloatTensor([[<span class="number">10</span>]]))</span><br><span class="line">        self.layer.bias = nn.Parameter(torch.FloatTensor([<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self,x)</span>:</span></span><br><span class="line">        y = self.layer(x)</span><br><span class="line">        <span class="keyword">return</span> y</span><br><span class="line"></span><br><span class="line">x = torch.FloatTensor([[<span class="number">1</span>]])</span><br><span class="line">net = Net()</span><br><span class="line">linearout = net(x)</span><br><span class="line">print(linearout)</span><br></pre></td></tr></table></figure><br>è¿™é‡Œå‡è®¾è¾“å…¥x=1<br>yçš„å€¼åº”ä¸º11<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tensor([[11.]], grad_fn=&lt;AddmmBackward&gt;)</span><br></pre></td></tr></table></figure></p>
<h4 id="ä¿å­˜Netçš„å‚æ•°å€¼"><a href="#ä¿å­˜Netçš„å‚æ•°å€¼" class="headerlink" title="ä¿å­˜Netçš„å‚æ•°å€¼"></a>ä¿å­˜Netçš„å‚æ•°å€¼</h4><p>æŸ¥çœ‹ç½‘ç»œçš„çŠ¶æ€å­—å…¸<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(net.state_dict())</span><br></pre></td></tr></table></figure><br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">OrderedDict([('layer.weight', tensor([[10.]])), ('layer.bias', tensor([1.]))])</span><br></pre></td></tr></table></figure><br>ä¿å­˜çŠ¶æ€å­—å…¸<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">torch.save(obj=net.state_dict(), f=<span class="string">"models/net.pth"</span>)</span><br></pre></td></tr></table></figure></p>
<h4 id="åŠ è½½Netå‚æ•°å€¼å¹¶ç”¨äºæ–°çš„æ¨¡å‹"><a href="#åŠ è½½Netå‚æ•°å€¼å¹¶ç”¨äºæ–°çš„æ¨¡å‹" class="headerlink" title="åŠ è½½Netå‚æ•°å€¼å¹¶ç”¨äºæ–°çš„æ¨¡å‹"></a>åŠ è½½Netå‚æ•°å€¼å¹¶ç”¨äºæ–°çš„æ¨¡å‹</h4><p>é‡æ–°å®šä¹‰ä¸€ä¸ªç›¸åŒç»“æ„çš„æ¨¡å‹NewNet<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> nn</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Net</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(Net,self).__init__()</span><br><span class="line">        self.layer = nn.Linear(<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">        self.layer.weight = nn.Parameter(torch.FloatTensor([[<span class="number">10</span>]]))</span><br><span class="line">        self.layer.bias = nn.Parameter(torch.FloatTensor([<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self,x)</span>:</span></span><br><span class="line">        y = self.layer(x)</span><br><span class="line">        <span class="keyword">return</span> y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewNet</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(NewNet, self).__init__()</span><br><span class="line">        self.layer = nn.Linear(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        self.layer.weight = nn.Parameter(torch.FloatTensor([[<span class="number">0</span>]]))</span><br><span class="line">        self.layer.bias = nn.Parameter(torch.FloatTensor([<span class="number">0</span>]))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        out = self.layer(x)</span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">x = torch.FloatTensor([[<span class="number">1</span>]])</span><br><span class="line">net = NewNet()</span><br><span class="line">print(net.state_dict())                             <span class="comment"># åˆå§‹çš„NewNetçš„çŠ¶æ€å­—å…¸</span></span><br><span class="line">net.load_state_dict(torch.load(<span class="string">"models/net.pth"</span>))</span><br><span class="line">print(net.state_dict())                             <span class="comment"># åŠ è½½å‚æ•°å€¼çš„NewNetçš„çŠ¶æ€å­—å…¸</span></span><br></pre></td></tr></table></figure><br>netçš„wå’Œbå€¼å°±ä¸å†æ˜¯0äº†ï¼Œè€Œæ˜¯ä¹‹å‰ä¿å­˜çš„æ¨¡å‹ä¸­wå’Œbå¯¹åº”çš„10å’Œ1<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">OrderedDict([('layer.weight', tensor([[0.]])), ('layer.bias', tensor([0.]))])</span><br><span class="line">OrderedDict([('layer.weight', tensor([[10.]])), ('layer.bias', tensor([1.]))])</span><br></pre></td></tr></table></figure></p>
<h4 id="ä¼˜åŒ–å™¨ä¸epochçš„ä¿å­˜"><a href="#ä¼˜åŒ–å™¨ä¸epochçš„ä¿å­˜" class="headerlink" title="ä¼˜åŒ–å™¨ä¸epochçš„ä¿å­˜"></a>ä¼˜åŒ–å™¨ä¸epochçš„ä¿å­˜</h4><p>ä¿å­˜ä¼˜åŒ–å™¨å‚æ•°å€¼å’Œepochå€¼çš„ä¸»è¦ç›®çš„æ˜¯ç”¨äºç»§ç»­è®­ç»ƒï¼Œä¿å­˜çš„æµç¨‹ä¾æ—§æ˜¯å…ˆâ€œtorch.save()â€å†â€œtorch.load_state_dict()â€<br>æˆ‘ä»¬é¦–å…ˆå®šä¹‰ä¸€ä¸ªAdamä¼˜åŒ–å™¨ã€ä¸€ä¸ªä»»æ„çš„epochå€¼ä¸netå¦‚ä¸‹ï¼š<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">mport torch</span><br><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> nn,optim</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Net</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(Net,self).__init__()</span><br><span class="line">        self.layer = nn.Linear(<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">        self.layer.weight = nn.Parameter(torch.FloatTensor([[<span class="number">10</span>]]))</span><br><span class="line">        self.layer.bias = nn.Parameter(torch.FloatTensor([<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self,x)</span>:</span></span><br><span class="line">        y = self.layer(x)</span><br><span class="line">        <span class="keyword">return</span> y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">net = Net()</span><br><span class="line">Adam = optim.Adam(params=net.parameters(), lr=<span class="number">0.001</span>, betas=(<span class="number">0.5</span>, <span class="number">0.999</span>))</span><br><span class="line">epoch = <span class="number">50</span></span><br><span class="line">all_states = &#123;<span class="string">"net"</span>: net.state_dict(), <span class="string">"Adam"</span>: Adam.state_dict(), <span class="string">"epoch"</span>: epoch&#125;</span><br><span class="line">torch.save(obj=all_states, f=<span class="string">"models/all_states.pth"</span>)</span><br></pre></td></tr></table></figure><br>æŸ¥çœ‹æ¨¡å‹æ‰€æœ‰çš„å‚æ•°<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">all_states = torch.load(<span class="string">"models/all_states.pth"</span>)</span><br><span class="line">print(all_states)</span><br></pre></td></tr></table></figure><br><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	'net': OrderedDict([('layer.weight', tensor([[10.]])), ('layer.bias', tensor([1.]))]),</span><br><span class="line">	'Adam': &#123;</span><br><span class="line">		'state': &#123;&#125;,</span><br><span class="line">		'param_groups': [&#123;</span><br><span class="line">			'lr': 0.001,</span><br><span class="line">			'betas': (0.5, 0.999),</span><br><span class="line">			'eps': 1e-08,</span><br><span class="line">			'weight_decay': 0,</span><br><span class="line">			'amsgrad': False,</span><br><span class="line">			'params': [4660776392, 4559888248]</span><br><span class="line">		&#125;]</span><br><span class="line">	&#125;,</span><br><span class="line">	'epoch': 50</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>Pytorch</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title>2019/12/06å‘¨æŠ¥-å•æ²™å˜‰</title>
    <url>/2019/12/06/2019-12-06%E5%91%A8%E6%8A%A5-%E5%8D%95%E6%B2%99%E5%98%89/</url>
    <content><![CDATA[<p>Nothing<br><a id="more"></a></p>
<h3 id="æ•°æ®æ¥æº"><a href="#æ•°æ®æ¥æº" class="headerlink" title="æ•°æ®æ¥æº"></a>æ•°æ®æ¥æº</h3><p>11.11-11.15<br>40ä¸‡</p>
<h3 id="ç‰¹å¾"><a href="#ç‰¹å¾" class="headerlink" title="ç‰¹å¾"></a>ç‰¹å¾</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cpu.all.usage.percent</span><br><span class="line">memory.used.percent</span><br><span class="line">interface.eth0.if_octets.rx</span><br><span class="line">interface.eth0.if_octets.tx</span><br><span class="line">disk.vda.disk_octets.write</span><br><span class="line">disk.vda.disk_octets.read</span><br></pre></td></tr></table></figure>
<h3 id="è®­ç»ƒå‚æ•°"><a href="#è®­ç»ƒå‚æ•°" class="headerlink" title="è®­ç»ƒå‚æ•°"></a>è®­ç»ƒå‚æ•°</h3><p>epoch = 200<br>bach_size = 72<br>BiLSTM + Attention</p>
<h3 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h3><p><img src="https://www.guanacossj.com/media/articlebodypics/1575621413951.jpg" alt=""><br><img src="https://www.guanacossj.com/media/articlebodypics/1575621002903.jpg" alt=""><br><img src="https://www.guanacossj.com/media/articlebodypics/1575627714970.jpg" alt=""></p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>epoch ä¸å¤Ÿå¤š</p>
]]></content>
      <categories>
        <category>å‘¨æŠ¥</category>
      </categories>
  </entry>
  <entry>
    <title>Kerasä»¥åŠTensorflowå¼ºåˆ¶ä½¿ç”¨GPU</title>
    <url>/2019/12/06/Keras%E4%BB%A5%E5%8F%8ATensorflow%E5%BC%BA%E5%88%B6%E4%BD%BF%E7%94%A8GPU/</url>
    <content><![CDATA[<p>æœ¬æ–‡ä¸»è¦ä»‹ç»åœ¨tensorflow2.0ä¸‹å¦‚ä½•å¼ºåˆ¶ä½¿ç”¨GPUï¼Œæ–¹æ³•ä¸€åœ¨tensorflow1.xç‰ˆæœ¬ä¸­å¤±æ•ˆ<br><a id="more"></a></p>
<h3 id="ç¯å¢ƒï¼špython3-6-tensorflow-2-0-keras2-3-1"><a href="#ç¯å¢ƒï¼špython3-6-tensorflow-2-0-keras2-3-1" class="headerlink" title="ç¯å¢ƒï¼špython3.6+tensorflow==2.0+keras2.3.1"></a>ç¯å¢ƒï¼špython3.6+tensorflow==2.0+keras2.3.1</h3><h3 id="æ–¹æ³•ä¸€ï¼š"><a href="#æ–¹æ³•ä¸€ï¼š" class="headerlink" title="æ–¹æ³•ä¸€ï¼š"></a>æ–¹æ³•ä¸€ï¼š</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> keras.backend.tensorflow_backend <span class="keyword">as</span> KTF</span><br><span class="line"> </span><br><span class="line">KTF.set_session(tf.Session(config=tf.ConfigProto(device_count=&#123;<span class="string">'gpu'</span>:<span class="number">0</span>&#125;)))</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œåœ¨tensorflow2.0ä¸­è‚¯å®šæŠ¥é”™<br>ä¿®æ”¹å¦‚ä¸‹ï¼š<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> keras.backend.tensorflow_backend <span class="keyword">as</span> KTF</span><br><span class="line"> </span><br><span class="line">KTF.set_session(tf.compat.v1.Session(config=tf.compat.v1.ConfigProto(device_count=&#123;<span class="string">'gpu'</span>:<span class="number">0</span>&#125;)))</span><br></pre></td></tr></table></figure><br>ç„¶è€Œè¿™æ ·è¿˜æ˜¯ä¸è¡Œï¼Œå°±æ˜¯å‘Šè¯‰ä½ tensorflow2.0ä¸­ä¸èƒ½è¿™æ ·ç”¨<br>é‚æ”¾å¼ƒ</p>
<h3 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">CUDA_VISIBLE_DEVICES=0 python3 xxx.py</span><br></pre></td></tr></table></figure>
<p>è²Œä¼¼å¯è¡Œ<br><img src="https://www.guanacossj.com/media/articlebodypics/1575618190733.jpg" alt=""></p>
]]></content>
      <tags>
        <tag>keras</tag>
        <tag>tensorflow</tag>
        <tag>gpu</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcode[840]Magic-Squares-In-Grid</title>
    <url>/2019/12/04/Leetcode840Magic-Squares-In-Grid/</url>
    <content><![CDATA[<p>python3æš´åŠ›è§£ï¼Œä¸éš¾çœ‹æ‡‚<br><a id="more"></a><br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">numMagicSquaresInside</span><span class="params">(self, grid)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type grid: List[List[int]]</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line"></span><br><span class="line">        grids = self.generate_matrix(grid)</span><br><span class="line"></span><br><span class="line">        count  = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> grids:</span><br><span class="line">            <span class="keyword">if</span> self.checkmagic(i) == <span class="literal">True</span> <span class="keyword">and</span> self.checksame(i) == <span class="literal">True</span>:</span><br><span class="line">                count = count + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> count</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">generate_matrix</span><span class="params">(self, grid)</span>:</span></span><br><span class="line">        all = []</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç”Ÿæˆæ‰€æœ‰çŸ©é˜µç»„åˆ</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> n <span class="keyword">in</span> range(len(grid[<span class="number">0</span>])<span class="number">-2</span>):</span><br><span class="line">            temmatrix = []</span><br><span class="line">            <span class="keyword">for</span> m <span class="keyword">in</span> range(len(grid)<span class="number">-2</span>):</span><br><span class="line">                tem = []</span><br><span class="line">                tem.append(grid[m][n:n + <span class="number">3</span>])</span><br><span class="line">                tem.append(grid[m + <span class="number">1</span>][n:n + <span class="number">3</span>])</span><br><span class="line">                tem.append(grid[m + <span class="number">2</span>][n:n + <span class="number">3</span>])</span><br><span class="line">                temmatrix.append(tem)</span><br><span class="line">            <span class="keyword">for</span> o <span class="keyword">in</span> range(len(temmatrix)):</span><br><span class="line">                all.append(temmatrix[o])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> all</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">checksame</span><span class="params">(self,matrix)</span>:</span></span><br><span class="line">        l = len(matrix)</span><br><span class="line">        flag = <span class="literal">True</span></span><br><span class="line">        tem = []</span><br><span class="line">        <span class="keyword">for</span> g <span class="keyword">in</span> range(l):</span><br><span class="line">            <span class="keyword">for</span> h <span class="keyword">in</span> range(l):</span><br><span class="line">                tem.append(matrix[g][h])</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> tem:</span><br><span class="line">            <span class="keyword">if</span> i &gt;= <span class="number">10</span>:</span><br><span class="line">                flag = <span class="literal">False</span>        </span><br><span class="line">        <span class="keyword">if</span> len(set(tem)) == <span class="number">1</span>:</span><br><span class="line">            flag = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">return</span> flag</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">checkmagic</span><span class="params">(self, matrix)</span>:</span></span><br><span class="line">        l = len(matrix)</span><br><span class="line"></span><br><span class="line">        flag = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ–œ</span></span><br><span class="line">        tmp = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(l):</span><br><span class="line">            tmp += matrix[i][i]</span><br><span class="line">        <span class="keyword">if</span> tmp != <span class="number">15</span>:</span><br><span class="line">            flag = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># è¡Œ</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(l):</span><br><span class="line">            tmp = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(l):</span><br><span class="line">                tmp += matrix[i][j]</span><br><span class="line">            <span class="keyword">if</span> tmp != <span class="number">15</span>:</span><br><span class="line">                flag = <span class="literal">False</span></span><br><span class="line">        <span class="comment"># åˆ—</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(l):</span><br><span class="line">            tmp = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(l):</span><br><span class="line">                tmp += matrix[j][i]</span><br><span class="line">            <span class="keyword">if</span> tmp != <span class="number">15</span>:</span><br><span class="line">                flag = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">return</span> flag</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    Solution().numMagicSquaresInside(</span><br><span class="line">        [[<span class="number">4</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">4</span>],</span><br><span class="line">         [<span class="number">9</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">9</span>],</span><br><span class="line">         [<span class="number">2</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">2</span>]]</span><br><span class="line">    )</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>Leetcode</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>Learn-Pytorch-åŸºæœ¬æ•°æ®ç±»å‹</title>
    <url>/2019/12/03/Learn-Pytorch-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</url>
    <content><![CDATA[<p>æœ¬æ–‡ä¸»è¦ä»‹ç»pytochå’Œnumpyçš„æ•°æ®ä¹‹é—´çš„è½¬åŒ–å’Œpytorchä¸­å¼ é‡tensorçš„ä½¿ç”¨<br><a id="more"></a></p>
<h4 id="ä½¿ç”¨numpyæ–°å»ºä¸€ä¸ªä¸€ç»´æ•°ç»„"><a href="#ä½¿ç”¨numpyæ–°å»ºä¸€ä¸ªä¸€ç»´æ•°ç»„" class="headerlink" title="ä½¿ç”¨numpyæ–°å»ºä¸€ä¸ªä¸€ç»´æ•°ç»„"></a>ä½¿ç”¨numpyæ–°å»ºä¸€ä¸ªä¸€ç»´æ•°ç»„</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">np_data = np.arange(<span class="number">6</span>)</span><br><span class="line">print(np_data,type(np_data))</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[0 1 2 3 4 5] &lt;class 'numpy.ndarray'&gt;</span><br></pre></td></tr></table></figure>
<h4 id="æŠŠæ•°ç»„è½¬åŒ–ä¸ºäºŒç»´"><a href="#æŠŠæ•°ç»„è½¬åŒ–ä¸ºäºŒç»´" class="headerlink" title="æŠŠæ•°ç»„è½¬åŒ–ä¸ºäºŒç»´"></a>æŠŠæ•°ç»„è½¬åŒ–ä¸ºäºŒç»´</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">np_data = np.arange(<span class="number">6</span>)</span><br><span class="line">print(np_data,type(np_data))</span><br><span class="line">np_data = np_data.reshape((<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line">print(np_data,type(np_data))</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[0 1 2 3 4 5] &lt;class 'numpy.ndarray'&gt;</span><br><span class="line">[[0 1 2]</span><br><span class="line"> [3 4 5]] &lt;class 'numpy.ndarray'&gt;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ—¶å€™å¯ä»¥çœ‹åˆ°ï¼Œæ•°ç»„å˜ä¸ºäºŒç»´çš„äº†ï¼Œä¸¤è¡Œä¸‰åˆ—</p>
<h4 id="æŠŠäºŒç»´æ•°ç»„è½¬åŒ–ä¸ºtensor"><a href="#æŠŠäºŒç»´æ•°ç»„è½¬åŒ–ä¸ºtensor" class="headerlink" title="æŠŠäºŒç»´æ•°ç»„è½¬åŒ–ä¸ºtensor"></a>æŠŠäºŒç»´æ•°ç»„è½¬åŒ–ä¸ºtensor</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">np_data = np.arange(<span class="number">6</span>).reshape((<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line">torch_data = torch.from_numpy(np_data)</span><br><span class="line">print(</span><br><span class="line">    <span class="string">'\nnumpy:'</span>, np_data,</span><br><span class="line">    <span class="string">'\ntorch:'</span>, torch_data,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">numpy: [[0 1 2]</span><br><span class="line"> [3 4 5]] </span><br><span class="line">torch: tensor([[0, 1, 2],</span><br><span class="line">        [3, 4, 5]])</span><br></pre></td></tr></table></figure>
<h4 id="æŠŠtensorè½¬ä¸ºæ•°ç»„"><a href="#æŠŠtensorè½¬ä¸ºæ•°ç»„" class="headerlink" title="æŠŠtensorè½¬ä¸ºæ•°ç»„"></a>æŠŠtensorè½¬ä¸ºæ•°ç»„</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">np_data = np.arange(<span class="number">6</span>).reshape((<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line">torch_data = torch.from_numpy(np_data)</span><br><span class="line">tensor2array = torch_data.numpy()</span><br><span class="line">print(</span><br><span class="line">    <span class="string">'\nnumpy:'</span>, np_data,</span><br><span class="line">    <span class="string">'\ntorch:'</span>, torch_data,</span><br><span class="line">    <span class="string">'\ntensor2array'</span>, tensor2array,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">numpy: [[0 1 2]</span><br><span class="line"> [3 4 5]] </span><br><span class="line">torch: tensor([[0, 1, 2],</span><br><span class="line">        [3, 4, 5]]) </span><br><span class="line">tensor2array [[0 1 2]</span><br><span class="line"> [3 4 5]]</span><br></pre></td></tr></table></figure>
<h4 id="éšæœºåˆ›å»ºä¸€ä¸ªäºŒç»´tensor"><a href="#éšæœºåˆ›å»ºä¸€ä¸ªäºŒç»´tensor" class="headerlink" title="éšæœºåˆ›å»ºä¸€ä¸ªäºŒç»´tensor"></a>éšæœºåˆ›å»ºä¸€ä¸ªäºŒç»´tensor</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">torch_data = torch.randn(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">print(</span><br><span class="line">    <span class="string">'\ntorch_data:'</span>,torch_data</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">torch_data: tensor([[ 0.1533, -0.1010,  1.8385],</span><br><span class="line">        [-1.0455,  0.3707,  0.0191]])</span><br></pre></td></tr></table></figure>
<h4 id="æ„é€ åˆå§‹åŒ–ä¸º0ï¼Œ1çš„tensor"><a href="#æ„é€ åˆå§‹åŒ–ä¸º0ï¼Œ1çš„tensor" class="headerlink" title="æ„é€ åˆå§‹åŒ–ä¸º0ï¼Œ1çš„tensor"></a>æ„é€ åˆå§‹åŒ–ä¸º0ï¼Œ1çš„tensor</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">torch_data_0 = torch.zeros(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">torch_data_1 = torch.ones(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">print(</span><br><span class="line">    <span class="string">'\ntorch_data_0:'</span>,torch_data_0,</span><br><span class="line">    <span class="string">'\ntorch_data_1:'</span>,torch_data_1,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">torch_data_0: tensor([[0., 0., 0.],</span><br><span class="line">        [0., 0., 0.]]) </span><br><span class="line">torch_data_1: tensor([[1., 1., 1.],</span><br><span class="line">        [1., 1., 1.]])</span><br></pre></td></tr></table></figure>
<h4 id="ä»pythonåˆ—è¡¨ç›´æ¥æ„é€ tensor"><a href="#ä»pythonåˆ—è¡¨ç›´æ¥æ„é€ tensor" class="headerlink" title="ä»pythonåˆ—è¡¨ç›´æ¥æ„é€ tensor"></a>ä»pythonåˆ—è¡¨ç›´æ¥æ„é€ tensor</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">torch_data_from_list = torch.Tensor([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]])</span><br><span class="line">print(</span><br><span class="line">    <span class="string">'\ntorch_data_from_list:'</span>,torch_data_from_list,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">torch_data_from_list: tensor([[1., 2., 3.],</span><br><span class="line">        [4., 5., 6.]])</span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨pytorchä¸­ï¼Œé»˜è®¤çš„æ•°æ®ç±»å‹å°±æ˜¯torch.FloatTensorï¼Œæ‰€ä»¥åœ¨è¿™é‡Œtorch.FloatTensorå°±ç­‰äºtorch.Tensor<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">torch_data_from_list = torch.Tensor([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]])</span><br><span class="line">torch_data_from_list_32 = torch.FloatTensor([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]])</span><br><span class="line">print(</span><br><span class="line">    <span class="string">'\ntorch_data_from_list:'</span>,torch_data_from_list,</span><br><span class="line">    <span class="string">'\ntorch_data_from_list_32'</span>,torch_data_from_list_32</span><br><span class="line">)</span><br></pre></td></tr></table></figure><br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">torch_data_from_list: tensor([[1., 2., 3.],</span><br><span class="line">        [4., 5., 6.]]) </span><br><span class="line">torch_data_from_list_32 tensor([[1., 2., 3.],</span><br><span class="line">        [4., 5., 6.]])</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>Pytorch</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title>Pytorchä¸­çš„LSTMçš„ç†è§£</title>
    <url>/2019/12/03/Pytorch%E4%B8%AD%E7%9A%84LSTM%E7%9A%84%E7%90%86%E8%A7%A3/</url>
    <content><![CDATA[<p>æœ¬æ–‡è½¬è½½äº<a href="https://zhuanlan.zhihu.com/p/41261640" target="_blank" rel="noopener" title="https://zhuanlan.zhihu.com/p/41261640">https://zhuanlan.zhihu.com/p/41261640</a><br><a id="more"></a></p>
<h4 id="å‚æ•°åˆ—è¡¨"><a href="#å‚æ•°åˆ—è¡¨" class="headerlink" title="å‚æ•°åˆ—è¡¨"></a>å‚æ•°åˆ—è¡¨</h4><ul>
<li>input_sizeï¼šxçš„ç‰¹å¾ç»´åº¦</li>
<li>hidden_sizeï¼šéšè—å±‚çš„ç‰¹å¾ç»´åº¦</li>
<li>num_layersï¼šlstméšå±‚çš„å±‚æ•°ï¼Œé»˜è®¤ä¸º1</li>
<li>biasï¼šFalseåˆ™bih=0å’Œbhh=0. é»˜è®¤ä¸ºTrue</li>
<li>batch_firstï¼šTrueåˆ™è¾“å…¥è¾“å‡ºçš„æ•°æ®æ ¼å¼ä¸º (batch, seq, feature)</li>
<li>dropoutï¼šé™¤æœ€åä¸€å±‚ï¼Œæ¯ä¸€å±‚çš„è¾“å‡ºéƒ½è¿›è¡Œdropoutï¼Œé»˜è®¤ä¸º: 0</li>
<li>bidirectionalï¼šTrueåˆ™ä¸ºåŒå‘lstmé»˜è®¤ä¸ºFalse</li>
<li>è¾“å…¥ï¼šinput, (h0, c0)</li>
<li>è¾“å‡ºï¼šoutput, (hn,cn)</li>
</ul>
<h4 id="è¾“å…¥æ•°æ®æ ¼å¼"><a href="#è¾“å…¥æ•°æ®æ ¼å¼" class="headerlink" title="è¾“å…¥æ•°æ®æ ¼å¼"></a>è¾“å…¥æ•°æ®æ ¼å¼</h4><ul>
<li>input(seq_len, batch, input_size)</li>
<li>h0(num_layers * num_directions, batch, hidden_size)</li>
<li>c0(num_layers * num_directions, batch, hidden_size)</li>
</ul>
<h4 id="è¾“å‡ºæ•°æ®æ ¼å¼ï¼š"><a href="#è¾“å‡ºæ•°æ®æ ¼å¼ï¼š" class="headerlink" title="è¾“å‡ºæ•°æ®æ ¼å¼ï¼š"></a>è¾“å‡ºæ•°æ®æ ¼å¼ï¼š</h4><ul>
<li>output(seq_len, batch, hidden_size * num_directions)</li>
<li>hn(num_layers * num_directions, batch, hidden_size)</li>
<li>cn(num_layers * num_directions, batch, hidden_size)</li>
</ul>
<p>Pytorché‡Œçš„LSTMå•å…ƒæ¥å—çš„è¾“å…¥éƒ½å¿…é¡»æ˜¯3ç»´çš„å¼ é‡(Tensors).æ¯ä¸€ç»´ä»£è¡¨çš„æ„æ€ä¸èƒ½å¼„é”™ã€‚</p>
<p>ç¬¬ä¸€ç»´ä½“ç°çš„æ˜¯åºåˆ—ï¼ˆsequenceï¼‰ç»“æ„,ä¹Ÿå°±æ˜¯åºåˆ—çš„ä¸ªæ•°ï¼Œç”¨æ–‡ç« æ¥è¯´ï¼Œå°±æ˜¯æ¯ä¸ªå¥å­çš„é•¿åº¦ï¼Œå› ä¸ºæ˜¯å–‚ç»™ç½‘ç»œæ¨¡å‹ï¼Œä¸€èˆ¬éƒ½è®¾å®šä¸ºç¡®å®šçš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å–‚ç»™LSTMç¥ç»å…ƒçš„æ¯ä¸ªå¥å­çš„é•¿åº¦ï¼Œå½“ç„¶ï¼Œå¦‚æœæ˜¯å…¶ä»–çš„å¸¦æœ‰å¸¦æœ‰åºåˆ—å½¢å¼çš„æ•°æ®ï¼Œåˆ™è¡¨ç¤ºä¸€ä¸ªæ˜ç¡®åˆ†å‰²å•ä½é•¿åº¦ï¼Œ</p>
<p>ä¾‹å¦‚æ˜¯å¦‚æœæ˜¯è‚¡ç¥¨æ•°æ®å†…ï¼Œè¿™è¡¨ç¤ºç‰¹å®šæ—¶é—´å•ä½å†…ï¼Œæœ‰å¤šå°‘æ¡æ•°æ®ã€‚è¿™ä¸ªå‚æ•°ä¹Ÿå°±æ˜¯æ˜ç¡®è¿™ä¸ªå±‚ä¸­æœ‰å¤šå°‘ä¸ªç¡®å®šçš„å•å…ƒæ¥å¤„ç†è¾“å…¥çš„æ•°æ®ã€‚</p>
<p>ç¬¬äºŒç»´åº¦ä½“ç°çš„æ˜¯batch_sizeï¼Œä¹Ÿå°±æ˜¯ä¸€æ¬¡æ€§å–‚ç»™ç½‘ç»œå¤šå°‘æ¡å¥å­ï¼Œæˆ–è€…è‚¡ç¥¨æ•°æ®ä¸­çš„ï¼Œä¸€æ¬¡æ€§å–‚ç»™æ¨¡å‹å¤šå°‘æ˜¯ä¸ªæ—¶é—´å•ä½çš„æ•°æ®ï¼Œå…·ä½“åˆ°æ¯ä¸ªæ—¶åˆ»ï¼Œä¹Ÿå°±æ˜¯ä¸€æ¬¡æ€§å–‚ç»™ç‰¹å®šæ—¶åˆ»å¤„ç†çš„å•å…ƒçš„å•è¯æ•°æˆ–è€…è¯¥æ—¶åˆ»åº”è¯¥å–‚ç»™çš„è‚¡ç¥¨æ•°æ®çš„æ¡æ•°</p>
<p>ç¬¬ä¸‰ä½ä½“ç°çš„æ˜¯è¾“å…¥çš„å…ƒç´ ï¼ˆelements of inputï¼‰ï¼Œä¹Ÿå°±æ˜¯ï¼Œæ¯ä¸ªå…·ä½“çš„å•è¯ç”¨å¤šå°‘ç»´å‘é‡æ¥è¡¨ç¤ºï¼Œæˆ–è€…è‚¡ç¥¨æ•°æ®ä¸­ æ¯ä¸€ä¸ªå…·ä½“çš„æ—¶åˆ»çš„é‡‡é›†å¤šå°‘å…·ä½“çš„å€¼ï¼Œæ¯”å¦‚æœ€ä½ä»·ï¼Œæœ€é«˜ä»·ï¼Œå‡ä»·ï¼Œ5æ—¥å‡ä»·ï¼Œ10å‡ä»·ï¼Œç­‰ç­‰</p>
<p>H0-Hnæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå°±æ˜¯æ¯ä¸ªæ—¶åˆ»ä¸­é—´ç¥ç»å…ƒåº”è¯¥ä¿å­˜çš„è¿™ä¸€æ—¶åˆ»çš„æ ¹æ®è¾“å…¥å’Œä¸Šä¸€è¯¾çš„æ—¶å€™çš„ä¸­é—´çŠ¶æ€å€¼åº”è¯¥äº§ç”Ÿçš„æœ¬æ—¶åˆ»çš„çŠ¶æ€å€¼ï¼Œ</p>
<p>è¿™ä¸ªæ•°æ®å•å…ƒæ˜¯èµ·çš„ä½œç”¨å°±æ˜¯è®°å½•è¿™ä¸€æ—¶åˆ»ä¹‹å‰è€ƒè™‘åˆ°æ‰€æœ‰ä¹‹å‰è¾“å…¥çš„çŠ¶æ€å€¼ï¼Œå½¢çŠ¶åº”è¯¥æ˜¯å’Œç‰¹å®šæ—¶åˆ»çš„è¾“å‡ºä¸€è‡´</p>
<p>c0-cnå°±æ˜¯å¼€å…³ï¼Œå†³å®šæ¯ä¸ªç¥ç»å…ƒçš„éšè—çŠ¶æ€å€¼æ˜¯å¦ä¼šå½±å“çš„ä¸‹ä¸€æ—¶åˆ»çš„ç¥ç»å…ƒçš„å¤„ç†ï¼Œå½¢çŠ¶åº”è¯¥å’Œh0-hnä¸€è‡´ã€‚</p>
<p>å½“ç„¶å¦‚æœæ˜¯åŒå‘ï¼Œå’Œå¤šéšè—å±‚è¿˜åº”è¯¥è€ƒè™‘æ–¹å‘å’Œéšè—å±‚çš„å±‚æ•°ã€‚</p>
]]></content>
      <categories>
        <category>Pytorch</category>
      </categories>
      <tags>
        <tag>pytorch</tag>
        <tag>lstm</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcode[27]Remove Element</title>
    <url>/2019/12/02/Leetcode27Remove-Element/</url>
    <content><![CDATA[<p>leetcodeä¸Šä¸€é“ç®€å•é¢˜27.ç§»é™¤å…ƒç´ ï¼Œç»™å®šä¸€ä¸ªæ•°ç»„ nums å’Œä¸€ä¸ªå€¼ valï¼Œä½ éœ€è¦åŸåœ°ç§»é™¤æ‰€æœ‰æ•°å€¼ç­‰äº val çš„å…ƒç´ ï¼Œè¿”å›ç§»é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚<br><a id="more"></a><br>æ¯”è¾ƒå¸¸è§„çš„æƒ³æ³•<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">removeElement</span><span class="params">(self, nums, val)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :type val: int</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        k = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> nums:</span><br><span class="line">            <span class="keyword">if</span> i != val:</span><br><span class="line">                nums[k] = i</span><br><span class="line">                k += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> k</span><br></pre></td></tr></table></figure><br>å…¶å®pythonè‡ªå¸¦çš„popæ–¹æ³•ä¹Ÿå¾ˆå¥½ç”¨<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">removeElement</span><span class="params">(self, nums, val)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :type val: int</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># k = 0</span></span><br><span class="line">        <span class="comment"># for i in nums:</span></span><br><span class="line">        <span class="comment">#     if i != val:</span></span><br><span class="line">        <span class="comment">#         nums[k] = i</span></span><br><span class="line">        <span class="comment">#         k += 1</span></span><br><span class="line">        <span class="comment"># return k</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>):</span><br><span class="line">            <span class="keyword">if</span> nums[i] == val:</span><br><span class="line">                nums.pop(i)</span><br><span class="line">        <span class="keyword">return</span> len(nums)</span><br></pre></td></tr></table></figure><br>é‚£ä¸ºå•¥ä¸€å®šè¦é€†å‘å‘¢ï¼Ÿæ­£å‘ä¸å¯ä»¥ä¹ˆï¼Ÿè¿˜çœŸä¸è¡Œï¼Œå› ä¸ºè¿™ä¸ªå¾ªç¯çš„iæ˜¯å›ºå®šçš„ï¼Œå‡è®¾åˆ—è¡¨ä¸º[3,2,3,1,4,6,3,1]ï¼Œéœ€è¦ç§»é™¤çš„å…ƒç´ æ˜¯3ï¼Œæ­£å‘æ˜¯ä»0,1,â€¦,7,å½“ç§»é™¤è‡³å°‘ä¸€ä¸ªå…ƒç´ åï¼Œå°±æ— æ³•è®¿é—®ä¸‹æ ‡ä¸º7çš„å…ƒç´ ï¼Œå› ä¸ºä¸å­˜åœ¨äº†ï¼Œè€Œé€†å‘æ˜¯7,6,â€¦0ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œä¸‹æ ‡æ˜¯é€’å‡çš„ï¼Œå³ä½¿è¢«popäº†ï¼Œæ¥ä¸‹æ¥è®¿é—®çš„éƒ½æ˜¯æ¯”å®ƒå°çš„ä¸‹æ ‡ï¼Œä¸€å®šå­˜åœ¨ã€‚</p>
]]></content>
      <categories>
        <category>Leetcode</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>list</tag>
        <tag>pop</tag>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåˆ—è¡¨æ¨å¯¼å¼åŠå…¶ç®€å•åº”ç”¨</title>
    <url>/2019/12/02/python%E5%88%97%E8%A1%A8%E6%8E%A8%E5%AF%BC%E5%BC%8F%E5%8F%8A%E5%85%B6%E7%AE%80%E5%8D%95%E5%BA%94%E7%94%A8/</url>
    <content><![CDATA[<p>åˆ—è¡¨æ¨å¯¼å¼ï¼ˆåˆç§°åˆ—è¡¨è§£æå¼ï¼‰æä¾›äº†ä¸€ç§ç®€æ˜æ‰¼è¦çš„æ–¹æ³•æ¥åˆ›å»ºåˆ—è¡¨<br><a id="more"></a></p>
<h4 id="ä¸€ä¸ªç®€å•å¹³æ–¹"><a href="#ä¸€ä¸ªç®€å•å¹³æ–¹" class="headerlink" title="ä¸€ä¸ªç®€å•å¹³æ–¹"></a>ä¸€ä¸ªç®€å•å¹³æ–¹</h4><p>æ™®é€šforå¾ªç¯<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">5</span>):</span><br><span class="line">    print(i*i,end=<span class="string">''</span>)</span><br></pre></td></tr></table></figure><br>åˆ—è¡¨æ¨å¯¼å¼<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">res = [x*x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">5</span>)]</span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure></p>
<h4 id="æ‰§è¡Œé¡ºåº"><a href="#æ‰§è¡Œé¡ºåº" class="headerlink" title="æ‰§è¡Œé¡ºåº"></a>æ‰§è¡Œé¡ºåº</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[x*y <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">5</span>) <span class="keyword">if</span> x &gt; <span class="number">2</span> <span class="keyword">for</span> y <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">4</span>) <span class="keyword">if</span> y &lt; <span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<p>ç­‰ä»·äº<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">5</span>):</span><br><span class="line">    <span class="keyword">if</span> x &gt; <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">for</span> y <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">4</span>):</span><br><span class="line">            <span class="keyword">if</span> y &lt; <span class="number">3</span>:</span><br><span class="line">                <span class="keyword">return</span> x*y</span><br></pre></td></tr></table></figure></p>
<h4 id="leetcode17ç”µè¯å·ç çš„å­—æ¯ç»„åˆ"><a href="#leetcode17ç”µè¯å·ç çš„å­—æ¯ç»„åˆ" class="headerlink" title="leetcode17ç”µè¯å·ç çš„å­—æ¯ç»„åˆ"></a>leetcode17ç”µè¯å·ç çš„å­—æ¯ç»„åˆ</h4><p>ç»™å®šä¸€ä¸ªä»…åŒ…å«æ•°å­— 2-9 çš„å­—ç¬¦ä¸²ï¼Œè¿”å›æ‰€æœ‰å®ƒèƒ½è¡¨ç¤ºçš„å­—æ¯ç»„åˆã€‚<br>ç»™å‡ºæ•°å­—åˆ°å­—æ¯çš„æ˜ å°„å¦‚ä¸‹ï¼ˆä¸ç”µè¯æŒ‰é”®ç›¸åŒï¼‰ã€‚æ³¨æ„ 1 ä¸å¯¹åº”ä»»ä½•å­—æ¯ã€‚<br><img src="https://www.guanacossj.com/media/articlebodypics/17_telephone_keypad.png" alt=""><br>è¿™é¢˜çœ‹èµ·æ¥é€’å½’æ¯”è¾ƒåˆé€‚ï¼Œä½†æ˜¯å¼ºè¡Œå¾ªç¯ä¹Ÿä¸æ˜¯ä¸å¯ä»¥<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">letterCombinations</span><span class="params">(self, digits)</span>:</span></span><br><span class="line">        m = &#123;</span><br><span class="line">            <span class="string">'2'</span>: list(<span class="string">'abc'</span>),</span><br><span class="line">            <span class="string">'3'</span>: list(<span class="string">'def'</span>),</span><br><span class="line">            <span class="string">'4'</span>: list(<span class="string">'ghi'</span>),</span><br><span class="line">            <span class="string">'5'</span>: list(<span class="string">'jkl'</span>),</span><br><span class="line">            <span class="string">'6'</span>: list(<span class="string">'mno'</span>),</span><br><span class="line">            <span class="string">'7'</span>: list(<span class="string">'pqrs'</span>),</span><br><span class="line">            <span class="string">'8'</span>: list(<span class="string">'tuv'</span>),</span><br><span class="line">            <span class="string">'9'</span>: list(<span class="string">'wxyz'</span>),</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> digits:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        res = [<span class="string">''</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> digits:</span><br><span class="line">            res = [x + y <span class="keyword">for</span> x <span class="keyword">in</span> res <span class="keyword">for</span> y <span class="keyword">in</span> m[i]]</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure><br>è¿™é‡Œçš„å¾ªç¯å…¶å®ä¸æ­¢ä¸¤å±‚ï¼Œå–å†³äºä½ è¾“å…¥çš„æ•°å­—çš„ä½æ•°ã€‚å¯ä»¥æ‰“å°è¾“å‡ºçœ‹ä¸€ä¸‹ï¼Œå‡è®¾è¾“å…¥çš„æ•°å­—æ˜¯234<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">['a', 'b', 'c']</span><br><span class="line">['ad', 'ae', 'af', 'bd', 'be', 'bf', 'cd', 'ce', 'cf']</span><br><span class="line">['adg', 'adh', 'adi', 'aeg', 'aeh', 'aei', 'afg', 'afh', 'afi', 'bdg', 'bdh', 'bdi', 'beg', 'beh', 'bei', 'bfg', 'bfh', 'bfi', 'cdg', 'cdh', 'cdi', 'ceg', 'ceh', 'cei', 'cfg', 'cfh', 'cfi']</span><br></pre></td></tr></table></figure><br>ç¬¬ä¸€ä¸ª2å¯¹åº”çš„å­—æ¯æ˜¯[â€˜aâ€™, â€˜bâ€™, â€˜câ€™]<br>ç¬¬äºŒä¸ª3å¯¹äºçš„å­—æ¯æ˜¯[â€˜dâ€™, â€˜eâ€™, â€˜fâ€™]<br>ç¬¬ä¸‰ä¸ª4å¯¹äºçš„å­—æ¯æ˜¯[â€˜gâ€™, â€˜hâ€™, â€˜iâ€™]<br>å¼€å§‹çš„æ—¶å€™resé•¿åº¦ä¸º1ï¼Œå¯ä»¥ç†è§£ä¸º<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">res = [<span class="string">''</span>]</span><br><span class="line">m = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> res:</span><br><span class="line">    tem = []</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> m:</span><br><span class="line">        res = x + y</span><br><span class="line">        tem.append(res)</span><br><span class="line">    print(tem)</span><br></pre></td></tr></table></figure><br>å½“æœ‰ä¸¤ä¸ªæ•°å­—æ—¶<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">res = [<span class="string">''</span>]</span><br><span class="line">m = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span><br><span class="line">n = [<span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>]</span><br><span class="line">tem = []</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> res:</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> m:</span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> n:</span><br><span class="line">            res = x + y + k</span><br><span class="line">            tem.append(res)</span><br><span class="line">    print(tem)</span><br></pre></td></tr></table></figure><br>è¿™æ ·ä¸€å±‚ä¸€å±‚åŠ ä¸‹å»å°±å¯ä»¥ï¼Œä¸è¿‡å³ä½¿çŸ¥é“è¦å¾ªç¯å‡ æ¬¡ï¼Œä¹Ÿå¾ˆéš¾è¡¨è¾¾å‡ºæ¥ï¼Œè¿™ä¸ªæ—¶å€™ç”¨åˆ—è¡¨æ¨å¯¼å¼å°±å¾ˆæ–¹ä¾¿</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>åˆ—è¡¨æ¨å¯¼å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>Flask-Vueå‰åç«¯åˆ†ç¦»ï¼ˆä¸€ï¼‰</title>
    <url>/2019/11/30/Flask-Vue%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<p>ç®€å•ä»‹ç»ä¸‹å¦‚ä½•åœ¨Pycharmä¸‹é›†æˆFlaskå’ŒVue<br><a id="more"></a></p>
<h4 id="æ–°å»ºflaské¡¹ç›®"><a href="#æ–°å»ºflaské¡¹ç›®" class="headerlink" title="æ–°å»ºflaské¡¹ç›®"></a>æ–°å»ºflaské¡¹ç›®</h4><p>ç•¥<br>æˆ‘è¿™é‡Œæ˜¯Jia-Prophet</p>
<h4 id="æ–°å»ºvueé¡¹ç›®"><a href="#æ–°å»ºvueé¡¹ç›®" class="headerlink" title="æ–°å»ºvueé¡¹ç›®"></a>æ–°å»ºvueé¡¹ç›®</h4><p>åœ¨Jia-Prophetç›®å½•ä¸‹<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vue init webpack jia-vue</span><br></pre></td></tr></table></figure><br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Arithmetic@qingjiaowosuanshujiadeMacBook-Pro Jia-Prophet % vue init webpack jia-vue</span><br><span class="line"></span><br><span class="line">? Project name jia-vue</span><br><span class="line">? Project description A Vue.js project</span><br><span class="line">? Author ArithmeticJia &lt;1097197237@qq.com&gt;</span><br><span class="line">? Vue build standalone</span><br><span class="line">? Install vue-router? Yes</span><br><span class="line">? Use ESLint to lint your code? No</span><br><span class="line">? Set up unit tests No</span><br><span class="line">? Setup e2e tests with Nightwatch? No</span><br><span class="line">? Should we run `npm install` for you after the project has been created? (recommended) n</span><br><span class="line">pm</span><br><span class="line"></span><br><span class="line">   vue-cli Â· Generated "jia-vue".</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Installing project dependencies ...</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ========================</span></span><br><span class="line"></span><br><span class="line">npm WARN deprecated extract-text-webpack-plugin@3.0.2: Deprecated. Please use https://github.com/webpack-contrib/mini-css-extract-plugin</span><br><span class="line">npm WARN deprecated browserslist@2.11.3: Browserslist 2 could fail on reading Browserslist &gt;3.0 config used in other tools.</span><br><span class="line">npm WARN deprecated bfj-node4@5.3.1: Switch to the `bfj` package for fixes and new features!</span><br><span class="line">npm WARN deprecated core-js@2.6.10: core-js@&lt;3.0 is no longer maintained and not recommended for usage due to the number of issues. Please, upgrade your dependencies to the actual version of core-js@3.</span><br><span class="line">npm WARN deprecated fsevents@1.2.9: One of your dependencies needs to upgrade to fsevents v2: 1) Proper nodejs v10+ support 2) No more fetching binaries from AWS, smaller package size</span><br><span class="line">npm WARN deprecated browserslist@1.7.7: Browserslist 2 could fail on reading Browserslist &gt;3.0 config used in other tools.</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> fsevents@1.2.9 install /Users/Arithmetic/PycharmProjects/Jia/Jia-Prophet/jia-vue/node_modules/fsevents</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> node install</span></span><br><span class="line"></span><br><span class="line">node-pre-gyp WARN Using needle for node-pre-gyp https download </span><br><span class="line">[fsevents] Success: "/Users/Arithmetic/PycharmProjects/Jia/Jia-Prophet/jia-vue/node_modules/fsevents/lib/binding/Release/node-v72-darwin-x64/fse.node" is installed via remote</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> core-js@2.6.10 postinstall /Users/Arithmetic/PycharmProjects/Jia/Jia-Prophet/jia-vue/node_modules/core-js</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> node postinstall || <span class="built_in">echo</span> <span class="string">"ignore"</span></span></span><br><span class="line"></span><br><span class="line">Thank you for using core-js ( https://github.com/zloirock/core-js ) for polyfilling JavaScript standard library!</span><br><span class="line"></span><br><span class="line">The project needs your help! Please consider supporting of core-js on Open Collective or Patreon: </span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> https://opencollective.com/core-js </span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> https://www.patreon.com/zloirock </span></span><br><span class="line"></span><br><span class="line">Also, the author of core-js ( https://github.com/zloirock ) is looking for a good job -)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> ejs@2.7.4 postinstall /Users/Arithmetic/PycharmProjects/Jia/Jia-Prophet/jia-vue/node_modules/ejs</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> node ./postinstall.js</span></span><br><span class="line"></span><br><span class="line">Thank you for installing EJS: built with the Jake JavaScript build tool (https://jakejs.com/)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> uglifyjs-webpack-plugin@0.4.6 postinstall /Users/Arithmetic/PycharmProjects/Jia/Jia-Prophet/jia-vue/node_modules/webpack/node_modules/uglifyjs-webpack-plugin</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> node lib/post_install.js</span></span><br><span class="line"></span><br><span class="line">npm notice created a lockfile as package-lock.json. You should commit this file.</span><br><span class="line">npm WARN ajv-keywords@3.4.1 requires a peer of ajv@^6.9.1 but none is installed. You must install peer dependencies yourself.</span><br><span class="line"></span><br><span class="line">added 1284 packages from 686 contributors and audited 11868 packages in 47.259s</span><br><span class="line"></span><br><span class="line">11 packages are looking for funding</span><br><span class="line">  run `npm fund` for details</span><br><span class="line"></span><br><span class="line">found 11 vulnerabilities (1 low, 6 moderate, 4 high)</span><br><span class="line">  run `npm audit fix` to fix them, or `npm audit` for details</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Project initialization finished!</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ========================</span></span><br><span class="line"></span><br><span class="line">To get started:</span><br><span class="line"></span><br><span class="line">  cd jia-vue</span><br><span class="line">  npm run dev</span><br><span class="line">  </span><br><span class="line">Documentation can be found at https://vuejs-templates.github.io/webpack</span><br></pre></td></tr></table></figure><br>ç„¶åæ‰§è¡Œ<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cnpm run build</span><br><span class="line">cnpm run dev</span><br></pre></td></tr></table></figure><br>è¿™é‡Œæˆ‘ä¹‹å‰æ¢æˆæ·˜å®æºäº†ï¼Œè¯¦è§ä¹‹å‰çš„æ•™ç¨‹<br>å¦‚æœæ²¡æœ‰é—®é¢˜çš„è¯ï¼Œè®¿é—® <a href="http://localhost:8080" target="_blank" rel="noopener">http://localhost:8080</a><br><img src="https://www.guanacossj.com/media/articlebodypics/1575129241168.jpg" alt=""></p>
<h4 id="ä¿®æ”¹ç¼–è¯‘ç”Ÿæˆçš„é™æ€æ–‡ä»¶"><a href="#ä¿®æ”¹ç¼–è¯‘ç”Ÿæˆçš„é™æ€æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹ç¼–è¯‘ç”Ÿæˆçš„é™æ€æ–‡ä»¶"></a>ä¿®æ”¹ç¼–è¯‘ç”Ÿæˆçš„é™æ€æ–‡ä»¶</h4><p>æ‰¾åˆ°jia-vue/config/index.jsæ–‡ä»¶ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">build: &#123;</span><br><span class="line">    // Template for index.html</span><br><span class="line">    index: path.resolve(__dirname, '../../templates/index.html'), //è¿™é‡Œæ˜¯index.htmlç”Ÿæˆçš„è·¯å¾„ï¼Œåœ¨templatesä¸‹</span><br><span class="line"></span><br><span class="line">    // Paths</span><br><span class="line">    assetsRoot: path.resolve(__dirname, '../../static'), //è¿™é‡ŒæŒ‡å®švueç”Ÿæˆçš„jså’Œcssæ–‡ä»¶è·¯å¾„ä¸º/static/vue/</span><br><span class="line">    assetsSubDirectory: 'vue',</span><br><span class="line">    assetsPublicPath: '/static',</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Source Maps</span><br><span class="line">     */</span><br><span class="line"></span><br><span class="line">    productionSourceMap: true,</span><br><span class="line">    // https://webpack.js.org/configuration/devtool/#production</span><br><span class="line">    devtool: '#source-map',</span><br><span class="line"></span><br><span class="line">    // Gzip off by default as many popular static hosts such as</span><br><span class="line">    // Surge or Netlify already gzip all static assets for you.</span><br><span class="line">    // Before setting to `true`, make sure to:</span><br><span class="line">    // npm install --save-dev compression-webpack-plugin</span><br><span class="line">    productionGzip: false,</span><br><span class="line">    productionGzipExtensions: ['js', 'css'],</span><br><span class="line"></span><br><span class="line">    // Run the build command with an extra argument to</span><br><span class="line">    // View the bundle analyzer report after build finishes:</span><br><span class="line">    // `npm run build --report`</span><br><span class="line">    // Set to `true` or `false` to always turn it on or off</span><br><span class="line">    bundleAnalyzerReport: process.env.npm_config_report</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>Flask</category>
      </categories>
      <tags>
        <tag>flask</tag>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu16.04.5LTSå®‰è£…SVN</title>
    <url>/2019/11/30/Ubuntu16.04.5LTS%E5%AE%89%E8%A3%85SVN/</url>
    <content><![CDATA[<p>æœ¬æ–‡ç®€å•ä»‹ç»Ubuntuç³»ç»Ÿä¸‹SVNçš„æ­å»ºè¿‡ç¨‹<br><a id="more"></a></p>
<h4 id="æ›´æ–°æº"><a href="#æ›´æ–°æº" class="headerlink" title="æ›´æ–°æº"></a>æ›´æ–°æº</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure>
<h4 id="å®‰è£…SVN"><a href="#å®‰è£…SVN" class="headerlink" title="å®‰è£…SVN"></a>å®‰è£…SVN</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt-get install subversion</span><br></pre></td></tr></table></figure>
<h4 id="åˆ›å»ºæ–‡ä»¶å¤¹"><a href="#åˆ›å»ºæ–‡ä»¶å¤¹" class="headerlink" title="åˆ›å»ºæ–‡ä»¶å¤¹"></a>åˆ›å»ºæ–‡ä»¶å¤¹</h4><figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line">sudo <span class="built_in">mkdir</span> /<span class="built_in">home</span>/svn</span><br><span class="line">sudo <span class="built_in">mkdir</span> /<span class="built_in">home</span>/svn/repository</span><br><span class="line">sudo chmod -R <span class="number">777</span> /<span class="built_in">home</span>/svn/repository</span><br><span class="line">sudo svnadmin create /<span class="built_in">home</span>/svn/repository</span><br><span class="line">cd /<span class="built_in">home</span>/svn/repository/</span><br><span class="line">sudo chmod -R <span class="number">777</span> db</span><br></pre></td></tr></table></figure>
<h4 id="ä¿®æ”¹svnserve-conf"><a href="#ä¿®æ”¹svnserve-conf" class="headerlink" title="ä¿®æ”¹svnserve.conf"></a>ä¿®æ”¹svnserve.conf</h4><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cd</span> /home/svn/repository/<span class="keyword">conf</span>/</span><br><span class="line">sudo <span class="keyword">vi</span> svnserve.<span class="keyword">conf</span></span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹è¿™å››è¡Œå¦‚ä¸‹æ‰€ç¤º<br>anon-access = none åŒ¿åç”¨æˆ·ä¸å¯è¯»<br>auth-access = write æƒé™ç”¨æˆ·å¯å†™<br>password-db = passwd å¯†ç æ–‡ä»¶ä¸ºpasswd<br>authz-db = authz æƒé™æ–‡ä»¶ä¸ºauthz<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## users have read and write access to the repository.</span></span></span><br><span class="line">anon-access = none</span><br><span class="line">auth-access = write</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## The password-db option controls the location of the password</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## database file.  Unless you specify a path starting with a /,</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## the file's location is relative to the directory containing</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## this configuration file.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## If SASL is enabled (see below), this file will NOT be used.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## Uncomment the line below to use the default password file.</span></span></span><br><span class="line">password-db = passwd</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## The authz-db option controls the location of the authorization</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## rules for path-based access control.  Unless you specify a path</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## starting with a /, the file's location is relative to the</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## directory containing this file.  The specified path may be a</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## repository relative URL (^/) or an absolute file:// URL to a text</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## file in a Subversion repository.  If you don't specify an authz-db,</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## no path-based access control is done.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## Uncomment the line below to use the default authorization file.</span></span></span><br><span class="line">authz-db = authz</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## The groups-db option controls the location of the groups file.</span></span></span><br></pre></td></tr></table></figure></p>
<h4 id="ä¿®æ”¹passwordæ–‡ä»¶ï¼Œæ·»åŠ è®¿é—®ç”¨æˆ·"><a href="#ä¿®æ”¹passwordæ–‡ä»¶ï¼Œæ·»åŠ è®¿é—®ç”¨æˆ·" class="headerlink" title="ä¿®æ”¹passwordæ–‡ä»¶ï¼Œæ·»åŠ è®¿é—®ç”¨æˆ·"></a>ä¿®æ”¹passwordæ–‡ä»¶ï¼Œæ·»åŠ è®¿é—®ç”¨æˆ·</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vi passwd</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[users]</span><br><span class="line"><span class="meta">#</span><span class="bash"> harry = harryssecret</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> sally = sallyssecret</span></span><br><span class="line">lidata = lidata429</span><br></pre></td></tr></table></figure>
<h4 id="ç»™ç”¨æˆ·å¢åŠ ç›®å½•æƒé™"><a href="#ç»™ç”¨æˆ·å¢åŠ ç›®å½•æƒé™" class="headerlink" title="ç»™ç”¨æˆ·å¢åŠ ç›®å½•æƒé™"></a>ç»™ç”¨æˆ·å¢åŠ ç›®å½•æƒé™</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vi authz</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[groups]</span><br><span class="line"><span class="meta">#</span><span class="bash"> harry_and_sally = harry,sally</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> harry_sally_and_joe = harry,sally,&amp;joe</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> [/foo/bar]</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> harry = rw</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &amp;joe = r</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> * =</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> [repository:/baz/fuz]</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> @harry_and_sally = rw</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> * = r</span></span><br><span class="line">[/]</span><br><span class="line">lidata=rw</span><br></pre></td></tr></table></figure>
<h4 id="å¯åŠ¨æœåŠ¡ï¼Œå¹¶ä¸”ç›‘å¬81ç«¯å£"><a href="#å¯åŠ¨æœåŠ¡ï¼Œå¹¶ä¸”ç›‘å¬81ç«¯å£" class="headerlink" title="å¯åŠ¨æœåŠ¡ï¼Œå¹¶ä¸”ç›‘å¬81ç«¯å£"></a>å¯åŠ¨æœåŠ¡ï¼Œå¹¶ä¸”ç›‘å¬81ç«¯å£</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo svnserve -d -r /home/svn --listen-port 81</span><br></pre></td></tr></table></figure>
<h4 id="æŸ¥çœ‹svnæ˜¯å¦å¯åŠ¨"><a href="#æŸ¥çœ‹svnæ˜¯å¦å¯åŠ¨" class="headerlink" title="æŸ¥çœ‹svnæ˜¯å¦å¯åŠ¨"></a>æŸ¥çœ‹svnæ˜¯å¦å¯åŠ¨</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ps -ef | grep svnserve</span><br></pre></td></tr></table></figure>
<h4 id="åœæ­¢æœåŠ¡"><a href="#åœæ­¢æœåŠ¡" class="headerlink" title="åœæ­¢æœåŠ¡"></a>åœæ­¢æœåŠ¡</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kill all svnserve</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>SVN</category>
      </categories>
      <tags>
        <tag>svn</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo-nextä¸»é¢˜æ”¯æŒæ•°å­¦å…¬å¼</title>
    <url>/2019/11/28/Hexo-next%E4%B8%BB%E9%A2%98%E6%94%AF%E6%8C%81%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F/</url>
    <content><![CDATA[<p>æœ¬æ–‡ä¸»è¦è§£å†³Hexo-nextä¸»é¢˜æ”¯æŒæ•°å­¦å…¬å¼é—®é¢˜<br><a id="more"></a></p>
<h4 id="æ›´æ¢Hexoçš„markdownæ¸²æŸ“å¼•æ“"><a href="#æ›´æ¢Hexoçš„markdownæ¸²æŸ“å¼•æ“" class="headerlink" title="æ›´æ¢Hexoçš„markdownæ¸²æŸ“å¼•æ“"></a>æ›´æ¢Hexoçš„markdownæ¸²æŸ“å¼•æ“</h4><p>hexo-renderer-kramedå¼•æ“æ˜¯åœ¨é»˜è®¤çš„æ¸²æŸ“å¼•æ“ï¼Œhexo-renderer-markedçš„åŸºç¡€ä¸Šä¿®æ”¹äº†ä¸€äº›bugï¼Œä¸¤è€…æ¯”è¾ƒæ¥è¿‘ï¼Œä¹Ÿæ¯”è¾ƒè½»é‡çº§ã€‚<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm uninstall hexo-renderer-marked --save</span><br><span class="line">npm install hexo-renderer-kramed --save</span><br></pre></td></tr></table></figure></p>
<h4 id="è§£å†³è¯­ä¹‰å†²çª"><a href="#è§£å†³è¯­ä¹‰å†²çª" class="headerlink" title="è§£å†³è¯­ä¹‰å†²çª"></a>è§£å†³è¯­ä¹‰å†²çª</h4><p>æ‰¾åˆ°<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">node_modules\kramed\lib\rules\inline.js</span><br></pre></td></tr></table></figure><br>ä¿®æ”¹å¦‚ä¸‹ä¸¤å¤„<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">//escape: /^\\([\\`*&#123;&#125;\[\]()#$+\-.!_&gt;])/,</span><br><span class="line">escape: /^\\([`*\[\]()#$+\-.!_&gt;])/,</span><br></pre></td></tr></table></figure><br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">//em: /^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,</span><br><span class="line">em: /^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,</span><br></pre></td></tr></table></figure></p>
<h4 id="åœ¨nextä¸»é¢˜ä¸­å¼€å¯mathJaxå¼€å…³"><a href="#åœ¨nextä¸»é¢˜ä¸­å¼€å¯mathJaxå¼€å…³" class="headerlink" title="åœ¨nextä¸»é¢˜ä¸­å¼€å¯mathJaxå¼€å…³"></a>åœ¨nextä¸»é¢˜ä¸­å¼€å¯mathJaxå¼€å…³</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Math Formulas Render Support</span></span><br><span class="line">math:</span><br><span class="line"><span class="meta">  #</span><span class="bash"> Default (<span class="literal">true</span>) will load mathjax / katex script on demand.</span></span><br><span class="line"><span class="meta">  #</span><span class="bash"> That is it only render those page <span class="built_in">which</span> has `mathjax: <span class="literal">true</span>` <span class="keyword">in</span> Front-matter.</span></span><br><span class="line"><span class="meta">  #</span><span class="bash"> If you <span class="built_in">set</span> it to <span class="literal">false</span>, it will load mathjax / katex srcipt EVERY PAGE.</span></span><br><span class="line">  per_page: true</span><br><span class="line">  engine: mathjax   # æ·»åŠ è¿™ä¸ªï¼Œåæ­£æˆ‘çš„ä¸»é¢˜é»˜è®¤æ²¡æœ‰è¿™ä¸€è¡Œ</span><br><span class="line"><span class="meta">  #</span><span class="bash"> hexo-renderer-pandoc (or hexo-renderer-kramed) required <span class="keyword">for</span> full MathJax support.</span></span><br><span class="line">  mathjax:</span><br><span class="line">    enable: true    # è¿™ä¸ªæ”¹ä¸ºtrue</span><br><span class="line">    # See: https://mhchem.github.io/MathJax-mhchem/</span><br><span class="line">    mhchem: true    # è¿™ä¸ªæ”¹ä¸ºtrue</span><br><span class="line"></span><br><span class="line"><span class="meta">  #</span><span class="bash"> hexo-renderer-markdown-it-plus (or hexo-renderer-markdown-it with markdown-it-katex plugin) required <span class="keyword">for</span> full Katex support.</span></span><br><span class="line">  katex:</span><br><span class="line">    enable: false</span><br><span class="line">    # See: https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex</span><br><span class="line">    copy_tex: false</span><br></pre></td></tr></table></figure>
<h4 id="æ‰“å¼€mathjaxå¼€å…³"><a href="#æ‰“å¼€mathjaxå¼€å…³" class="headerlink" title="æ‰“å¼€mathjaxå¼€å…³"></a>æ‰“å¼€mathjaxå¼€å…³</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: Using-Machine-Learning-for-Data-Center-Cooling-Infrastructure-Efficiency-Prediction</span><br><span class="line">date: 2019-11-28 22:53:32</span><br><span class="line">tags: [datacenter, machinelearning]</span><br><span class="line">category: DataCenter</span><br><span class="line">mathjax: true</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<h4 id="æ·»åŠ å…¬å¼"><a href="#æ·»åŠ å…¬å¼" class="headerlink" title="æ·»åŠ å…¬å¼"></a>æ·»åŠ å…¬å¼</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">$</span></span><br><span class="line">COP = \frac&#123;Q_&#123;CoolingCircuits&#125;&#125;&#123;P_&#123;CoolingCircuits&#125;&#125;</span><br><span class="line"><span class="meta">$</span><span class="bash">$</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
        <tag>markdown</tag>
        <tag>math</tag>
      </tags>
  </entry>
  <entry>
    <title>Using Machine Learning for Data Center Cooling Infrastructure Efficiency Prediction</title>
    <url>/2019/11/28/Using-Machine-Learning-for-Data-Center-Cooling-Infrastructure-Efficiency-Prediction/</url>
    <content><![CDATA[<p>Using Machine Learning for Data Center Cooling Infrastructure Efficiency Prediction<br><a id="more"></a></p>
<h4 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h4><p>Power consumption continues to remain a critical aspect for High Performance Computing (HPC) data centers. It becomes even more crucial for Exascale computing since scaling todayâ€™s fastest system to an Exaflop level would consume more than 168 MW power which is 8 times higher than the 20 MW power consumption goal set, at the time of this publication, by the US Department of Energy.</p>
<p>This naturally leads to a necessity for energy efficiency improvement that will encompass the full chain of the power consumers, starting from the data center infrastructure, including cooling overheads and electrical losses, up to compute resource scheduling and application scaling.</p>
<p>In this paper a machine learning approach is proposed to model the Coefficient of Performance (COP) of HPC data centerâ€™s hot water cooling loop. The suggested model is validated on operational data obtained at Leibniz Supercomputing Centre (LRZ). The paper shows how this COP model can help to improve the energy efficiency of modern HPC data centers.</p>
<h4 id="PUE"><a href="#PUE" class="headerlink" title="PUE"></a>PUE</h4><script type="math/tex; mode=display">
PUE = \frac{P_{Tocal}}{P_{IT}} = \frac{P_{cooling}+P_{IT}+P_{electricalLosses}+P_{misc}}{P_{IT}}</script><h4 id="COP"><a href="#COP" class="headerlink" title="COP"></a>COP</h4><ul>
<li>COP: Coefficient of Performance<script type="math/tex; mode=display">
COP = \frac{Q_{CoolingCircuits}}{P_{CoolingCircuits}}</script></li>
<li>$Q_{CoolingCircuits}$ - is the aggregated amount of cold generated by the four cooling circuits (measured in watts)</li>
<li>$P_{CoolingCircuits}$ - is the aggregated amount of power consumed by the four cooling circuits (measured in watts)</li>
</ul>
<p><img src="https://www.guanacossj.com/media/articlebodypics/1575015799772.jpg" alt=""></p>
<ul>
<li>T(WB):the wet bulb temperature</li>
<li>P(DC):the complete power consumption of the data center</li>
<li>P(SuperMUC IT):the power consumption profile of the deployed HPC system SuperMUC-Phase1</li>
<li>P(DC KT+I):the power consumption of the cooling infrastructure</li>
<li>P(Cluster IT):the power profile of an old HPC cluster system installed at LRZ</li>
<li>P(DC EV):the power losses from electrical distribution and conversion</li>
</ul>
<h4 id="WHY-COP"><a href="#WHY-COP" class="headerlink" title="WHY COP?"></a>WHY COP?</h4><p>A similar study using neural networks for predicting a datacenterâ€™s PUE was presented by Jim Gao from Google in [10].The study considered Google data centers where the author uses approximately 2 years of Googleâ€™s operational data for modeling the PUE. The main drawback of PUE is that it indicates the exact relation between the IT power consumption and the complete facility power consumption; implying that the more power is put into the IT equipment the better(optimal PUE is 1). If multiple cooling technologies are used(e.g. air cooling according to ASHRAE (American Society of Heating, Refrigerating and Air-Conditioning Engineers)[11] class A1 specifications (air cooling with 18 â—¦C - 27 â—¦C inlet temperature [12]), water cooling according to ASHRAE W1-W4 standards, etc.) PUE combines the COPs from all cooling technologies into one number. This makes it impossible to calculate cooling overheads for individual IT systems. This paper focuses on COP since COP reflects the impacts of various control parameters on the overall efficiency of the data center cooling infrastructure. This allows for the identification of key parameters and their optimal configuration for a given point in time.There are other studies that aim to model, simulate,and optimize the energy efficiency of modern HPC liquid cooled data centers with the help of multiphysical network simulators [13], [14], [15]. Using these studies, it might be 956 possible to formally describe the relationships in each part of the liquid cooling circuit and use statistical modeling for predicting the efficiency of the cooling infrastructure.These type of solutions can be: (a) time intensive and/or (b) erroneous since they could fail to completely capture the the complex interactions of various components affecting the overall efficiency of the cooling infrastructure. Examples of such complex interactions include the dynamic variation of ambient outside conditions combined with high fluctuating IT load on the cooling infrastructure.<br>This paper proposes a different approach - a neural network [16] based framework that learns from the actual operational data and aims to predict the impacts of various infrastructure configurations on the overall cooling efficiency of a typical HPC data center. With this approach, it is possible to capture the complex interactions of various aspects affecting the overall data center power/energy efficiency (as identified in Figure 4).</p>
<h4 id="SETUP-AT-LRZ"><a href="#SETUP-AT-LRZ" class="headerlink" title="SETUP AT LRZ"></a>SETUP AT LRZ</h4><h5 id="Hot-Water-Cooling-Circuit"><a href="#Hot-Water-Cooling-Circuit" class="headerlink" title="Hot Water Cooling Circuit"></a>Hot Water Cooling Circuit</h5><p>Figure 5 illustrates the schematic overview of LRZâ€™s chiller-less (also called hot water) cooling infrastructure, consisting of four identical cooling circuits. In this paper, the term â€hot waterâ€ refers to ASHRAEs W4 specification [11]. Each cooling circuit has a 2 MW wet cooling tower (KLT11, KLT12, KLT13, and KLT14). On average, at least two cooling circuits are active, the third and the fourth are added depending on the load.</p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/1575008791198.jpg" alt=""></p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/1575002886514.jpg" alt=""></p>
<ul>
<li>Subcircuit I: The water enters the cooling circuit from the distribution bar via a hydraulic gate. The water then flows with the help of a redundant pump pair to the heat exchanger and back again via a hydraulic gate to the distribution bar.</li>
<li>Subcircuit II: The ethylene glycol water mix (this mixture prevents the water from freezing) is pumped to the corresponding cooling tower (connection A) by two redundant pumps.</li>
</ul>
<p><img src="https://www.guanacossj.com/media/articlebodypics/1575002918635.jpg" alt=""></p>
<h4 id="The-COP-Network-Model-Design"><a href="#The-COP-Network-Model-Design" class="headerlink" title="The COP Network Model Design"></a>The COP Network Model Design</h4><p>Recurrent neural networks [19] are a special class of artificial neural networks where neuron-like units form directed cycles - introducing feedback and thus memory to the network. This allows a better capturing of the time evolution of the underlying discrete time random signals. The Long Short-Term Memory (LSTM) [20] networks, used in this paper, are a special class of recurrent neural networks that are capable of capturing behaviors having relatively long timelags.</p>
<h5 id="Inputs-to-the-model"><a href="#Inputs-to-the-model" class="headerlink" title="Inputs to the model:"></a>Inputs to the model:</h5><ul>
<li>aggregated amount of cold generated by each cooling circuit</li>
<li>aggregated amount of power consumed by the fans of each cooling tower </li>
<li>number of active cooling towers</li>
<li>wet bulb temperature<br>  æ¹¿çƒæ¸©åº¦æ˜¯æŒ‡åŒç­‰ç„“å€¼ç©ºæ°”çŠ¶æ€ä¸‹ï¼Œç©ºæ°”ä¸­æ°´è’¸æ±½è¾¾åˆ°é¥±å’Œæ—¶çš„ç©ºæ°”æ¸©åº¦ï¼Œåœ¨ç©ºæ°”ç„“æ¹¿å›¾ä¸Šæ˜¯ç”±ç©ºæ°”çŠ¶æ€ç‚¹æ²¿ç­‰ç„“çº¿ä¸‹é™è‡³100%ç›¸å¯¹æ¹¿åº¦çº¿ä¸Šï¼Œå¯¹åº”ç‚¹çš„å¹²çƒæ¸©åº¦ã€‚   </li>
<li>inlet water temperature (to the distribution bar) from each cooling circuit (Figure 6) (Ã—4)</li>
<li>return water temperature (to the distribution bar) to each cooling circuit (Figure 6) (Ã—4)</li>
</ul>
<h5 id="Output-of-the-model"><a href="#Output-of-the-model" class="headerlink" title="Output of the model:"></a>Output of the model:</h5><ul>
<li>COP of the hot water cooling loop</li>
</ul>
<p>And so, depending on the inlet temperature of the cooling towers, the fan speeds have to be adjusted to create the desired outlet temperature from the cooling tower. The efficiency of the cooling infrastructure will vary with fan speeds which leads to differences in the power consumption. This is why fan power is considered as an affecting factor to the COP of the cooling infrastructure.</p>
<h4 id="COP-Prediction-Results"><a href="#COP-Prediction-Results" class="headerlink" title="COP Prediction Results"></a>COP Prediction Results</h4><p>A network, with two hidden LSTM recurrent layers and a linear output layer, was created using Adam [23] as an optimizer. Figure 8 shows the COP prediction results for the complete year 2016 when the data for the complete year 2015 was learned.<br><img src="https://www.guanacossj.com/media/articlebodypics/1575005434173.jpg" alt=""></p>
<h4 id="REFINING-THE-INPUT-SET"><a href="#REFINING-THE-INPUT-SET" class="headerlink" title="REFINING THE INPUT SET"></a>REFINING THE INPUT SET</h4><p>Having shown that the neural network based COP prediction is possible, the follow up work focused on the improvement of its useability. The usage of the shown network is not very practical since a change in one of the input parameters (e.g. inlet water temperature entering the cooling circuit from the distribution bar) directly affects other input parameters (e.g. the amount of power consumed by the fans of the cooling towers).</p>
<h5 id="The-improved-COP-prediction-network"><a href="#The-improved-COP-prediction-network" class="headerlink" title="The improved COP prediction network"></a>The improved COP prediction network</h5><p>The list below indicates the refined set of input parameters:</p>
<ul>
<li>aggregated amount of cold generated by each cooling circuit</li>
<li>number of active cooling towers</li>
<li>inlet water temperature from each cooling circuit (Figure 6) (Ã—4)</li>
<li>return water temperature to each cooling circuit (Figure 6) (Ã—4)</li>
</ul>
<p>A. Deriving Wet Bulb Temperature<br>Wet bulb temperature can be derived analytically using the dry bulb temperature and the relative humidity using the formula presented in [24], which in their turn can also be made accessible from weather forecast frameworks.</p>
<p>B. Deriving Power of Cooling Tower Fans<br>In order to predict the power consumption of the cooling tower fans (each cooling tower in our case has two fans, Figure 7) the estimation of the water flow rates (before entering the hydraulic gate) is required in advance. This can be determined analytically via the following equation:</p>
<script type="math/tex; mode=display">
flowRate_{KLT_{i}} = \frac{Q_{KLT_{i}}}{c_{p}*\rho *\Delta{T_{KLT_{i}}}}</script><ul>
<li><p><script type="math/tex">QKLT_{i}</script>- is the amount of cold generated by the cooling circuit connected to $KLT_{i}$</p>
</li>
<li><p>$\Delta T_{KLT_{i}}$- is the temperature difference between inlet and return water (from and to the distribution bar correspondingly) for the cooling circuit connected to $KLT_{i}$</p>
</li>
<li><p>$c_{p}$- is the water specific heat capacity;</p>
</li>
<li><p>$\rho$- is the water density.</p>
</li>
</ul>
<p>Having estimated the water flow rates, a network with two hidden LSTM layers using Stochastic Gradient Decent [25] as an optimizer was built taking the following inputs:</p>
<ul>
<li>$QKLT_{i}$amount of generated cold for a given cooling circuit (1â‰¤ i â‰¤4)<script type="math/tex">KLT_{i}</script></li>
<li>$flowRate_{KLT_{i}}$ water flow rate (before entering the hydraulic gate) for a given cooling circuit (1â‰¤ i â‰¤4)<script type="math/tex">KLT_{i}</script></li>
</ul>
<p>C. Deriving Cold Generation from HPC Systemâ€™s Power Profile</p>
<p>Figure 13 shows the prediction results for the linear regression model that takes as an input the power consumption data of SuperMUC and outputs the aggregated amount of cold generated by all four cooling circuits. The power data for 2015 was learned and the amount of heat was predicted for 2016. As can be seen, the prediction has a relatively high accuracy.</p>
<p><img src="https://www.guanacossj.com/media/articlebodypics/1575010626556.jpg" alt=""></p>
]]></content>
      <categories>
        <category>Paper</category>
      </categories>
      <tags>
        <tag>datacenter</tag>
        <tag>machinelearning</tag>
      </tags>
  </entry>
  <entry>
    <title>Machine Learning Applications for Data Center Optimization</title>
    <url>/2019/11/28/Machine-Learning-Applications-for-Data-Center-Optimization/</url>
    <content><![CDATA[<p>Machine Learning Applications for Data Center Optimization<br><a id="more"></a></p>
<h4 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h4><p>The modern data center (DC) is a complex interaction of multiple mechanical, electrical and controls systems. The sheer number of possible operating configurations and nonlinear interdependencies make it difficult to understand and optimize energy efficiency. We develop a neural network framework that learns from actual operations data to model plant performance and predict PUE within a range of 0.004 +/Â­ 0.005 (mean absolute error +/Â­ 1 standard deviation), or 0.4% error for a PUE of 1.1. The model has been extensively tested and validated at Google DCs. The results demonstrate that machine learning is an effective way of leveraging existing sensor data to model DC performance and improve energy efficiency.</p>
<h4 id="Model-Implementation"><a href="#Model-Implementation" class="headerlink" title="Model Implementation"></a>Model Implementation</h4><p>A generic threeÂ­layered neural network is illustrated in Figure 2. In this study, the input matrix is an (m x n) array where is the number of training examples and is the number of features (DC input variables) including the IT load, weather conditions, number of chillers and cooling towers running, equipment setpoints, etc. The input matrix is then multiplied by the model parameters matrix Î¸ 1 to produce the hidden state matrix [6]. In practice, acts as an intermediary state that interacts with the second parameters matrix Î¸ 2 to calculate the output (x) [6]. The size and number of hidden layers can be varied to model systems of varying complexity.xmnxaahÎ¸<br>Note that (x) is the output variable of interest and can represent a range of metrics that we wish to optimize. PUE is selected here to represent DC operational efficiency, with recognition that the metric is a ratio and not indicative of total facilityÂ­level energy consumption. Other examples include using server utilization data to maximize machine productivity, or equipment failure data to understand how the DC environment impacts reliability. The neural network will search for relationships between data features to generate a mathematical model that describes (x) as a function of the inputs. Understanding the underlying mathematical behavior of (x) allows us to control and optimize it.hÎ¸hÎ¸hÎ¸<br><img src="https://www.guanacossj.com/media/articlebodypics/1574950962566.jpg" alt=""><br>The process of training a neural network model can be broken down into four steps, each of which are covered in greater detail below: </p>
<ul>
<li>Randomly initialize the model parameters Î¸ </li>
<li>Implement the forward propagation algorithm,</li>
<li>Compute the cost function (Î¸)</li>
<li>Implement the back propagation algorithm and (5) Repeat steps 2 Â­ 4 until convergence or the desired number of iterations</li>
</ul>
]]></content>
      <categories>
        <category>Paper</category>
      </categories>
      <tags>
        <tag>datacenter</tag>
        <tag>machinelearning</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoä¸ªäººåšå®¢æ­å»ºæ•™ç¨‹-ç™»å½•ç™»å‡ºæ¨¡å—</title>
    <url>/2019/11/28/Django%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B-%E7%99%BB%E5%BD%95%E7%99%BB%E5%87%BA%E6%A8%A1%E5%9D%97/</url>
    <content><![CDATA[<p>æœ¬æ–‡ä¸»è¦è®²è§£è‡ªå®šä¹‰çš„ç™»å½•ç™»å‡ºæ¨¡å—ï¼Œä¸æ¶‰åŠDjangoè‡ªå¸¦çš„è®¤è¯æ¨¡å—ï¼ŒåŒ…æ‹¬ç™»å½•æ£€æŸ¥è£…é¥°å™¨ã€é“¾æ¥è‡ªåŠ¨è·³è½¬ç™»å½•å‰urlç­‰<br><a id="more"></a></p>
<h4 id="models-py"><a href="#models-py" class="headerlink" title="models.py"></a>models.py</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BlogUser</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    <span class="string">'''ç”¨æˆ·è¡¨'''</span></span><br><span class="line"></span><br><span class="line">    gender = (</span><br><span class="line">        (<span class="string">'male'</span>,<span class="string">'ç”·'</span>),</span><br><span class="line">        (<span class="string">'female'</span>,<span class="string">'å¥³'</span>),</span><br><span class="line">    )</span><br><span class="line">    status = (</span><br><span class="line">        (<span class="string">'active'</span>,<span class="string">'æœ‰æ•ˆ'</span>),</span><br><span class="line">        (<span class="string">'disabled'</span>,<span class="string">'æ— æ•ˆ'</span>),</span><br><span class="line">    )</span><br><span class="line">    id = models.AutoField(primary_key=<span class="literal">True</span>)</span><br><span class="line">    name = models.CharField(max_length=<span class="number">128</span>,unique=<span class="literal">True</span>)</span><br><span class="line">    password = models.CharField(max_length=<span class="number">256</span>)</span><br><span class="line">    email = models.EmailField(unique=<span class="literal">True</span>)</span><br><span class="line">    sex = models.CharField(max_length=<span class="number">32</span>,choices=gender,default=<span class="string">'ç”·'</span>)</span><br><span class="line">    c_time = models.DateTimeField(auto_now_add=<span class="literal">True</span>)</span><br><span class="line">    userpic = models.ImageField(upload_to=<span class="string">'userpic'</span>,blank=<span class="literal">True</span>,null=<span class="literal">True</span>)</span><br><span class="line">    status = models.CharField(max_length=<span class="number">32</span>,choices=status,default=<span class="string">'æœ‰æ•ˆ'</span>)</span><br><span class="line">    brief = models.CharField(max_length=<span class="number">1024</span>,blank=<span class="literal">True</span>,null=<span class="literal">True</span>)</span><br><span class="line">    role = models.ManyToManyField(BlogRole, blank=<span class="literal">True</span>,null=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h4 id="views-py"><a href="#views-py" class="headerlink" title="views.py"></a>views.py</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_login</span><span class="params">(f)</span>:</span></span><br><span class="line"><span class="meta">    @wraps(f)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">(request, *arg, **kwargs)</span>:</span></span><br><span class="line">        next_url = request.path_info</span><br><span class="line">        print(next_url)</span><br><span class="line">        <span class="keyword">if</span> request.session.get(<span class="string">'is_login'</span>) == <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">return</span> f(request, *arg, **kwargs)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> redirect(<span class="string">'/JiaBlog/login/?next=%s'</span> % next_url)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login_view</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="comment"># å½“å‰ç«¯ç‚¹å‡»ç™»å½•æŒ‰é’®æ—¶ï¼Œæäº¤æ•°æ®åˆ°åç«¯ï¼Œè¿›å…¥è¯¥POSTæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">"POST"</span>:</span><br><span class="line">        <span class="comment"># è·å–ç”¨æˆ·åå’Œå¯†ç </span></span><br><span class="line">        username = request.POST.get(<span class="string">"username"</span>)</span><br><span class="line">        password = request.POST.get(<span class="string">"password"</span>)</span><br><span class="line">        <span class="comment"># åœ¨å‰ç«¯ä¼ å›æ—¶ä¹Ÿå°†è·³è½¬é“¾æ¥ä¼ å›æ¥</span></span><br><span class="line">        next_url = request.POST.get(<span class="string">"next_url"</span>)</span><br><span class="line">        print(next_url)</span><br><span class="line">        <span class="comment"># å¯¹ç”¨æˆ·è¿›è¡ŒéªŒè¯</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            user = models.BlogUser.objects.get(name=username)</span><br><span class="line">            <span class="keyword">if</span> user.status == <span class="string">'active'</span> <span class="keyword">or</span> user.status == <span class="string">'æœ‰æ•ˆ'</span>:</span><br><span class="line">                <span class="keyword">if</span> user.password == password:</span><br><span class="line">                    request.session[<span class="string">'is_login'</span>] = <span class="literal">True</span></span><br><span class="line">                    request.session[<span class="string">'user_id'</span>] = user.id</span><br><span class="line">                    request.session[<span class="string">'user_name'</span>] = user.name</span><br><span class="line">                    <span class="comment"># å¦‚æœè·³è½¬é“¾æ¥ä¸ä¸ºç©ºå¹¶ä¸”è·³è½¬é¡µé¢ä¸æ˜¯ç™»å‡ºé¡µé¢ï¼Œåˆ™ç™»å½•æˆåŠŸåè·³è½¬ï¼Œå¦åˆ™ç›´æ¥è¿›å…¥ä¸»é¡µ</span></span><br><span class="line">                    <span class="keyword">if</span> next_url <span class="keyword">and</span> next_url != <span class="string">"/JiaBlog/logout/"</span>:</span><br><span class="line">                        response = redirect(next_url)</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        response = redirect(<span class="string">"/JiaBlog/index/"</span>)</span><br><span class="line">                    <span class="keyword">return</span> response</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    message = <span class="string">"å¯†ç ä¸æ­£ç¡®ï¼"</span></span><br><span class="line">            <span class="comment"># è‹¥ç”¨æˆ·åæˆ–å¯†ç å¤±è´¥,åˆ™å°†æç¤ºè¯­ä¸è·³è½¬é“¾æ¥ç»§ç»­ä¼ é€’åˆ°å‰ç«¯</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                message = <span class="string">"ç”¨æˆ·çŠ¶æ€ä¿¡æ¯å¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜(18351922995)! "</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            message = <span class="string">"ç”¨æˆ·ä¸å­˜åœ¨ï¼"</span></span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">'login.html'</span>, locals())</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        next_url = request.GET.get(<span class="string">"next"</span>, <span class="string">''</span>)</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">"login.html"</span>, &#123;<span class="string">'next_url'</span>: next_url&#125;,locals())</span><br></pre></td></tr></table></figure>
<h4 id="urls-py"><a href="#urls-py" class="headerlink" title="urls.py"></a>urls.py</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">url(<span class="string">r'^login/$'</span>, views.login_view,name=<span class="string">'login'</span>),</span><br></pre></td></tr></table></figure>
<h4 id="login-html"><a href="#login-html" class="headerlink" title="login.html"></a>login.html</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">"form-signin"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"&#123;% url 'JiaBlog:login' %&#125;"</span>&gt;</span></span><br><span class="line">          &#123;% if message %&#125;</span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"alert alert-warning"</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          &#123;% endif %&#125;</span><br><span class="line">          &#123;% csrf_token %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"form-signin-heading"</span> <span class="attr">style</span>=<span class="string">"text-align: center"</span>&gt;</span>Sign In<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"inputEmail"</span> <span class="attr">class</span>=<span class="string">"sr-only"</span>&gt;</span>Email address<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"inputUsername"</span> <span class="attr">name</span>=<span class="string">'username'</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"Username"</span> <span class="attr">required</span> <span class="attr">autofocus</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"inputPassword"</span> <span class="attr">class</span>=<span class="string">"sr-only"</span>&gt;</span>Password<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">id</span>=<span class="string">"inputPassword"</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"Password"</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"display: none;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"next"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"next_url"</span> <span class="attr">value</span>=<span class="string">"&#123;&#123; next_url &#125;&#125;"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"checkbox"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"remember-me"</span>&gt;</span> Remember me</span><br><span class="line">          <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-lg btn-primary btn-block"</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>Sign in<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-signin"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-lg btn-primary btn-block"</span> <span class="attr">onclick</span>=<span class="string">"window.location.href = '/JiaBlog/register'"</span>&gt;</span>Register in<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align: center"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"display:inline-block;"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"iconfont icon-github"</span>&gt;</span>&amp;nbsp;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color: black;text-decoration: none;"</span> <span class="attr">href</span>=<span class="string">"&#123;% url "</span><span class="attr">social:begin</span>" "<span class="attr">github</span>" %&#125;"&gt;</span>GitHub<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"display:inline-block;"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"iconfont icon-weibo"</span>&gt;</span>&amp;nbsp;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color: black;text-decoration: none;"</span> <span class="attr">href</span>=<span class="string">"&#123;% url "</span><span class="attr">social:begin</span>" "<span class="attr">weibo</span>" %&#125;"&gt;</span>Weibo<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"display:inline-block;"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"iconfont icon-Facebook"</span>&gt;</span>&amp;nbsp;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color: black;text-decoration: none;"</span> <span class="attr">href</span>=<span class="string">"&#123;% url "</span><span class="attr">social:begin</span>" "<span class="attr">facebook</span>" %&#125;"&gt;</span>Facebook<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"display:inline-block;"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"iconfont icon-google"</span>&gt;</span>&amp;nbsp;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color: black;text-decoration: none;"</span> <span class="attr">href</span>=<span class="string">"&#123;% url "</span><span class="attr">social:begin</span>" "<span class="attr">google-oauth2</span>" %&#125;"&gt;</span>Google<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;#          <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align: center"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"iconfont icon-github"</span>&gt;</span>&amp;nbsp;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color: black;text-decoration: none;"</span> <span class="attr">href</span>=<span class="string">"&#123;% url "</span><span class="attr">social:begin</span>" "<span class="attr">facebook</span>" %&#125;"&gt;</span>Facebook Login<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>#&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"fb-root"</span> <span class="attr">style</span>=<span class="string">"text-align: center"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">defer</span> <span class="attr">crossorigin</span>=<span class="string">"anonymous"</span> <span class="attr">src</span>=<span class="string">"https://connect.facebook.net/zh_CN/sdk.js#xfbml=1&amp;version=v5.0&amp;appId=2513272488741954&amp;autoLogAppEvents=1"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"fb-login-button"</span> <span class="attr">data-width</span>=<span class="string">""</span> <span class="attr">data-size</span>=<span class="string">"medium"</span> <span class="attr">data-button-type</span>=<span class="string">"continue_with"</span> <span class="attr">data-auto-logout-link</span>=<span class="string">"true"</span> <span class="attr">data-use-continue-as</span>=<span class="string">"true"</span> <span class="attr">data-onlogin</span>=<span class="string">"checkLoginState()"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"status"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;#            <span class="tag">&lt;<span class="name">fb:login-button</span> <span class="attr">scope</span>=<span class="string">"public_profile,email"</span> <span class="attr">onlogin</span>=<span class="string">"checkLoginState();"</span>&gt;</span><span class="tag">&lt;/<span class="name">fb:login-button</span>&gt;</span>#&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="comment">&lt;!-- /container --&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>django</tag>
      </tags>
  </entry>
  <entry>
    <title>Flaskå…¥é—¨æ•™ç¨‹-æ•°æ®åº“è¿æ¥ä¸æ•°æ®æ¨¡å‹æ‹†åˆ†</title>
    <url>/2019/11/27/Flask%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E4%B8%8E%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%E6%8B%86%E5%88%86/</url>
    <content><![CDATA[<p>flask-SQLAlchemyæ˜¯ä¸€å¥—ORM(Object Relationship Mapping)æ¡†æ¶ï¼Œä¸­æ–‡ç¿»è¯‘å°±æ˜¯æ¨¡å‹å…³ç³»æ˜ å°„ï¼Œå°†æ•°æ®åº“è¡¨æ˜ å°„æˆpythonä¸­çš„å¯¹è±¡ï¼Œéå¸¸æ–¹ä¾¿ï¼Œåˆ›å»ºä¸€ä¸ªæ¨¡å‹ï¼Œæ¥é€šè¿‡æ¨¡å‹æ¥å¢åˆ æ”¹æ•°æ®åº“<br><a id="more"></a></p>
<h4 id="å®‰è£…flask-SQLAlchemy"><a href="#å®‰è£…flask-SQLAlchemy" class="headerlink" title="å®‰è£…flask-SQLAlchemy"></a>å®‰è£…flask-SQLAlchemy</h4><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="code"><pre><span class="line">pip3 install flask-SQLalchemy</span><br></pre></td></tr></table></figure>
<h4 id="å®‰è£…flask-mysqldb"><a href="#å®‰è£…flask-mysqldb" class="headerlink" title="å®‰è£…flask-mysqldb"></a>å®‰è£…flask-mysqldb</h4><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="code"><pre><span class="line">pip3 install flask-mysqldb</span><br></pre></td></tr></table></figure>
<p>ps: è²Œä¼¼ä¸è£…ä¹Ÿå¯ä»¥ï¼Œæˆ‘å‘ç°æˆ‘å°±æ²¡è£…</p>
<h4 id="å®‰è£…pymysql"><a href="#å®‰è£…pymysql" class="headerlink" title="å®‰è£…pymysql"></a>å®‰è£…pymysql</h4><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="code"><pre><span class="line">pip3 install pymysql</span><br></pre></td></tr></table></figure>
<h4 id="è¿æ¥æ•°æ®åº“"><a href="#è¿æ¥æ•°æ®åº“" class="headerlink" title="è¿æ¥æ•°æ®åº“"></a>è¿æ¥æ•°æ®åº“</h4><p>app.py<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,render_template</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"> </span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_DATABASE_URI'</span>] = <span class="string">"mysql+pymysql://root:123@127.0.0.1:3306/JiaBlog"</span></span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_COMMIT_TEARDOWN'</span>] = <span class="literal">True</span></span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_TRACK_MODIFICATIONS'</span>] = <span class="literal">False</span></span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_COMMIT_ON_TEARDOWN'</span>] = <span class="literal">True</span></span><br><span class="line">app.config[<span class="string">'JSON_AS_ASCII'</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Hello World!'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/index')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">'index.html'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app.run(debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure></p>
<h4 id="æ–°å»ºæ•°æ®åº“"><a href="#æ–°å»ºæ•°æ®åº“" class="headerlink" title="æ–°å»ºæ•°æ®åº“"></a>æ–°å»ºæ•°æ®åº“</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create database JiaBlog</span><br></pre></td></tr></table></figure>
<h4 id="æ‹†åˆ†models"><a href="#æ‹†åˆ†models" class="headerlink" title="æ‹†åˆ†models"></a>æ‹†åˆ†models</h4><p>åœ¨app.pyåŒçº§ç›®å½•ä¸‹æ–°å»ºmodels.py<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> app <span class="keyword">import</span> db</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Article</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">    <span class="comment"># å®šä¹‰è¡¨å</span></span><br><span class="line">    __tablename__ = <span class="string">'article'</span></span><br><span class="line">    <span class="comment"># å®šä¹‰å­—æ®µ</span></span><br><span class="line">    <span class="comment"># db.Column è¡¨ç¤ºæ˜¯ä¸€ä¸ªå­—æ®µ</span></span><br><span class="line">    id = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    title = db.Column(db.String(<span class="number">50</span>), unique=<span class="literal">True</span>)</span><br><span class="line">    content = db.Column(db.Text)</span><br><span class="line">    timestamp = db.Column(db.DateTime, default=datetime.utcnow)</span><br></pre></td></tr></table></figure><br>ä¿®æ”¹app.pyä»£ç å¦‚ä¸‹<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> models <span class="keyword">import</span> Article</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_DATABASE_URI'</span>] = <span class="string">"mysql+pymysql://root:980612ssj@%@101.132.70.184:3306/JiaBlog"</span></span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_COMMIT_TEARDOWN'</span>] = <span class="literal">True</span></span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_TRACK_MODIFICATIONS'</span>] = <span class="literal">False</span></span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_COMMIT_ON_TEARDOWN'</span>] = <span class="literal">True</span></span><br><span class="line">app.config[<span class="string">'JSON_AS_ASCII'</span>] = <span class="literal">False</span></span><br><span class="line">db.SQLAlchemy(app)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Hello World!'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure><br>å¯åŠ¨æŠ¥é”™<br><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="code"><pre><span class="line">ImportError: cannot import name 'db'</span><br></pre></td></tr></table></figure><br>è¿™æ˜¯å› ä¸ºåœ¨appæ–‡ä»¶ä¸­ï¼Œå’±ä»¬å¼•å…¥äº†from models import Articleï¼Œåœ¨models.pyä¸­å’±ä»¬å¼•å…¥äº†from app import dbï¼Œä¸¤ä¸ªæ–‡ä»¶ç›¸äº’å¼•ç”¨äº†ï¼Œè¿™ä¸ªå°±æ˜¯å¾ªç¯å¼•ç”¨ã€‚å‡ºç°å¾ªåå¼•ç”¨ï¼Œä»£ç å°±æ— æ³•æ­£å¸¸æ‰§è¡Œäº†ã€‚<br>ä¸ºäº†è§£å†³å¾ªç¯å¼•ç”¨ï¼Œé‚£ä¹ˆåªéœ€è¦ä¿è¯ä¸¤ä¸ªæ–‡ä»¶ä¸ç›¸äº’éƒ½éœ€è¦å¯¹æ–¹å°±è¡Œäº†ï¼Œè¿™æ—¶å€™å’±ä»¬å¯ä»¥åŠ å…¥ç¬¬ä¸‰ä¸ªæ–‡ä»¶ï¼Œè®©ä¸¤ä¸ªæ–‡ä»¶éƒ½éœ€è¦ç¬¬ä¸‰ä¸ªæ–‡ä»¶</p>
<h4 id="è§£å†³å¾ªç¯å¼•ç”¨"><a href="#è§£å†³å¾ªç¯å¼•ç”¨" class="headerlink" title="è§£å†³å¾ªç¯å¼•ç”¨"></a>è§£å†³å¾ªç¯å¼•ç”¨</h4><p>åœ¨app.pyåŒçº§ç›®å½•ä¸‹æ–°å¢exts.py<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"><span class="comment"># æ­¤æ—¶å…ˆä¸ä¼ å…¥app</span></span><br><span class="line">db = SQLAlchemy()</span><br></pre></td></tr></table></figure><br>ä¿®æ”¹model.py<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"><span class="keyword">from</span> exts <span class="keyword">import</span> db</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Article</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">    <span class="comment"># å®šä¹‰è¡¨å</span></span><br><span class="line">    __tablename__ = <span class="string">'article'</span></span><br><span class="line">    <span class="comment"># å®šä¹‰å­—æ®µ</span></span><br><span class="line">    <span class="comment"># db.Column è¡¨ç¤ºæ˜¯ä¸€ä¸ªå­—æ®µ</span></span><br><span class="line">    id = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    title = db.Column(db.String(<span class="number">50</span>), unique=<span class="literal">True</span>)</span><br><span class="line">    content = db.Column(db.Text)</span><br><span class="line">    timestamp = db.Column(db.DateTime, default=datetime.utcnow)</span><br></pre></td></tr></table></figure><br>ä¿®æ”¹app.py<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> exts <span class="keyword">import</span> db</span><br><span class="line"><span class="keyword">from</span> models <span class="keyword">import</span> Article</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_DATABASE_URI'</span>] = <span class="string">"mysql+pymysql://root:980612ssj@%@101.132.70.184:3306/JiaBlog"</span></span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_COMMIT_TEARDOWN'</span>] = <span class="literal">True</span></span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_TRACK_MODIFICATIONS'</span>] = <span class="literal">False</span></span><br><span class="line">app.config[<span class="string">'SQLALCHEMY_COMMIT_ON_TEARDOWN'</span>] = <span class="literal">True</span></span><br><span class="line">app.config[<span class="string">'JSON_AS_ASCII'</span>] = <span class="literal">False</span></span><br><span class="line">db.init_app(app)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Hello World!'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>Flask</category>
      </categories>
      <tags>
        <tag>flask</tag>
      </tags>
  </entry>
  <entry>
    <title>Flaskå…¥é—¨æ•™ç¨‹-ä½ çš„ç¬¬ä¸€ä¸ªflaskç¨‹åº</title>
    <url>/2019/11/27/Flask%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B-%E4%BD%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AAflask%E7%A8%8B%E5%BA%8F/</url>
    <content><![CDATA[<p>Flaskæ˜¯ç”±pythonå®ç°çš„ä¸€ä¸ªwebå¾®æ¡†æ¶ï¼Œè®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Pythonè¯­è¨€å¿«é€Ÿå®ç°ä¸€ä¸ªç½‘ç«™æˆ–WebæœåŠ¡<br><a id="more"></a></p>
<h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pip3 install flask</span><br></pre></td></tr></table></figure>
<h4 id="å·¥ç¨‹ç›®å½•ç¤ºä¾‹"><a href="#å·¥ç¨‹ç›®å½•ç¤ºä¾‹" class="headerlink" title="å·¥ç¨‹ç›®å½•ç¤ºä¾‹"></a>å·¥ç¨‹ç›®å½•ç¤ºä¾‹</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ <span class="selector-tag">app</span><span class="selector-class">.py</span></span><br><span class="line">â”œâ”€â”€ <span class="selector-tag">exts</span><span class="selector-class">.py</span></span><br><span class="line">â”œâ”€â”€ <span class="selector-tag">manage</span><span class="selector-class">.py</span></span><br><span class="line">â”œâ”€â”€ <span class="selector-tag">migrations</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ <span class="selector-tag">README</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ __<span class="selector-tag">pycache__</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ <span class="selector-tag">alembic</span><span class="selector-class">.ini</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ <span class="selector-tag">env</span><span class="selector-class">.py</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ <span class="selector-tag">script</span><span class="selector-class">.py</span><span class="selector-class">.mako</span></span><br><span class="line">â”‚Â Â  â””â”€â”€ <span class="selector-tag">versions</span></span><br><span class="line">â”œâ”€â”€ <span class="selector-tag">models</span><span class="selector-class">.py</span></span><br><span class="line">â”œâ”€â”€ <span class="selector-tag">prophet</span><span class="selector-class">.py</span></span><br><span class="line">â”œâ”€â”€ <span class="selector-tag">static</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ <span class="selector-tag">css</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ <span class="selector-tag">data</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ <span class="selector-tag">img</span></span><br><span class="line">â”‚Â Â  â””â”€â”€ <span class="selector-tag">js</span></span><br><span class="line">â””â”€â”€ <span class="selector-tag">templates</span></span><br><span class="line">    â”œâ”€â”€ <span class="selector-tag">imageinfo</span><span class="selector-class">.html</span></span><br><span class="line">    â”œâ”€â”€ <span class="selector-tag">imageinfogengduo</span><span class="selector-class">.html</span></span><br><span class="line">    â”œâ”€â”€ <span class="selector-tag">index</span><span class="selector-class">.html</span></span><br><span class="line">    â”œâ”€â”€ <span class="selector-tag">login</span><span class="selector-class">.html</span></span><br><span class="line">    â”œâ”€â”€ <span class="selector-tag">mp3info</span><span class="selector-class">.html</span></span><br><span class="line">    â”œâ”€â”€ <span class="selector-tag">test</span><span class="selector-class">.html</span></span><br><span class="line">    â””â”€â”€ <span class="selector-tag">videoinfo</span><span class="selector-class">.html</span></span><br></pre></td></tr></table></figure>
<h4 id="è¿”å›ä½ çš„ç¬¬ä¸€ä¸ªé¡µé¢"><a href="#è¿”å›ä½ çš„ç¬¬ä¸€ä¸ªé¡µé¢" class="headerlink" title="è¿”å›ä½ çš„ç¬¬ä¸€ä¸ªé¡µé¢"></a>è¿”å›ä½ çš„ç¬¬ä¸€ä¸ªé¡µé¢</h4><p>app.py<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,render_template</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Hello World!'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/index')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">'index.html'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure><br>åœ¨staticç›®å½•ä¸‹é…ç½®å¯¹äºçš„jsã€cssæ–‡ä»¶</p>
]]></content>
      <categories>
        <category>Flask</category>
      </categories>
      <tags>
        <tag>flask</tag>
      </tags>
  </entry>
  <entry>
    <title>Django2.1.7é›†æˆCelery4.3.0ä»»åŠ¡é˜Ÿåˆ—è·¯ç”±</title>
    <url>/2019/11/26/Django2-1-7%E9%9B%86%E6%88%90Celery4-3-0%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97%E8%B7%AF%E7%94%B1/</url>
    <content><![CDATA[<p>Celery æ˜¯ä¸€ä¸ªç®€å•ã€çµæ´»ä¸”å¯é çš„ï¼Œå¤„ç†å¤§é‡æ¶ˆæ¯çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¹¶ä¸”æä¾›ç»´æŠ¤è¿™æ ·ä¸€ä¸ªç³»ç»Ÿçš„å¿…éœ€å·¥å…·ã€‚å®ƒæ˜¯ä¸€ä¸ªä¸“æ³¨äºå®æ—¶å¤„ç†çš„ä»»åŠ¡é˜Ÿåˆ—ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒä»»åŠ¡è°ƒåº¦ã€‚æœ¬æ–‡æ¼”ç¤ºäº†å¦‚ä½•åœ¨Djangoä¸­é›†æˆCelery<br><a id="more"></a></p>
<h4 id="ä¾èµ–å®‰è£…"><a href="#ä¾èµ–å®‰è£…" class="headerlink" title="ä¾èµ–å®‰è£…"></a>ä¾èµ–å®‰è£…</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pip3 install celery</span><br><span class="line">pip3 install django-celery</span><br></pre></td></tr></table></figure>
<h4 id="ç‰ˆæœ¬è¯´æ˜"><a href="#ç‰ˆæœ¬è¯´æ˜" class="headerlink" title="ç‰ˆæœ¬è¯´æ˜"></a>ç‰ˆæœ¬è¯´æ˜</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">celery                             4.3.0            </span><br><span class="line">django-celery                      3.3.1</span><br></pre></td></tr></table></figure>
<h4 id="celeryåè¯"><a href="#celeryåè¯" class="headerlink" title="celeryåè¯"></a>celeryåè¯</h4><ul>
<li>ä»»åŠ¡taskï¼šå°±æ˜¯ä¸€ä¸ªPythonå‡½æ•°ã€‚</li>
<li>é˜Ÿåˆ—queueï¼šå°†éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ã€‚</li>
<li>å·¥äººworkerï¼šåœ¨ä¸€ä¸ªæ–°è¿›ç¨‹ä¸­ï¼Œè´Ÿè´£æ‰§è¡Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ã€‚</li>
<li>ä»£ç†äººbrokerï¼šè´Ÿè´£è°ƒåº¦ï¼Œéœ€è¦æå‰éƒ¨ç½²å¥½redisã€‚</li>
</ul>
<h4 id="å·¥ç¨‹ç›®å½•ç»“æ„"><a href="#å·¥ç¨‹ç›®å½•ç»“æ„" class="headerlink" title="å·¥ç¨‹ç›®å½•ç»“æ„"></a>å·¥ç¨‹ç›®å½•ç»“æ„</h4><h4 id="æ–°å»ºapp"><a href="#æ–°å»ºapp" class="headerlink" title="æ–°å»ºapp"></a>æ–°å»ºapp</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">python3 manage.py startapp jia_celery</span><br></pre></td></tr></table></figure>
<h4 id="åœ¨é¡¹ç›®-settings-pyä¸­å®‰è£…"><a href="#åœ¨é¡¹ç›®-settings-pyä¸­å®‰è£…" class="headerlink" title="åœ¨é¡¹ç›®/settings.pyä¸­å®‰è£…"></a>åœ¨é¡¹ç›®/settings.pyä¸­å®‰è£…</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">INSTALLED_APPS = (</span><br><span class="line">  ...</span><br><span class="line">  <span class="string">'jia_celery'</span></span><br><span class="line">  <span class="string">'djcelery'</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="åœ¨jia-celeryç›®å½•ä¸‹åˆ›å»ºtasks-pyæ–‡ä»¶"><a href="#åœ¨jia-celeryç›®å½•ä¸‹åˆ›å»ºtasks-pyæ–‡ä»¶" class="headerlink" title="åœ¨jia_celeryç›®å½•ä¸‹åˆ›å»ºtasks.pyæ–‡ä»¶"></a>åœ¨jia_celeryç›®å½•ä¸‹åˆ›å»ºtasks.pyæ–‡ä»¶</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Create your tasks here</span></span><br><span class="line"><span class="keyword">from</span> celery <span class="keyword">import</span> Celery</span><br><span class="line"><span class="keyword">from</span> jia_celery.celery <span class="keyword">import</span> app <span class="keyword">as</span> celery_app</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºä»»åŠ¡å‡½æ•°</span></span><br><span class="line"><span class="meta">@celery_app.task</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_task1</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"ä»»åŠ¡å‡½æ•°(my_task1)æ­£åœ¨æ‰§è¡Œ...."</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@celery_app.task</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_task2</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"ä»»åŠ¡å‡½æ•°(my_task2)æ­£åœ¨æ‰§è¡Œ...."</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@celery_app.task</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_task3</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"ä»»åŠ¡å‡½æ•°(my_task3)æ­£åœ¨æ‰§è¡Œ...."</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@celery_app.task</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_task4</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"ä»»åŠ¡å‡½æ•°(my_task4)æ­£åœ¨æ‰§è¡Œ...."</span>)</span><br></pre></td></tr></table></figure>
<h4 id="åœ¨jia-celeryç›®å½•ä¸‹åˆ›å»ºcelery-pyæ–‡ä»¶"><a href="#åœ¨jia-celeryç›®å½•ä¸‹åˆ›å»ºcelery-pyæ–‡ä»¶" class="headerlink" title="åœ¨jia_celeryç›®å½•ä¸‹åˆ›å»ºcelery.pyæ–‡ä»¶"></a>åœ¨jia_celeryç›®å½•ä¸‹åˆ›å»ºcelery.pyæ–‡ä»¶</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> celery <span class="keyword">import</span> Celery</span><br><span class="line"><span class="keyword">from</span> jia_celery <span class="keyword">import</span> celeryconfig</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨å¢åŠ é…ç½®çš„æ–¹å¼åˆ›å»ºcelery app</span></span><br><span class="line">app = Celery(<span class="string">'jia_celery.tasks'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»å•ç‹¬çš„é…ç½®æ¨¡å—ä¸­åŠ è½½é…ç½®</span></span><br><span class="line">app.config_from_object(celeryconfig)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è‡ªåŠ¨æœç´¢ä»»åŠ¡</span></span><br><span class="line">app.autodiscover_tasks([<span class="string">'jia_celery'</span>])</span><br></pre></td></tr></table></figure>
<h4 id="åœ¨jia-celeryç›®å½•ä¸‹åˆ›å»ºceleryconfig-py"><a href="#åœ¨jia-celeryç›®å½•ä¸‹åˆ›å»ºceleryconfig-py" class="headerlink" title="åœ¨jia_celeryç›®å½•ä¸‹åˆ›å»ºceleryconfig.py"></a>åœ¨jia_celeryç›®å½•ä¸‹åˆ›å»ºceleryconfig.py</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> kombu <span class="keyword">import</span> Exchange, Queue</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®ç»“æœå­˜å‚¨</span></span><br><span class="line">CELERY_RESULT_BACKEND = <span class="string">'redis://127.0.0.1:6379/9'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®ä»£ç†äººbroker</span></span><br><span class="line">BROKER_URL = <span class="string">'redis://127.0.0.1:6379/8'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®ä»»åŠ¡è·¯ç”±</span></span><br><span class="line">CELERY_ROUTES = (&#123;</span><br><span class="line">    <span class="string">'jia_celery.tasks.my_task1'</span>: &#123;<span class="string">'queue'</span>: <span class="string">'queue1'</span>&#125;,</span><br><span class="line">    <span class="string">'jia_celery.tasks.my_task2'</span>: &#123;<span class="string">'queue'</span>: <span class="string">'queue1'</span>&#125;,</span><br><span class="line">    <span class="string">'jia_celery.tasks.my_task3'</span>: &#123;<span class="string">'queue'</span>: <span class="string">'queue2'</span>&#125;,</span><br><span class="line">    <span class="string">'jia_celery.tasks.my_task4'</span>: &#123;<span class="string">'queue'</span>: <span class="string">'queue2'</span>&#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="è¿ç§»æ•°æ®åº“"><a href="#è¿ç§»æ•°æ®åº“" class="headerlink" title="è¿ç§»æ•°æ®åº“"></a>è¿ç§»æ•°æ®åº“</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">python3 manage.py migrate</span><br></pre></td></tr></table></figure>
<h4 id="å¯åŠ¨redis"><a href="#å¯åŠ¨redis" class="headerlink" title="å¯åŠ¨redis"></a>å¯åŠ¨redis</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">redis-server</span><br></pre></td></tr></table></figure>
<h4 id="å¯åŠ¨worker"><a href="#å¯åŠ¨worker" class="headerlink" title="å¯åŠ¨worker"></a>å¯åŠ¨worker</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">celery -A jia_celery worker -l info -Q queue1</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Arithmetic@qingjiajiadeMBP MyBlog % celery -A jia_celery worker -l info -Q queue1</span><br><span class="line"> </span><br><span class="line"> -------------- celery@qingjiaowosuanshujiadeMacBook-Pro.local v4.3.0 (rhubarb)</span><br><span class="line">---- **** ----- </span><br><span class="line">--- * ***  * -- Darwin-19.0.0-x86_64-i386-64bit 2019-11-26 21:39:22</span><br><span class="line">-- * - **** --- </span><br><span class="line">- ** ---------- [config]</span><br><span class="line">- ** ---------- .&gt; app:         jia_celery.tasks:0x10823a9b0</span><br><span class="line">- ** ---------- .&gt; transport:   redis://127.0.0.1:6379/8</span><br><span class="line">- ** ---------- .&gt; results:     redis://127.0.0.1:6379/9</span><br><span class="line">- *** --- * --- .&gt; concurrency: 8 (prefork)</span><br><span class="line">-- ******* ---- .&gt; task events: OFF (enable -E to monitor tasks in this worker)</span><br><span class="line">--- ***** ----- </span><br><span class="line"> -------------- [queues]</span><br><span class="line">                .&gt; queue1           exchange=queue1(direct) key=queue1</span><br><span class="line">                </span><br><span class="line"></span><br><span class="line">[tasks]</span><br><span class="line">  . jia_celery.tasks.my_task1</span><br><span class="line">  . jia_celery.tasks.my_task2</span><br><span class="line">  . jia_celery.tasks.my_task3</span><br><span class="line">  . jia_celery.tasks.my_task4</span><br><span class="line"></span><br><span class="line">[2019-11-26 21:39:22,382: INFO/MainProcess] Connected to redis://127.0.0.1:6379/8</span><br><span class="line">[2019-11-26 21:39:22,392: INFO/MainProcess] mingle: searching for neighbors</span><br><span class="line">[2019-11-26 21:39:23,416: INFO/MainProcess] mingle: all alone</span><br><span class="line">[2019-11-26 21:39:23,432: INFO/MainProcess] celery@qingjiaowosuanshujiadeMacBook-Pro.local ready.</span><br><span class="line">^C</span><br><span class="line">worker: Hitting Ctrl+C again will terminate all running tasks!</span><br><span class="line"></span><br><span class="line">worker: Warm shutdown (MainProcess)</span><br><span class="line">Arithmetic@qingjiajiadeMBP MyBlog % celery -A jia_celery worker -l info -Q queue1</span><br><span class="line"> </span><br><span class="line"> -------------- celery@qingjiaowosuanshujiadeMacBook-Pro.local v4.3.0 (rhubarb)</span><br><span class="line">---- **** ----- </span><br><span class="line">--- * ***  * -- Darwin-19.0.0-x86_64-i386-64bit 2019-11-26 21:41:26</span><br><span class="line">-- * - **** --- </span><br><span class="line">- ** ---------- [config]</span><br><span class="line">- ** ---------- .&gt; app:         jia_celery.tasks:0x10d626940</span><br><span class="line">- ** ---------- .&gt; transport:   redis://127.0.0.1:6379/8</span><br><span class="line">- ** ---------- .&gt; results:     redis://127.0.0.1:6379/9</span><br><span class="line">- *** --- * --- .&gt; concurrency: 8 (prefork)</span><br><span class="line">-- ******* ---- .&gt; task events: OFF (enable -E to monitor tasks in this worker)</span><br><span class="line">--- ***** ----- </span><br><span class="line"> -------------- [queues]</span><br><span class="line">                .&gt; queue1           exchange=queue1(direct) key=queue1</span><br><span class="line">                </span><br><span class="line"></span><br><span class="line">[tasks]</span><br><span class="line">  . jia_celery.tasks.my_task1</span><br><span class="line">  . jia_celery.tasks.my_task2</span><br><span class="line">  . jia_celery.tasks.my_task3</span><br><span class="line">  . jia_celery.tasks.my_task4</span><br><span class="line"></span><br><span class="line">[2019-11-26 21:41:27,005: INFO/MainProcess] Connected to redis://127.0.0.1:6379/8</span><br><span class="line">[2019-11-26 21:41:27,017: INFO/MainProcess] mingle: searching for neighbors</span><br><span class="line">[2019-11-26 21:41:28,043: INFO/MainProcess] mingle: all alone</span><br><span class="line">[2019-11-26 21:41:28,062: INFO/MainProcess] celery@qingjiaowosuanshujiadeMacBook-Pro.local ready.</span><br></pre></td></tr></table></figure>
<h4 id="æµ‹è¯•ä»»åŠ¡1ã€2"><a href="#æµ‹è¯•ä»»åŠ¡1ã€2" class="headerlink" title="æµ‹è¯•ä»»åŠ¡1ã€2"></a>æµ‹è¯•ä»»åŠ¡1ã€2</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Arithmetic@qingjiajiadeMBP MyBlog % python3</span><br><span class="line">Python 3.6.6 (v3.6.6:4cf1f54eb7, Jun 26 2018, 19:50:54) </span><br><span class="line">[GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.57)] on darwin</span><br><span class="line">Type "help", "copyright", "credits" or "license" for more information.</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; from jia_celery.tasks import *</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; my_task1.delay()</span></span><br><span class="line">&lt;AsyncResult: 7bce3af5-5d5f-4b45-b317-7c47b81c4391&gt;</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; my_task2.delay()</span></span><br><span class="line">&lt;AsyncResult: 6879f8e9-8bdc-4d47-9baf-5aa7e3c303af&gt;</span><br></pre></td></tr></table></figure>
<h4 id="æŸ¥çœ‹queue1-çš„-worker-æ‰§è¡Œæ—¥å¿—"><a href="#æŸ¥çœ‹queue1-çš„-worker-æ‰§è¡Œæ—¥å¿—" class="headerlink" title="æŸ¥çœ‹queue1 çš„ worker æ‰§è¡Œæ—¥å¿—"></a>æŸ¥çœ‹queue1 çš„ worker æ‰§è¡Œæ—¥å¿—</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[2019-11-26 21:42:02,424: INFO/MainProcess] Received task: jia_celery.tasks.my_task1[7bce3af5-5d5f-4b45-b317-7c47b81c4391]  </span><br><span class="line">[2019-11-26 21:42:02,426: WARNING/ForkPoolWorker-8] ä»»åŠ¡å‡½æ•°(my_task1)æ­£åœ¨æ‰§è¡Œ....</span><br><span class="line">[2019-11-26 21:42:02,430: INFO/ForkPoolWorker-8] Task jia_celery.tasks.my_task1[7bce3af5-5d5f-4b45-b317-7c47b81c4391] succeeded in 0.00366099600068992s: None</span><br><span class="line">[2019-11-26 21:42:21,639: INFO/MainProcess] Received task: jia_celery.tasks.my_task2[6879f8e9-8bdc-4d47-9baf-5aa7e3c303af]  </span><br><span class="line">[2019-11-26 21:42:21,642: WARNING/ForkPoolWorker-2] ä»»åŠ¡å‡½æ•°(my_task2)æ­£åœ¨æ‰§è¡Œ....</span><br><span class="line">[2019-11-26 21:42:21,646: INFO/ForkPoolWorker-2] Task jia_celery.tasks.my_task2[6879f8e9-8bdc-4d47-9baf-5aa7e3c303af] succeeded in 0.0050763219987857156s: None</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ­¤æ—¶æµ‹è¯•task3ã€4ï¼ŒæŸ¥çœ‹queue1 çš„ worker æ‰§è¡Œæ—¥å¿—æ˜¯ä¸ä¼šæœ‰å¯¹åº”ä»»åŠ¡æ‰§è¡Œçš„ï¼Œå› ä¸ºä¸åŒä»»åŠ¡æŒ‡å®šäº†ä¸åŒçš„é˜Ÿåˆ—å¤„ç†</p>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>django</tag>
        <tag>celery</tag>
      </tags>
  </entry>
  <entry>
    <title>GitHubåšå®¢Hexoé…åˆnextä¸»é¢˜å¢åŠ æœç´¢å¼•æ“éªŒè¯</title>
    <url>/2019/11/24/GitHub%E5%8D%9A%E5%AE%A2Hexo%E9%85%8D%E5%90%88next%E4%B8%BB%E9%A2%98%E5%A2%9E%E5%8A%A0%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E9%AA%8C%E8%AF%81/</url>
    <content><![CDATA[<p>GitHubåšå®¢Hexoé…åˆnextä¸»é¢˜å¢åŠ æœç´¢å¼•æ“éªŒè¯ï¼ŒGithub ä¸Šåˆ©ç”¨ hexo å»ºç«‹çš„åšå®¢æ˜¯æ— æ³•è¢«æœç´¢å¼•æ“æœç´¢åˆ°çš„ã€‚<br><a id="more"></a><br>Github æœ¬èº«ä¹Ÿä¸ä¼šå°†ä¿¡æ¯æäº¤ç»™å¼•æ“ã€‚æ‰€ä»¥ï¼Œä¸ºäº†è®©åšå®¢ä¿¡æ¯è¢«æ£€ç´¢åˆ°ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å°†åšå®¢ç½‘ç«™æäº¤ç»™æœç´¢å¼•æ“å¹¶éªŒè¯ï¼Œå®é™…ä¸Šå°±æ˜¯éªŒè¯ç½‘ç«™æ˜¯æˆ‘ä»¬è‡ªå·±çš„</p>
<h3 id="æäº¤Googleç«™ç‚¹"><a href="#æäº¤Googleç«™ç‚¹" class="headerlink" title="æäº¤Googleç«™ç‚¹"></a>æäº¤Googleç«™ç‚¹</h3><p><a href="https://www.google.com/webmasters/tools/home?hl=zh-CN" target="_blank" rel="noopener">Google</a></p>
<h3 id="é€‰æ‹©HTML-meta-æ ‡ç­¾éªŒè¯"><a href="#é€‰æ‹©HTML-meta-æ ‡ç­¾éªŒè¯" class="headerlink" title="é€‰æ‹©HTML meta æ ‡ç­¾éªŒè¯"></a>é€‰æ‹©HTML meta æ ‡ç­¾éªŒè¯</h3><p>Next ä¸»é¢˜ä¸‹ï¼Œé¡µé¢çš„ header è®¾ç½®åœ¨<br><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="regexp">/themes/</span>hexo-theme-<span class="keyword">next</span><span class="regexp">/layout/</span>_partials<span class="regexp">/head/</span>head.swig</span><br></pre></td></tr></table></figure><br><figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="template-tag">&#123;%- <span class="name"><span class="name">if</span></span> theme.google_site_verification %&#125;</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"google-site-verification"</span> <span class="attr">content</span>=<span class="string">"RkRVaaOa4vX520pamxy6ip0HfuaQ-NCyM1SvGbzqUFA"</span>&gt;</span></span></span><br><span class="line"><span class="template-tag">&#123;%- <span class="name"><span class="name">endif</span></span> %&#125;</span></span><br></pre></td></tr></table></figure><br>è¿™é‡Œçš„contentä»Googleæ§åˆ¶å°è·å–</p>
<h3 id="æäº¤Baiduç«™ç‚¹"><a href="#æäº¤Baiduç«™ç‚¹" class="headerlink" title="æäº¤Baiduç«™ç‚¹"></a>æäº¤Baiduç«™ç‚¹</h3><p><a href="http://www.baidu.com/search/url_submit.htm" target="_blank" rel="noopener">Baidu</a></p>
<h3 id="é€‰æ‹©HTML-meta-æ ‡ç­¾éªŒè¯-1"><a href="#é€‰æ‹©HTML-meta-æ ‡ç­¾éªŒè¯-1" class="headerlink" title="é€‰æ‹©HTML meta æ ‡ç­¾éªŒè¯"></a>é€‰æ‹©HTML meta æ ‡ç­¾éªŒè¯</h3><p>Next ä¸»é¢˜ä¸‹ï¼Œé¡µé¢çš„ header è®¾ç½®åœ¨<br><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="regexp">/themes/</span>hexo-theme-<span class="keyword">next</span><span class="regexp">/layout/</span>_partials<span class="regexp">/head/</span>head.swig</span><br></pre></td></tr></table></figure><br><figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="template-tag">&#123;%- <span class="name"><span class="name">if</span></span> theme.baidu_site_verification %&#125;</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"baidu-site-verification"</span> <span class="attr">content</span>=<span class="string">"es0rExrlvZ"</span>&gt;</span></span></span><br><span class="line"><span class="template-tag">&#123;%- <span class="name"><span class="name">endif</span></span> %&#125;</span></span><br></pre></td></tr></table></figure><br>è¿™é‡Œçš„contentä»Baiduæ§åˆ¶å°è·å–</p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
        <tag>github</tag>
        <tag>baidu</tag>
        <tag>google</tag>
      </tags>
  </entry>
  <entry>
    <title>MacOSä¸‹Gitä¸GitHub</title>
    <url>/2019/11/24/MacOS%E4%B8%8BGit%E4%B8%8EGitHub/</url>
    <content><![CDATA[<p>è¿˜æ˜¯ä¸çŸ¥é“å†™å•¥ï¼Œæœ¬æ–‡æ˜¯æœ‰å…³Mac OSä¸ŠGitä¸GitHubç›¸å…³é…ç½®çš„ä»‹ç»è¯´æ˜<br><a id="more"></a></p>
<h4 id="å®‰è£…git"><a href="#å®‰è£…git" class="headerlink" title="å®‰è£…git"></a>å®‰è£…git</h4><p>è¯¥å‘½ä»¤ä¹Ÿå¯ä»¥å‡çº§æœ€æ–°çš„git<br><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="code"><pre><span class="line">brew install git</span><br></pre></td></tr></table></figure></p>
<h4 id="æŸ¥çœ‹gitæŒ‡å‘å’Œç‰ˆæœ¬ä¿¡æ¯"><a href="#æŸ¥çœ‹gitæŒ‡å‘å’Œç‰ˆæœ¬ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹gitæŒ‡å‘å’Œç‰ˆæœ¬ä¿¡æ¯"></a>æŸ¥çœ‹gitæŒ‡å‘å’Œç‰ˆæœ¬ä¿¡æ¯</h4><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="code"><pre><span class="line">which git</span><br><span class="line">/usr/bin/git</span><br><span class="line">git --version</span><br><span class="line">git version 2.21.0 (Apple Git-122.2)</span><br></pre></td></tr></table></figure>
<h4 id="é…ç½®githubç”¨æˆ·åå’Œé‚®ç®±"><a href="#é…ç½®githubç”¨æˆ·åå’Œé‚®ç®±" class="headerlink" title="é…ç½®githubç”¨æˆ·åå’Œé‚®ç®±"></a>é…ç½®githubç”¨æˆ·åå’Œé‚®ç®±</h4><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="code"><pre><span class="line">git config --global user.name "ArithmeticJia"</span><br><span class="line">git config --global user.email "1097197237@qq.com"</span><br></pre></td></tr></table></figure>
<h4 id="ç”Ÿæˆsshå¯†é’¥"><a href="#ç”Ÿæˆsshå¯†é’¥" class="headerlink" title="ç”Ÿæˆsshå¯†é’¥"></a>ç”Ÿæˆsshå¯†é’¥</h4><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C "1097197237@qq.com"</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="code"><pre><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/Users/Arithmetic/.ssh/id_rsa): </span><br><span class="line">/Users/Arithmetic/.ssh/id_rsa already exists.</span><br><span class="line">Overwrite (y/n)? y</span><br><span class="line">Enter passphrase (empty for no passphrase): </span><br><span class="line">Enter same passphrase again: </span><br><span class="line">Your identification has been saved in /Users/Arithmetic/.ssh/id_rsa.</span><br></pre></td></tr></table></figure>
<h4 id="åœ¨GitHubä¸Šæ–°å¢sshå¯†é’¥"><a href="#åœ¨GitHubä¸Šæ–°å¢sshå¯†é’¥" class="headerlink" title="åœ¨GitHubä¸Šæ–°å¢sshå¯†é’¥"></a>åœ¨GitHubä¸Šæ–°å¢sshå¯†é’¥</h4><p>å¤åˆ¶å¯†é’¥<br><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="code"><pre><span class="line">cat .ssh/id_rsa.pub</span><br></pre></td></tr></table></figure><br>è·¯å¾„ä¸€èˆ¬æ˜¯<br><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="code"><pre><span class="line">/User/ArithmeticJia/.ssh</span><br></pre></td></tr></table></figure><br>ç™»å½•GitHubï¼ˆé»˜è®¤ä½ å·²ç»æ³¨å†Œäº†GitHubè´¦å·ï¼‰ï¼Œæ·»åŠ ssh keyï¼Œç‚¹å‡»Settingsï¼Œå¦‚å›¾<br><img src="https://www.guanacossj.com/media/articlebodypics/E901D42E-753A-4E46-BC71-05C54C555B0D.png" alt=""></p>
<h4 id="é“¾æ¥éªŒè¯"><a href="#é“¾æ¥éªŒè¯" class="headerlink" title="é“¾æ¥éªŒè¯"></a>é“¾æ¥éªŒè¯</h4><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="code"><pre><span class="line">Hi Arithmeticjia! You've successfully authenticated, but GitHub does not provide shell access.</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoä¸ªäººåšå®¢æ­å»ºæ•™ç¨‹-é˜¿é‡Œäº‘éƒ¨ç½²(Ubuntu+Nginx+uwsgi)å‡çº§https</title>
    <url>/2019/11/24/Django%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B-%E9%98%BF%E9%87%8C%E4%BA%91%E9%83%A8%E7%BD%B2(Ubuntu+Nginx+uwsgi)%E5%8D%87%E7%BA%A7https/</url>
    <content><![CDATA[<p>æ›´å®‰å…¨çš„https<br><a id="more"></a></p>
<h4 id="ä¸€ã€é˜¿é‡Œäº‘ç”³è¯·SSLè¯ä¹¦"><a href="#ä¸€ã€é˜¿é‡Œäº‘ç”³è¯·SSLè¯ä¹¦" class="headerlink" title="ä¸€ã€é˜¿é‡Œäº‘ç”³è¯·SSLè¯ä¹¦"></a>ä¸€ã€é˜¿é‡Œäº‘ç”³è¯·SSLè¯ä¹¦</h4><p>ç•¥</p>
<h4 id="äºŒã€å°†pemå’Œkeyæ”¾åœ¨nginxç›®å½•ä¸‹"><a href="#äºŒã€å°†pemå’Œkeyæ”¾åœ¨nginxç›®å½•ä¸‹" class="headerlink" title="äºŒã€å°†pemå’Œkeyæ”¾åœ¨nginxç›®å½•ä¸‹"></a>äºŒã€å°†pemå’Œkeyæ”¾åœ¨nginxç›®å½•ä¸‹</h4><p>ä»…ä¾›å‚è€ƒ<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/etc/nginx/cert/1831344_www.guanacossj.com.pem;      # è·¯å¾„/pemæ–‡ä»¶</span><br><span class="line">/etc/nginx/cert/1831344_www.guanacossj.com.key;      # è·¯å¾„/keyæ–‡ä»¶</span><br></pre></td></tr></table></figure></p>
<h4 id="ä¸‰ã€ä¿®æ”¹nginx-conf"><a href="#ä¸‰ã€ä¿®æ”¹nginx-conf" class="headerlink" title="ä¸‰ã€ä¿®æ”¹nginx.conf"></a>ä¸‰ã€ä¿®æ”¹nginx.conf</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">http &#123;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">  server &#123;</span><br><span class="line">      listen 80;</span><br><span class="line">      server_name  _;</span><br><span class="line">      return 301 https://www.guanacossj.com$request_uri;</span><br><span class="line">   &#125; </span><br><span class="line"> </span><br><span class="line">  server &#123;</span><br><span class="line">      listen       443 default_server;</span><br><span class="line">      listen       [::]:443 default_server;</span><br><span class="line">      server_name  _;</span><br><span class="line">      ssl on;</span><br><span class="line">      ssl_certificate   /etc/nginx/cert/1831344_www.guanacossj.com.pem;     # è·¯å¾„/pemæ–‡ä»¶</span><br><span class="line">      ssl_certificate_key  /etc/nginx/cert/1831344_www.guanacossj.com.key;  # è·¯å¾„/keyæ–‡ä»¶</span><br><span class="line">      ssl_session_timeout 5m;</span><br><span class="line">      ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">      ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">      ssl_prefer_server_ciphers on;</span><br><span class="line">      charset     utf-8;</span><br><span class="line">      client_max_body_size 1000M;   # adjust to taste</span><br><span class="line">      include /etc/nginx/default.d/*.conf;</span><br><span class="line">      location /static &#123;</span><br><span class="line">      alias /home/MyBlog/static; # Ö¸ÃdjangoÂµÃ„taticÄ¿Â¼</span><br><span class="line">      &#125;</span><br><span class="line">      location /static/rest_framework/ &#123;</span><br><span class="line">      alias /usr/local/lib/python3.6/dist-packages/rest_framework/static/rest_framework/</span><br><span class="line">    ;&#125;</span><br><span class="line"> </span><br><span class="line">    # Finally, send all non-media requests to the Django server.</span><br><span class="line">    location / &#123;</span><br><span class="line">        uwsgi_pass  127.0.0.1:8000;</span><br><span class="line">        #uwsgi_pass  django;</span><br><span class="line">        include     uwsgi_params; 	# the uwsgi_params file you installed           </span><br><span class="line">        proxy_redirect off;</span><br><span class="line">	      proxy_http_version 1.1;</span><br><span class="line">        proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">        proxy_set_header Connection "upgrade";</span><br><span class="line">	      uwsgi_send_timeout 600;</span><br><span class="line">        uwsgi_connect_timeout 600;  </span><br><span class="line">        uwsgi_read_timeout 600; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡ŒæŠŠä½ åŸæ¥çš„ç›‘å¬80ç«¯å£æ”¹ä¸ºç›‘å¬443ç«¯å£å³å¯ï¼Œæˆ‘ä¹‹å‰ä¸€ç›´ä¸æˆåŠŸä¸»è¦æ˜¯æˆ‘è¯•å›¾å†åŠ ä¸€ä¸ª443ç«¯å£çš„ç›‘å¬ï¼Œåº”è¯¥ä¹Ÿå¯ä»¥å§ï¼Œä¸ç®¡äº†ï¼Œåæ­£è¿™æ ·è‚¯å®šæ²¡é—®é¢˜ï¼Œç„¶åå¦‚æœè¿˜æƒ³è®©httpèƒ½è´­è®¿é—®ï¼Œå°±åšä¸ªé‡å®šå‘ã€‚</p>
<h4 id="å››ã€é‡å¯nginx"><a href="#å››ã€é‡å¯nginx" class="headerlink" title="å››ã€é‡å¯nginx"></a>å››ã€é‡å¯nginx</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">service nginx restart</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>django</tag>
        <tag>é˜¿é‡Œäº‘</tag>
        <tag>nginx</tag>
        <tag>https</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoä¸ªäººåšå®¢æ­å»ºæ•™ç¨‹-RESTé£æ ¼API</title>
    <url>/2019/11/24/Django%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B-REST%E9%A3%8E%E6%A0%BCAPI/</url>
    <content><![CDATA[<p>Django REST Framework æ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”çµæ´»çš„å·¥å…·åŒ…ï¼Œç”¨ä»¥æ„å»ºWeb API<br>Django REST Frameworkå¯ä»¥åœ¨Djangoçš„åŸºç¡€ä¸Šè¿…é€Ÿå®ç°APIï¼Œå¹¶ä¸”è‡ªèº«è¿˜å¸¦æœ‰WEBçš„æµ‹è¯•é¡µé¢ï¼Œå¯ä»¥æ–¹ä¾¿çš„æµ‹è¯•è‡ªå·±çš„API<br><a id="more"></a></p>
<h4 id="ä¸€ã€å®‰è£…ä¾èµ–"><a href="#ä¸€ã€å®‰è£…ä¾èµ–" class="headerlink" title="ä¸€ã€å®‰è£…ä¾èµ–"></a>ä¸€ã€å®‰è£…ä¾èµ–</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pip3 install djangorestframework</span><br></pre></td></tr></table></figure>
<h4 id="äºŒã€åœ¨settings-pyä¸­æ·»åŠ åº”ç”¨"><a href="#äºŒã€åœ¨settings-pyä¸­æ·»åŠ åº”ç”¨" class="headerlink" title="äºŒã€åœ¨settings.pyä¸­æ·»åŠ åº”ç”¨"></a>äºŒã€åœ¨settings.pyä¸­æ·»åŠ åº”ç”¨</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    ....</span><br><span class="line"> </span><br><span class="line"><span class="string">'rest_framework'</span>,    <span class="comment"># åŠ ä¸Šè¿™å¥ï¼ŒåŠ åœ¨apiçš„å‰é¢</span></span><br><span class="line">    ....             <span class="comment"># åé¢æ˜¯ä½ çš„åº”ç”¨åç§°</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h4 id="ä¸‰ã€è·¯ç”±æ³¨å†Œ"><a href="#ä¸‰ã€è·¯ç”±æ³¨å†Œ" class="headerlink" title="ä¸‰ã€è·¯ç”±æ³¨å†Œ"></a>ä¸‰ã€è·¯ç”±æ³¨å†Œ</h4><p>å­urls.py<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> url,include</span><br><span class="line"><span class="keyword">from</span> JiaBlog <span class="keyword">import</span> views</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> routers</span><br><span class="line"> </span><br><span class="line">app_name = <span class="string">'JiaBlog'</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å®šä¹‰è·¯ç”±åœ°å€</span></span><br><span class="line">route = routers.DefaultRouter()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># æ³¨å†Œæ–°çš„è·¯ç”±åœ°å€</span></span><br><span class="line">route.register(<span class="string">r'getarticleinfo'</span> , views.GetArticleInfo)</span><br><span class="line"> </span><br><span class="line">urlpatterns = [</span><br><span class="line">    ...</span><br><span class="line">    url(<span class="string">'api/'</span>, include(route.urls)),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><br>ä¸»urls.py<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""MyBlog URL Configuration</span></span><br><span class="line"><span class="string">The `urlpatterns` list routes URLs to views. For more information please see:</span></span><br><span class="line"><span class="string">    https://docs.djangoproject.com/en/2.1/topics/http/urls/</span></span><br><span class="line"><span class="string">Examples:</span></span><br><span class="line"><span class="string">Function views</span></span><br><span class="line"><span class="string">    1. Add an import:  from my_app import views</span></span><br><span class="line"><span class="string">    2. Add a URL to urlpatterns:  path('', views.home, name='home')</span></span><br><span class="line"><span class="string">Class-based views</span></span><br><span class="line"><span class="string">    1. Add an import:  from other_app.views import Home</span></span><br><span class="line"><span class="string">    2. Add a URL to urlpatterns:  path('', Home.as_view(), name='home')</span></span><br><span class="line"><span class="string">Including another URLconf</span></span><br><span class="line"><span class="string">    1. Import the include() function: from django.urls import include, path</span></span><br><span class="line"><span class="string">    2. Add a URL to urlpatterns:  path('blog/', include('blog.urls'))</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> include</span><br><span class="line"><span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> url</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> django.conf <span class="keyword">import</span> settings</span><br><span class="line"><span class="keyword">from</span> MyBlog.settings <span class="keyword">import</span> MEDIA_ROOT</span><br><span class="line"><span class="keyword">from</span> django.conf.urls.static <span class="keyword">import</span> static</span><br><span class="line"><span class="keyword">from</span> JiaBlog <span class="keyword">import</span> views</span><br><span class="line"><span class="keyword">from</span> haystack.views <span class="keyword">import</span> SearchView</span><br><span class="line"><span class="keyword">from</span> django.views.static <span class="keyword">import</span> serve</span><br><span class="line"><span class="comment">#from django.views import static</span></span><br><span class="line"> </span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(<span class="string">r'^$'</span>, views.blog_index),</span><br><span class="line">    path(<span class="string">'admin/'</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">'JiaBlog/'</span>, include(<span class="string">'JiaBlog.urls'</span>, namespace=<span class="string">"JiaBlog"</span>)),</span><br><span class="line">]+static(settings.MEDIA_URL,document_root=settings.MEDIA_ROOT)</span><br></pre></td></tr></table></figure></p>
<h4 id="å››ã€è§†å›¾å‡½æ•°"><a href="#å››ã€è§†å›¾å‡½æ•°" class="headerlink" title="å››ã€è§†å›¾å‡½æ•°"></a>å››ã€è§†å›¾å‡½æ•°</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializers,viewsets</span><br><span class="line"><span class="keyword">from</span> JiaBlog.models <span class="keyword">import</span> Articles</span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticlesSerializers</span><span class="params">(serializers.ModelSerializer)</span>:</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Articles                        <span class="comment"># æŒ‡å®šçš„æ¨¡å‹ç±»</span></span><br><span class="line">        fields = (<span class="string">'id'</span>, <span class="string">'title'</span>, <span class="string">'body'</span>, <span class="string">'timestamp'</span>,<span class="string">'authorname'</span>,<span class="string">'views'</span>,<span class="string">'tags'</span>,<span class="string">'category'</span>)  <span class="comment"># éœ€è¦åºåˆ—åŒ–çš„å±æ€§</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetArticleInfo</span><span class="params">(viewsets.ModelViewSet)</span>:</span></span><br><span class="line">    queryset = Articles.objects.all().order_by(<span class="string">'-id'</span>)</span><br><span class="line">    serializer_class = ArticlesSerializers</span><br></pre></td></tr></table></figure>
<h4 id="äº”ã€æ•°æ®æ¨¡å‹"><a href="#äº”ã€æ•°æ®æ¨¡å‹" class="headerlink" title="äº”ã€æ•°æ®æ¨¡å‹"></a>äº”ã€æ•°æ®æ¨¡å‹</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Articles</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    id = models.AutoField(primary_key=<span class="literal">True</span>)                         <span class="comment"># id</span></span><br><span class="line">    title = models.CharField(max_length = <span class="number">150</span>)                      <span class="comment"># åšå®¢æ ‡é¢˜</span></span><br><span class="line">    body = models.TextField()                                       <span class="comment"># åšå®¢æ­£æ–‡</span></span><br><span class="line">    timestamp = models.DateTimeField()                              <span class="comment"># åˆ›å»ºæ—¶é—´</span></span><br><span class="line">    authorname = models.ForeignKey(<span class="string">'JiaBlog.BlogUser'</span>,on_delete=models.CASCADE)        <span class="comment"># ä½œè€…å§“å</span></span><br><span class="line">    views = models.PositiveIntegerField(default=<span class="number">0</span>)</span><br><span class="line">    category = models.ForeignKey(Category,on_delete=models.CASCADE,primary_key=<span class="literal">False</span>)</span><br><span class="line">    tags = models.ManyToManyField(Tag, blank=<span class="literal">True</span>,null=<span class="literal">True</span>)</span><br><span class="line">    greats = models.PositiveIntegerField(default=<span class="number">0</span>)</span><br><span class="line">    comments = models.IntegerField(default=<span class="number">0</span>)</span><br><span class="line">    status = models.CharField(max_length=<span class="number">20</span>, default=<span class="string">"DEL"</span>)</span><br><span class="line">    brief = models.CharField(max_length=<span class="number">200</span>,blank=<span class="literal">True</span>,null=<span class="literal">True</span>)</span><br><span class="line">    pic = models.ImageField(upload_to=<span class="string">'jiablogimages'</span>)</span><br><span class="line">    <span class="comment"># bodypic = models.ImageField(upload_to='jiablogimages',blank=True,null=True)</span></span><br><span class="line">    istop = models.CharField(max_length=<span class="number">5</span>,default=<span class="string">''</span>,null=<span class="literal">True</span>,blank=<span class="literal">True</span>)</span><br><span class="line">    articlebodybrief = models.TextField(blank=<span class="literal">True</span>,null=<span class="literal">True</span>)</span><br><span class="line">    last_edit_timestamp = models.DateTimeField(auto_now=<span class="literal">True</span>,verbose_name=<span class="string">"æ›´æ–°æ—¶é—´"</span>,editable=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h4 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h4><figure class="highlight taggerscript"><table><tr><td class="code"><pre><span class="line">GET /JiaBlog/api/getarticleinfo/</span><br><span class="line">HTTP 200 OK</span><br><span class="line">Allow: GET, POST, HEAD, OPTIONS</span><br><span class="line">Content-Type: application/json</span><br><span class="line">Vary: Accept</span><br><span class="line"> </span><br><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">        "id": 3,</span><br><span class="line">        "title": "pythonä¸­çš„GILé”",</span><br><span class="line">        "body": "ä¸ºä»€ä¹ˆæˆ‘ä»¬è¯´pythonä¸­æ— æ³•å®ç°çœŸæ­£çš„å¤šçº¿ç¨‹å‘¢ï¼Œè¿™æ˜¯å› ä¸ºåœ¨Cè¯­è¨€å†™çš„pythonè§£é‡Šå™¨ä¸­å­˜åœ¨å…¨å±€è§£é‡Šå™¨é”ï¼Œç”±äºå…¨å±€è§£é‡Šå™¨é”çš„å­˜åœ¨ï¼Œåœ¨åŒä¸€æ—¶é—´å†…ï¼Œpythonè§£é‡Šå™¨åªèƒ½è¿è¡Œä¸€ä¸ªçº¿ç¨‹çš„ä»£ç ï¼Œè¿™å¤§å¤§å½±å“äº†pythonå¤šçº¿ç¨‹çš„æ€§èƒ½ã€‚è€Œè¿™ä¸ªè§£é‡Šå™¨é”ç”±äºå†å²åŸå› ï¼Œç°åœ¨å‡ ä¹æ— æ³•æ¶ˆé™¤ã€‚<span class="symbol">\r</span><span class="symbol">\n</span><span class="symbol">\r</span><span class="symbol">\n</span>python GIL ä¹‹æ‰€ä»¥ä¼šå½±å“å¤šçº¿ç¨‹ç­‰æ€§èƒ½ï¼Œæ˜¯å› ä¸ºåœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œåªæœ‰å½“çº¿ç¨‹è·å¾—äº†ä¸€ä¸ªå…¨å±€é”çš„æ—¶å€™ï¼Œé‚£ä¹ˆè¯¥çº¿ç¨‹çš„ä»£ç æ‰èƒ½è¿è¡Œï¼Œè€Œå…¨å±€é”åªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥ä½¿ç”¨pythonå¤šçº¿ç¨‹ï¼Œåœ¨åŒä¸€æ—¶åˆ»ä¹Ÿåªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è¿è¡Œï¼Œå› æ­¤åœ¨å³ä½¿åœ¨å¤šæ ¸çš„æƒ…å†µä¸‹ä¹Ÿåªèƒ½å‘æŒ¥å‡ºå•æ ¸çš„æ€§èƒ½ã€‚<span class="symbol">\r</span><span class="symbol">\n</span><span class="symbol">\r</span><span class="symbol">\n</span>ä»»ä½•Pythonçº¿ç¨‹æ‰§è¡Œå‰ï¼Œå¿…é¡»å…ˆè·å¾—GILé”ï¼Œç„¶åï¼Œæ¯æ‰§è¡Œ100æ¡å­—èŠ‚ç ï¼Œè§£é‡Šå™¨å°±è‡ªåŠ¨é‡Šæ”¾GILé”ï¼Œè®©åˆ«çš„çº¿ç¨‹æœ‰æœºä¼šæ‰§è¡Œã€‚è¿™ä¸ªGILå…¨å±€é”å®é™…ä¸ŠæŠŠæ‰€æœ‰çº¿ç¨‹çš„æ‰§è¡Œä»£ç éƒ½ç»™ä¸Šäº†é”ï¼Œæ‰€ä»¥ï¼Œå¤šçº¿ç¨‹åœ¨Pythonä¸­åªèƒ½äº¤æ›¿æ‰§è¡Œï¼Œå³ä½¿100ä¸ªçº¿ç¨‹è·‘åœ¨100æ ¸CPUä¸Šï¼Œä¹Ÿåªèƒ½ç”¨åˆ°1ä¸ªæ ¸ã€‚<span class="symbol">\r</span><span class="symbol">\n</span><span class="symbol">\r</span><span class="symbol">\n</span>å¯¹äºæœ‰ioæ“ä½œçš„çº¿ç¨‹ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹åœ¨åšioæ“ä½œçš„æ—¶å€™ï¼Œå› ä¸ºioæ“ä½œä¸éœ€è¦cpuï¼Œæ‰€ä»¥ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œpythonä¼šé‡Šæ”¾pythonå…¨å±€é”ï¼Œè¿™æ ·å…¶ä»–éœ€è¦è¿è¡Œçš„çº¿ç¨‹å°±ä¼šä½¿ç”¨è¯¥é”ã€‚",</span><br><span class="line">        "timestamp": "2019-02-21T22:01:52",</span><br><span class="line">        "authorname": 1,</span><br><span class="line">        "views": 2249,</span><br><span class="line">        "tags": [</span><br><span class="line">            3</span><br><span class="line">        ],</span><br><span class="line">        "category": 2</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        "id": 2,</span><br><span class="line">        "title": "Djangoå’ŒFlaskçš„åŒºåˆ«",</span><br><span class="line">        "body": "##å†™åœ¨æœ€å‰é¢ï¼š<span class="symbol">\r</span><span class="symbol">\n</span>python webå¼€å‘æœ‰å¾ˆå¤šå¸¸ç”¨çš„æ¡†æ¶ï¼Œä¸»è¦åŒ…æ‹¬Djangoï¼ŒFlaskï¼ŒTornadoï¼ŒDieselï¼ŒCubesï¼ŒPulsarï¼ŒFalconï¼Œwebpyï¼Œå¤§å®¶æœ€ç†ŸçŸ¥çš„è¿˜æ˜¯Djangoå’ŒFlaskï¼Œä»Šå¤©å°±æ¥ç®€å•ä»‹ç»ä¸€ä¸‹Djangoå’ŒFlaskçš„åŒºåˆ«ï¼Œæœ¬åšå®¢å°±æ˜¯ä½¿ç”¨Djangoå¼€å‘çš„ï¼ŒFlaskä¸æ˜¯å¾ˆäº†è§£ï¼Œå› ä¸ºæ²¡æœ‰ç”¨è¿‡ï¼Œä»Šå¤©å°±å€ŸèŠ±çŒ®ä½›ï¼Œç®€å•ä»‹ç»ä¸€ä¸‹ã€‚<span class="symbol">\r</span><span class="symbol">\n</span><span class="symbol">\r</span><span class="symbol">\n</span>##Flask<span class="symbol">\r</span><span class="symbol">\n</span><span class="symbol">\r</span><span class="symbol">\n</span>Flaskç¡®å®å¾ˆâ€œè½»â€ï¼Œä¸æ„§æ˜¯Micro Frameworkï¼Œä»Djangoè½¬å‘Flaskçš„å¼€å‘è€…ä¸€å®šä¼šå¦‚æ­¤æ„Ÿæ…¨ï¼Œé™¤éäºŒè€…å‡ä¸ºæ·±å…¥ä½¿ç”¨è¿‡<span class="symbol">\r</span><span class="symbol">\n</span>Flaskè‡ªç”±ã€çµæ´»ï¼Œå¯æ‰©å±•æ€§å¼ºï¼Œç¬¬ä¸‰æ–¹åº“çš„é€‰æ‹©é¢å¹¿ï¼Œå¼€å‘æ—¶å¯ä»¥ç»“åˆè‡ªå·±æœ€å–œæ¬¢ç”¨çš„è½®å­ï¼Œä¹Ÿèƒ½ç»“åˆæœ€æµè¡Œæœ€å¼ºå¤§çš„Pythonåº“<span class="symbol">\r</span><span class="symbol">\n</span>    å…¥é—¨ç®€å•ï¼Œå³ä¾¿æ²¡æœ‰å¤šå°‘webå¼€å‘ç»éªŒï¼Œä¹Ÿèƒ½å¾ˆå¿«åšå‡ºç½‘ç«™<span class="symbol">\r</span><span class="symbol">\n</span>    éå¸¸é€‚ç”¨äºå°å‹ç½‘ç«™<span class="symbol">\r</span><span class="symbol">\n</span>    éå¸¸é€‚ç”¨äºå¼€å‘webæœåŠ¡çš„API<span class="symbol">\r</span><span class="symbol">\n</span>    å¼€å‘å¤§å‹ç½‘ç«™æ— å‹åŠ›ï¼Œä½†ä»£ç æ¶æ„éœ€è¦è‡ªå·±è®¾è®¡ï¼Œå¼€å‘æˆæœ¬å–å†³äºå¼€å‘è€…çš„èƒ½åŠ›å’Œç»éªŒ<span class="symbol">\r</span><span class="symbol">\n</span>    å„æ–¹é¢æ€§èƒ½å‡ç­‰äºæˆ–ä¼˜äºDjango<span class="symbol">\r</span><span class="symbol">\n</span>    Djangoè‡ªå¸¦çš„æˆ–ç¬¬ä¸‰æ–¹çš„å¥½è¯„å¦‚æ½®çš„åŠŸèƒ½ï¼ŒFlaskä¸Šæ€»ä¼šæ‰¾åˆ°ä¸ä¹‹ç±»ä¼¼ç¬¬ä¸‰æ–¹åº“<span class="symbol">\r</span><span class="symbol">\n</span>    Flaskçµæ´»å¼€å‘ï¼ŒPythoné«˜æ‰‹åŸºæœ¬éƒ½ä¼šå–œæ¬¢Flaskï¼Œä½†å¯¹Djangoå´å¯èƒ½è¤’è´¬ä¸ä¸€<span class="symbol">\r</span><span class="symbol">\n</span>    Flaskä¸å…³ç³»å‹æ•°æ®åº“çš„é…åˆä½¿ç”¨ä¸å¼±äºDjangoï¼Œè€Œå…¶ä¸NoSQLæ•°æ®åº“çš„é…åˆè¿œè¿œä¼˜äºDjango<span class="symbol">\r</span><span class="symbol">\n</span>    Flaskæ¯”Djangoæ›´åŠ Pythonicï¼Œä¸Pythonçš„philosophyæ›´åŠ å»åˆ<span class="symbol">\r</span><span class="symbol">\n</span><span class="symbol">\r</span><span class="symbol">\n</span>##Django<span class="symbol">\r</span><span class="symbol">\n</span><span class="symbol">\r</span><span class="symbol">\n</span>Djangoå¤ªé‡äº†ï¼Œé™¤äº†webæ¡†æ¶ï¼Œè‡ªå¸¦ORMå’Œæ¨¡æ¿å¼•æ“ï¼Œçµæ´»å’Œè‡ªç”±åº¦ä¸å¤Ÿé«˜<span class="symbol">\r</span><span class="symbol">\n</span>    Djangoèƒ½å¼€å‘å°åº”ç”¨ï¼Œä½†æ€»ä¼šæœ‰â€œæ€é¸¡ç„‰ç”¨ç‰›åˆ€â€çš„æ„Ÿè§‰<span class="symbol">\r</span><span class="symbol">\n</span>    Djangoçš„è‡ªå¸¦ORMéå¸¸ä¼˜ç§€ï¼Œç»¼åˆè¯„ä»·ç•¥é«˜äºSQLAlchemy<span class="symbol">\r</span><span class="symbol">\n</span>    Djangoè‡ªå¸¦çš„æ¨¡æ¿å¼•æ“ç®€å•å¥½ç”¨ï¼Œä½†å…¶å¼ºå¤§ç¨‹åº¦å’Œç»¼åˆè¯„ä»·ç•¥ä½äºJinja<span class="symbol">\r</span><span class="symbol">\n</span>    Djangoè‡ªå¸¦ORMä¹Ÿä½¿Djangoä¸å…³ç³»å‹æ•°æ®åº“è€¦åˆåº¦è¿‡é«˜ï¼Œå¦‚æœæƒ³ä½¿ç”¨MongoDBç­‰NoSQLæ•°æ®ï¼Œéœ€è¦é€‰å–åˆé€‚çš„ç¬¬ä¸‰æ–¹åº“ï¼Œä¸”æ€»æ„Ÿè§‰Django+SQLæ‰æ˜¯å¤©ç”Ÿä¸€å¯¹çš„æ­é…ï¼ŒDjango+NoSQLç æ‰äº†Djangoçš„åŠå£æ±Ÿå±±<span class="symbol">\r</span><span class="symbol">\n</span>    Djangoç›®å‰æ”¯æŒJinjaç­‰éå®˜æ–¹æ¨¡æ¿å¼•æ“<span class="symbol">\r</span><span class="symbol">\n</span>    Djangoè‡ªå¸¦çš„æ•°æ®åº“ç®¡ç†appå¥½è¯„å¦‚æ½®<span class="symbol">\r</span><span class="symbol">\n</span>    Djangoéå¸¸é€‚åˆä¼ä¸šçº§ç½‘ç«™çš„å¼€å‘ï¼šå¿«é€Ÿã€é è°±ã€ç¨³å®š<span class="symbol">\r</span><span class="symbol">\n</span>    Djangoæˆç†Ÿã€ç¨³å®šã€å®Œå–„ï¼Œä½†ç›¸æ¯”äºFlaskï¼ŒDjangoçš„æ•´ä½“ç”Ÿæ€ç›¸å¯¹å°é—­<span class="symbol">\r</span><span class="symbol">\n</span>    Djangoæ˜¯Python webæ¡†æ¶çš„å…ˆé©±ï¼Œç”¨æˆ·å¤šï¼Œç¬¬ä¸‰æ–¹åº“æœ€ä¸°å¯Œï¼Œæœ€å¥½çš„Pythonåº“ï¼Œå¦‚æœä¸èƒ½ç›´æ¥ç”¨åˆ°Djangoä¸­ï¼Œä¹Ÿä¸€å®šèƒ½æ‰¾åˆ°ä¸ä¹‹å¯¹åº”çš„ç§»æ¤<span class="symbol">\r</span><span class="symbol">\n</span>    Djangoä¸Šæ‰‹ä¹Ÿæ¯”è¾ƒå®¹æ˜“ï¼Œå¼€å‘æ–‡æ¡£è¯¦ç»†ã€å®Œå–„ï¼Œç›¸å…³èµ„æ–™ä¸°å¯Œ",</span><br><span class="line">        "timestamp": "2019-02-21T21:25:28",</span><br><span class="line">        "authorname": 1,</span><br><span class="line">        "views": 2599,</span><br><span class="line">        "tags": [</span><br><span class="line">            1,</span><br><span class="line">            2</span><br><span class="line">        ],</span><br><span class="line">        "category": 1</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        "id": 1,</span><br><span class="line">        "title": "ç”¨Djangoå†™ä¸€ä¸ªè‡ªå·±çš„åšå®¢ç½‘ç«™",</span><br><span class="line">        "body": "##å†™åœ¨æœ€å‰é¢ï¼š<span class="symbol">\r</span><span class="symbol">\n</span>æƒ³ç”¨Djangoå†™ç½‘ç«™å¾ˆä¹…äº†ï¼Œæœ¬åœ°ä¹Ÿå»ºç«‹è¿‡å¾ˆå¤šdemoï¼Œå¯¹äºæ•´ä¸ªæ¡†æ¶çš„å…¥é—¨ç®—æ˜¯ç†Ÿç»ƒäº†ã€‚ç”¨pycharmå¯ <span class="symbol">\r</span><span class="symbol">\n</span>ä»¥å¾ˆæ–¹ä¾¿çš„æ–°å»ºä¸€ä¸ªDjangoå·¥ç¨‹ã€‚ä¸“ä¸šç‰ˆçš„Pycharmæ˜¯è‡ªå¸¦Djangoçš„ï¼Œç›®å‰Diangoçš„æœ€æ–°ç‰ˆæœ¬åº”è¯¥æ˜¯2.1ã€‚<span class="symbol">\r</span><span class="symbol">\n</span><span class="symbol">\r</span><span class="symbol">\n</span>IDE:Pycharm<span class="symbol">\r</span><span class="symbol">\n</span>pythonç‰ˆæœ¬ï¼š3.6<span class="symbol">\r</span><span class="symbol">\n</span>æ“ä½œç³»ç»Ÿï¼šmacOS Mojave<span class="symbol">\r</span><span class="symbol">\n</span><span class="symbol">\r</span><span class="symbol">\n</span>![å›¾ç‰‡](/media/images/blog1body1.png)<span class="symbol">\r</span><span class="symbol">\n</span><span class="symbol">\r</span><span class="symbol">\n</span>è¿™æ˜¯ç”¨Django2.1å†™çš„ä¸€ä¸ªä¸ªäººåšå®¢çš„å±•ç¤ºï¼Œè¿˜æœ‰ä¸€ä¸ªå«æœ‰å¸¦ç™»å½•ã€æ³¨å†Œã€ç™»å‡ºçš„sessionæ§åˆ¶çš„ç›‘æ§ç³»ç»Ÿï¼Œåšå®¢æœ¬èº«å†…ç½®ä¸‹è½½ã€å¤©æ°”æŸ¥è¯¢ã€Googleåœ¨çº¿ç¿»è¯‘ï¼Œè¿˜å¯ä»¥å‘é€QQé‚®ä»¶ã€‚<span class="symbol">\r</span><span class="symbol">\n</span>ä¸‹é¢å…ˆè´´ä¸€ä¸‹ç›®å½•ç»“æ„ï¼š<span class="symbol">\r</span><span class="symbol">\n</span><span class="symbol">\r</span><span class="symbol">\n</span>![å›¾ç‰‡](/static/images/blog1body2.jpg)",</span><br><span class="line">        "timestamp": "2019-02-21T21:20:23",</span><br><span class="line">        "authorname": 1,</span><br><span class="line">        "views": 2657,</span><br><span class="line">        "tags": [</span><br><span class="line">            1</span><br><span class="line">        ],</span><br><span class="line">        "category": 1</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>django</tag>
        <tag>restframework</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue.jså…¥é—¨ï¼ˆå››ï¼‰---ç”¨Pycharmåˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªå®Œæ•´çš„HelloVue</title>
    <url>/2019/11/23/Vue-js%E5%85%A5%E9%97%A8%EF%BC%88%E5%9B%9B%EF%BC%89-%E7%94%A8Pycharm%E5%88%9B%E5%BB%BA%E4%BD%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E7%9A%84HelloVue/</url>
    <content><![CDATA[<p>æœ¬æ–‡ä¸»è¦ä»‹ç»äº†å¦‚ä½•åœ¨Pycharmä¸­æ„å»ºä¸€ä¸ªç®€å•çš„vueåº”ç”¨,æ‘˜è¦è¦å†™50ä¸ªå­—ï¼Œä¸ç„¶markdownæ ¼å¼ä¼šå¾ˆä¸‘ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“è¦å†™å•¥ï¼Œæ„Ÿè§‰æ²¡å•¥å¥½å†™çš„ï¼Œç°åœ¨åº”è¯¥å·®ä¸å¤šäº†<br><a id="more"></a></p>
<h4 id="ä¸€ã€åœ¨Pycharmä¸­ä¸‹è½½Vue-jsæ’ä»¶"><a href="#ä¸€ã€åœ¨Pycharmä¸­ä¸‹è½½Vue-jsæ’ä»¶" class="headerlink" title="ä¸€ã€åœ¨Pycharmä¸­ä¸‹è½½Vue.jsæ’ä»¶"></a>ä¸€ã€åœ¨Pycharmä¸­ä¸‹è½½Vue.jsæ’ä»¶</h4><p><img src="https://www.guanacossj.com/media/articlebodypics/1571819210811.jpg" alt=""></p>
<h4 id="äºŒã€æ–°å»ºä¸€ä¸ªVue-jsé¡¹ç›®"><a href="#äºŒã€æ–°å»ºä¸€ä¸ªVue-jsé¡¹ç›®" class="headerlink" title="äºŒã€æ–°å»ºä¸€ä¸ªVue.jsé¡¹ç›®"></a>äºŒã€æ–°å»ºä¸€ä¸ªVue.jsé¡¹ç›®</h4><p><img src="https://www.guanacossj.com/media/articlebodypics/1571819312914.jpg" alt=""><br>ç„¶åç­‰å¾…å®‰è£…å¯åŠ¨å®Œæˆï¼Œè¿™é‡Œæç¤ºæˆ‘è¦ä¸è¦ç”¨æ·˜å®æºï¼Œæˆ‘æœæ–­åŒæ„å•Š</p>
<h4 id="ä¸‰ã€é¡¹ç›®å¯åŠ¨"><a href="#ä¸‰ã€é¡¹ç›®å¯åŠ¨" class="headerlink" title="ä¸‰ã€é¡¹ç›®å¯åŠ¨"></a>ä¸‰ã€é¡¹ç›®å¯åŠ¨</h4><p><img src="https://www.guanacossj.com/media/articlebodypics/1571819476507.jpg" alt=""></p>
<h4 id="å››ã€é¡¹ç›®ç›®å½•ç»“æ„"><a href="#å››ã€é¡¹ç›®ç›®å½•ç»“æ„" class="headerlink" title="å››ã€é¡¹ç›®ç›®å½•ç»“æ„"></a>å››ã€é¡¹ç›®ç›®å½•ç»“æ„</h4><p><img src="https://www.guanacossj.com/media/articlebodypics/1571819572736.jpg" alt=""><br><figure class="highlight haml"><table><tr><td class="code"><pre><span class="line">'''</span><br><span class="line">-<span class="ruby">node_modulesï¼šé¡¹ç›®çš„ä¾èµ–</span></span><br><span class="line"><span class="ruby">-public</span></span><br><span class="line"><span class="ruby">    -favicon.ico  ç½‘é¡µçš„å›¾æ ‡</span></span><br><span class="line"><span class="ruby">    -index.html   ä¸»é¡µé¢</span></span><br><span class="line"><span class="ruby">-srcï¼šæˆ‘ä»¬éœ€è¦å…³æ³¨çš„</span></span><br><span class="line"><span class="ruby">    -assetsï¼šæ–¹é™æ€æ–‡ä»¶</span></span><br><span class="line"><span class="ruby">    -componentsï¼šå°ç»„ä»¶</span></span><br><span class="line"><span class="ruby">    -views  ï¼šé¡µé¢ç»„ä»¶</span></span><br><span class="line"><span class="ruby">    -App.vue ï¼šä¸»ç»„ä»¶</span></span><br><span class="line"><span class="ruby">    -main.js ï¼šé¡¹ç›®ä¸»å…¥å£js</span></span><br><span class="line"><span class="ruby">    -router.jsï¼š è·¯ç”±ç›¸å…³ï¼Œä»¥åé…ç½®è·¯ç”±ï¼Œéƒ½åœ¨è¿™é‡Œé…ç½®</span></span><br><span class="line"><span class="ruby">    -store.js  ï¼švuexç›¸å…³ï¼ŒçŠ¶æ€ç®¡ç†å™¨</span></span><br><span class="line"><span class="ruby">-package.json   é¡¹ç›®çš„ä¾èµ–æ–‡ä»¶</span></span><br><span class="line"><span class="ruby"><span class="string">''</span><span class="string">'</span></span></span><br></pre></td></tr></table></figure></p>
<h4 id="äº”ã€ä¿®æ”¹é»˜è®¤çš„å¯åŠ¨é¡µ"><a href="#äº”ã€ä¿®æ”¹é»˜è®¤çš„å¯åŠ¨é¡µ" class="headerlink" title="äº”ã€ä¿®æ”¹é»˜è®¤çš„å¯åŠ¨é¡µ"></a>äº”ã€ä¿®æ”¹é»˜è®¤çš„å¯åŠ¨é¡µ</h4><p>åœ¨componentsä¸‹æ–°å»ºä¸€ä¸ªHelloVue<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hello"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">        name: <span class="string">"HelloVue"</span>,</span></span><br><span class="line">        data () &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">            msg: <span class="string">'HelloVue'</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><br>ä¿®æ”¹App.vue<br><figure class="highlight clean"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> HelloWorld <span class="keyword">from</span> <span class="string">'./components/HelloVue.vue'</span></span><br></pre></td></tr></table></figure><br>æ•ˆæœå›¾<br><img src="https://www.guanacossj.com/media/articlebodypics/1571819861870.jpg" alt=""></p>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>è…¾è®¯äº‘Ubuntuä¸‹Collectd+Grafana+Influxdbçš„æ­å»ºæ•™ç¨‹</title>
    <url>/2019/11/23/%E8%85%BE%E8%AE%AF%E4%BA%91Ubuntu%E4%B8%8BCollectd-Grafana-Influxdb%E7%9A%84%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B/</url>
    <content><![CDATA[<p>æœ¬æ–‡ä»‹ç»äº†è…¾è®¯äº‘æœåŠ¡å™¨Ubuntuä¸‹ç›‘æ§å¹³å°çš„æ­å»ºæ•™ç¨‹ï¼Œä¸»è¦ç»„ä»¶åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œgrafanaã€collectdã€influxdbã€‚grafanaä¸»è¦ç”¨æ¥ä½œä¸ºç›‘æ§çš„å‰ç«¯å±•ç¤ºï¼Œcollectdè´Ÿè´£é‡‡é›†æœåŠ¡å™¨æ€§èƒ½æŒ‡æ ‡ï¼Œinfluxdbåˆ™æ˜¯ä¸€æ¬¾å¼€æºçš„æ—¶åºæ•°æ®åº“ï¼Œè´Ÿè´£é‡‡é›†æ•°æ®çš„å­˜å‚¨<br><a id="more"></a></p>
<h2 id="ä¸€ã€å®‰è£…Collectd"><a href="#ä¸€ã€å®‰è£…Collectd" class="headerlink" title="ä¸€ã€å®‰è£…Collectd"></a>ä¸€ã€å®‰è£…Collectd</h2><h3 id="1ã€å®‰è£…"><a href="#1ã€å®‰è£…" class="headerlink" title="1ã€å®‰è£…"></a>1ã€å®‰è£…</h3><p><code>sudo apt install collectd collectd-utils</code></p>
<h3 id="2ã€ä¿®æ”¹collectd-conf"><a href="#2ã€ä¿®æ”¹collectd-conf" class="headerlink" title="2ã€ä¿®æ”¹collectd.conf"></a>2ã€ä¿®æ”¹collectd.conf</h3><p>å¼€å¯å¸¸ç”¨æ’ä»¶<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">LoadPlugin cpu</span><br><span class="line">LoadPlugin df</span><br><span class="line">LoadPlugin disk</span><br><span class="line">LoadPlugin interface</span><br><span class="line">LoadPlugin irq</span><br><span class="line">LoadPlugin load</span><br><span class="line">LoadPlugin memory</span><br><span class="line">LoadPlugin mysql</span><br><span class="line">LoadPlugin network</span><br><span class="line">LoadPlugin processes</span><br><span class="line">LoadPlugin rrdtool</span><br><span class="line"> </span><br><span class="line">&lt;Plugin cpu&gt;</span><br><span class="line">	ReportByCpu true</span><br><span class="line">	ReportByState true</span><br><span class="line">	ValuesPercentage false</span><br><span class="line">&lt;/Plugin&gt;</span><br><span class="line"> </span><br><span class="line">&lt;Plugin interface&gt;</span><br><span class="line">	Interface "eth0"</span><br><span class="line">	IgnoreSelected false</span><br><span class="line"><span class="meta">#</span><span class="bash">	ReportInactive <span class="literal">true</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">	UniqueName <span class="literal">false</span></span></span><br><span class="line">&lt;/Plugin&gt;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">&lt;Plugin network&gt;</span><br><span class="line"><span class="meta">#</span><span class="bash">	<span class="comment"># client setup:</span></span></span><br><span class="line">Server "127.0.0.1" "25826"</span><br><span class="line"><span class="meta">#</span><span class="bash">	&lt;Server <span class="string">"239.192.74.66"</span> <span class="string">"25826"</span>&gt;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">		SecurityLevel Encrypt</span></span><br><span class="line"><span class="meta">#</span><span class="bash">		Username <span class="string">"user"</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">		Password <span class="string">"secret"</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">		Interface <span class="string">"eth0"</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">		ResolveInterval 14400</span></span><br><span class="line"><span class="meta">#</span><span class="bash">	&lt;/Server&gt;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">	TimeToLive 128</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span><span class="bash">	<span class="comment"># server setup:</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">	Listen <span class="string">"ff18::efc0:4a42"</span> <span class="string">"25826"</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">	&lt;Listen <span class="string">"239.192.74.66"</span> <span class="string">"25826"</span>&gt;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">		SecurityLevel Sign</span></span><br><span class="line"><span class="meta">#</span><span class="bash">		AuthFile <span class="string">"/etc/collectd/passwd"</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">		Interface <span class="string">"eth0"</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">	&lt;/Listen&gt;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">	MaxPacketSize 1452</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span><span class="bash">	<span class="comment"># proxy setup (client and server as above):</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">	Forward <span class="literal">true</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span><span class="bash">	<span class="comment"># statistics about the network plugin itself</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">	ReportStats <span class="literal">false</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span><span class="bash">	<span class="comment"># "garbage collection"</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">	CacheFlush 1800</span></span><br><span class="line">&lt;/Plugin&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="3ã€å¸¸ç”¨å‘½ä»¤"><a href="#3ã€å¸¸ç”¨å‘½ä»¤" class="headerlink" title="3ã€å¸¸ç”¨å‘½ä»¤"></a>3ã€å¸¸ç”¨å‘½ä»¤</h3><figure class="highlight dts"><table><tr><td class="code"><pre><span class="line">sudo <span class="meta-keyword">/etc/</span>init.d/collectd start</span><br><span class="line">sudo <span class="meta-keyword">/etc/</span>init.d/collectd restart</span><br></pre></td></tr></table></figure>
<h2 id="äºŒã€-å®‰è£…Influxdb"><a href="#äºŒã€-å®‰è£…Influxdb" class="headerlink" title="äºŒã€ å®‰è£…Influxdb"></a>äºŒã€ å®‰è£…Influxdb</h2><h3 id="1ã€å®‰è£…-1"><a href="#1ã€å®‰è£…-1" class="headerlink" title="1ã€å®‰è£…"></a>1ã€å®‰è£…</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">sudo apt <span class="keyword">install</span> influxdb</span><br><span class="line">sudo apt <span class="keyword">install</span> influxdb-<span class="keyword">client</span></span><br></pre></td></tr></table></figure>
<h3 id="2ã€ä¿®æ”¹influxdb-conf"><a href="#2ã€ä¿®æ”¹influxdb-conf" class="headerlink" title="2ã€ä¿®æ”¹influxdb.conf"></a>2ã€ä¿®æ”¹influxdb.conf</h3><figure class="highlight nix"><table><tr><td class="code"><pre><span class="line"><span class="comment">###</span></span><br><span class="line"><span class="comment">### [collectd]</span></span><br><span class="line"><span class="comment">###</span></span><br><span class="line"><span class="comment">### Controls one or many listeners for collectd data.</span></span><br><span class="line"><span class="comment">###</span></span><br><span class="line"> </span><br><span class="line">  [[collectd]]</span><br><span class="line">  <span class="attr">enabled</span> = <span class="literal">true</span></span><br><span class="line">  <span class="attr">bind-address</span> = <span class="string">"127.0.0.1:25826"</span></span><br><span class="line">  <span class="attr">database</span> = <span class="string">"collectdb"</span></span><br><span class="line">  <span class="comment"># retention-policy = ""</span></span><br><span class="line">  <span class="attr">typesdb</span> = <span class="string">"/usr/share/collectd/types.db"</span></span><br><span class="line"> </span><br><span class="line">  <span class="comment"># These next lines control how batching works. You should have this enabled</span></span><br><span class="line">  <span class="comment"># otherwise you could get dropped metrics or poor performance. Batching</span></span><br><span class="line">  <span class="comment"># will buffer points in memory if you have many coming in.</span></span><br><span class="line"> </span><br><span class="line">  <span class="comment"># Flush if this many points get buffered</span></span><br><span class="line">  <span class="attr">batch-size</span> = <span class="number">5000</span></span><br><span class="line"> </span><br><span class="line">  <span class="comment"># Number of batches that may be pending in memory</span></span><br><span class="line">  <span class="comment"># batch-pending = 10</span></span><br><span class="line"> </span><br><span class="line">  <span class="comment"># Flush at least this often even if we haven't hit buffer limit</span></span><br><span class="line">  <span class="attr">batch-timeout</span> = <span class="string">"10s"</span></span><br><span class="line"> </span><br><span class="line">  <span class="comment"># UDP Read buffer size, 0 means OS default. UDP listener will fail if set above OS max.</span></span><br><span class="line">  <span class="attr">read-buffer</span> = <span class="number">0</span></span><br></pre></td></tr></table></figure>
<h3 id="3ã€å¸¸ç”¨å‘½ä»¤-1"><a href="#3ã€å¸¸ç”¨å‘½ä»¤-1" class="headerlink" title="3ã€å¸¸ç”¨å‘½ä»¤"></a>3ã€å¸¸ç”¨å‘½ä»¤</h3><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">sudo<span class="built_in"> service </span>influxdb status</span><br><span class="line"> </span><br><span class="line">sudo<span class="built_in"> service </span>influxdb start</span><br></pre></td></tr></table></figure>
<h3 id="4ã€æ–°å»ºæ•°æ®åº“"><a href="#4ã€æ–°å»ºæ•°æ®åº“" class="headerlink" title="4ã€æ–°å»ºæ•°æ®åº“"></a>4ã€æ–°å»ºæ•°æ®åº“</h3><figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> collectdb</span><br></pre></td></tr></table></figure>
<h3 id="5ã€æŸ¥çœ‹ç«¯å£æ˜¯å¦ç›‘å¬æˆåŠŸ"><a href="#5ã€æŸ¥çœ‹ç«¯å£æ˜¯å¦ç›‘å¬æˆåŠŸ" class="headerlink" title="5ã€æŸ¥çœ‹ç«¯å£æ˜¯å¦ç›‘å¬æˆåŠŸ"></a>5ã€æŸ¥çœ‹ç«¯å£æ˜¯å¦ç›‘å¬æˆåŠŸ</h3><figure class="highlight 1c"><table><tr><td class="code"><pre><span class="line">netstat -anp<span class="string">| grep 25826</span></span><br></pre></td></tr></table></figure>
<h3 id="6ã€æŸ¥çœ‹æ•°æ®"><a href="#6ã€æŸ¥çœ‹æ•°æ®" class="headerlink" title="6ã€æŸ¥çœ‹æ•°æ®"></a>6ã€æŸ¥çœ‹æ•°æ®</h3><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">root@VM<span class="number">-0</span><span class="number">-16</span>-ubuntu:~# influx</span><br><span class="line">Visit https://enterprise.influxdata.com <span class="keyword">to</span> register <span class="keyword">for</span> updates, InfluxDB <span class="keyword">server</span> management, <span class="keyword">and</span> monitoring.</span><br><span class="line">Connected <span class="keyword">to</span> http://localhost:<span class="number">8086</span> <span class="keyword">version</span> <span class="number">1.1</span><span class="number">.1</span></span><br><span class="line">InfluxDB shell <span class="keyword">version</span>: <span class="number">1.1</span><span class="number">.1</span></span><br><span class="line">&gt; use collectdb</span><br><span class="line"><span class="keyword">Using</span> <span class="keyword">database</span> collectdb</span><br><span class="line">&gt; <span class="keyword">show</span> field keys;</span><br><span class="line"><span class="type">name</span>: cpu_value</span><br><span class="line">fieldKey	fieldType</span><br><span class="line"><span class="comment">--------	---------</span></span><br><span class="line"><span class="keyword">value</span>		<span class="type">float</span></span><br><span class="line"> </span><br><span class="line"><span class="type">name</span>: df_value</span><br><span class="line">fieldKey	fieldType</span><br><span class="line"><span class="comment">--------	---------</span></span><br><span class="line"><span class="keyword">value</span>		<span class="type">float</span></span><br><span class="line"> </span><br><span class="line"><span class="type">name</span>: disk_io_time</span><br><span class="line">fieldKey	fieldType</span><br><span class="line"><span class="comment">--------	---------</span></span><br><span class="line"><span class="keyword">value</span>		<span class="type">float</span></span><br><span class="line"> </span><br><span class="line"><span class="type">name</span>: disk_read</span><br><span class="line">fieldKey	fieldType</span><br><span class="line"><span class="comment">--------	---------</span></span><br><span class="line"><span class="keyword">value</span>		<span class="type">float</span></span><br><span class="line"> </span><br><span class="line"><span class="type">name</span>: disk_value</span><br><span class="line">fieldKey	fieldType</span><br><span class="line"><span class="comment">--------	---------</span></span><br><span class="line"><span class="keyword">value</span>		<span class="type">float</span></span><br><span class="line"> </span><br><span class="line"><span class="type">name</span>: disk_weighted_io_time</span><br><span class="line">fieldKey	fieldType</span><br><span class="line"><span class="comment">--------	---------</span></span><br><span class="line"><span class="keyword">value</span>		<span class="type">float</span></span><br><span class="line"> </span><br><span class="line"><span class="type">name</span>: disk_write</span><br><span class="line">fieldKey	fieldType</span><br><span class="line"><span class="comment">--------	---------</span></span><br><span class="line"><span class="keyword">value</span>		<span class="type">float</span></span><br><span class="line"> </span><br><span class="line"><span class="type">name</span>: entropy_value</span><br><span class="line">fieldKey	fieldType</span><br><span class="line"><span class="comment">--------	---------</span></span><br><span class="line"><span class="keyword">value</span>		<span class="type">float</span></span><br><span class="line"> </span><br><span class="line"><span class="type">name</span>: interface_rx</span><br><span class="line">fieldKey	fieldType</span><br><span class="line"><span class="comment">--------	---------</span></span><br><span class="line"><span class="keyword">value</span>		<span class="type">float</span></span><br><span class="line"> </span><br><span class="line"><span class="type">name</span>: interface_tx</span><br><span class="line">fieldKey	fieldType</span><br><span class="line"><span class="comment">--------	---------</span></span><br><span class="line"><span class="keyword">value</span>		<span class="type">float</span></span><br><span class="line"> </span><br><span class="line"><span class="type">name</span>: irq_value</span><br><span class="line">fieldKey	fieldType</span><br><span class="line"><span class="comment">--------	---------</span></span><br><span class="line"><span class="keyword">value</span>		<span class="type">float</span></span><br><span class="line"> </span><br><span class="line"><span class="type">name</span>: load_longterm</span><br><span class="line">fieldKey	fieldType</span><br><span class="line"><span class="comment">--------	---------</span></span><br><span class="line"><span class="keyword">value</span>		<span class="type">float</span></span><br><span class="line"> </span><br><span class="line"><span class="type">name</span>: load_midterm</span><br><span class="line">fieldKey	fieldType</span><br><span class="line"><span class="comment">--------	---------</span></span><br><span class="line"><span class="keyword">value</span>		<span class="type">float</span></span><br><span class="line"> </span><br><span class="line"><span class="type">name</span>: load_shortterm</span><br><span class="line">fieldKey	fieldType</span><br><span class="line"><span class="comment">--------	---------</span></span><br><span class="line"><span class="keyword">value</span>		<span class="type">float</span></span><br><span class="line"> </span><br><span class="line"><span class="type">name</span>: memory_value</span><br><span class="line">fieldKey	fieldType</span><br><span class="line"><span class="comment">--------	---------</span></span><br><span class="line"><span class="keyword">value</span>		<span class="type">float</span></span><br><span class="line"> </span><br><span class="line"><span class="type">name</span>: processes_value</span><br><span class="line">fieldKey	fieldType</span><br><span class="line"><span class="comment">--------	---------</span></span><br><span class="line"><span class="keyword">value</span>		<span class="type">float</span></span><br><span class="line"> </span><br><span class="line"><span class="type">name</span>: swap_value</span><br><span class="line">fieldKey	fieldType</span><br><span class="line"><span class="comment">--------	---------</span></span><br><span class="line"><span class="keyword">value</span>		<span class="type">float</span></span><br><span class="line"> </span><br><span class="line"><span class="type">name</span>: users_value</span><br><span class="line">fieldKey	fieldType</span><br><span class="line"><span class="comment">--------	---------</span></span><br><span class="line"><span class="keyword">value</span>		<span class="type">float</span></span><br><span class="line"> </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
<h3 id="7ã€é€šè¿‡sqlæ˜¾ç¤º15æ¡cpu-valueçš„ä¿¡æ¯"><a href="#7ã€é€šè¿‡sqlæ˜¾ç¤º15æ¡cpu-valueçš„ä¿¡æ¯" class="headerlink" title="7ã€é€šè¿‡sqlæ˜¾ç¤º15æ¡cpu_valueçš„ä¿¡æ¯"></a>7ã€é€šè¿‡sqlæ˜¾ç¤º15æ¡cpu_valueçš„ä¿¡æ¯</h3><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">&gt; select * <span class="keyword">from</span> cpu_value limit 15;</span><br><span class="line">name: cpu_value</span><br><span class="line">time			host		<span class="built_in">	instance	type	</span>type_instance	value</span><br><span class="line">----			----			--------	----	-------------	-----</span><br><span class="line">1573975276185910000	localhost.localdomain	0		cpu<span class="built_in">	user	</span>3429</span><br><span class="line">1573975276185917000	localhost.localdomain	0		cpu<span class="built_in">	system	</span>2646</span><br><span class="line">1573975276185920000	localhost.localdomain	0		cpu	wait	4424</span><br><span class="line">1573975276185936000	localhost.localdomain	0		cpu	nice	149</span><br><span class="line">1573975276185939000	localhost.localdomain	0		cpu	interrupt	0</span><br><span class="line">1573975276185942000	localhost.localdomain	0		cpu	softirq17</span><br><span class="line">1573975276185945000	localhost.localdomain	0		cpu	steal	0</span><br><span class="line">1573975276185947000	localhost.localdomain	0		cpu	idle	122528</span><br><span class="line">1573975286185912000	localhost.localdomain	0		cpu<span class="built_in">	user	</span>3443</span><br><span class="line">1573975286185919000	localhost.localdomain	0		cpu<span class="built_in">	system	</span>2658</span><br><span class="line">1573975286185923000	localhost.localdomain	0		cpu	wait	4428</span><br><span class="line">1573975286185927000	localhost.localdomain	0		cpu	nice	149</span><br><span class="line">1573975286185931000	localhost.localdomain	0		cpu	interrupt	0</span><br><span class="line">1573975286185935000	localhost.localdomain	0		cpu	softirq17</span><br><span class="line">1573975286185937000	localhost.localdomain	0		cpu	steal	0</span><br><span class="line"> </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
<h2 id="ä¸‰ã€å®‰è£…Grafana"><a href="#ä¸‰ã€å®‰è£…Grafana" class="headerlink" title="ä¸‰ã€å®‰è£…Grafana"></a>ä¸‰ã€å®‰è£…Grafana</h2><h3 id="1ã€å®‰è£…grafana"><a href="#1ã€å®‰è£…grafana" class="headerlink" title="1ã€å®‰è£…grafana"></a>1ã€å®‰è£…grafana</h3><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">wgetÂ http<span class="variable">s:</span>//<span class="keyword">dl</span>.grafana.<span class="keyword">com</span>/oss/release/grafana_6.<span class="number">4.4</span>_amd64.<span class="keyword">deb</span></span><br><span class="line">sudo dpkgÂ -iÂ grafana_6.<span class="number">4.4</span>_amd64.<span class="keyword">deb</span></span><br></pre></td></tr></table></figure>
<h3 id="2ã€å¯åŠ¨"><a href="#2ã€å¯åŠ¨" class="headerlink" title="2ã€å¯åŠ¨"></a>2ã€å¯åŠ¨</h3><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">sudo<span class="built_in"> service </span>grafana-server start</span><br></pre></td></tr></table></figure>
<h3 id="3ã€é…ç½®grafana"><a href="#3ã€é…ç½®grafana" class="headerlink" title="3ã€é…ç½®grafana"></a>3ã€é…ç½®grafana</h3><p><code>è®¿é—®http://127.0.0.1:3000ï¼Œå¦‚æœæ˜¯è…¾è®¯äº‘å°±æ˜¯ä½ çš„ip:3000</code></p>
]]></content>
      <categories>
        <category>Collectd</category>
      </categories>
      <tags>
        <tag>grafana</tag>
        <tag>collectd</tag>
        <tag>influxdb</tag>
      </tags>
  </entry>
  <entry>
    <title>Welcome to my new blog</title>
    <url>/2019/11/23/Welcome-to-my-new-blog/</url>
    <content><![CDATA[<p>æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ï¼Œæ›´å¤šç²¾å½©è¯·ç‚¹è¿›æ¥<br><a id="more"></a></p>
<h3 id="æˆ‘çš„ä¸»é¡µ"><a href="#æˆ‘çš„ä¸»é¡µ" class="headerlink" title="æˆ‘çš„ä¸»é¡µ"></a>æˆ‘çš„ä¸»é¡µ</h3><p><a href="https://www.guanacossj.com" target="_blank" rel="noopener" title="https://www.guanacossj.com">https://www.guanacossj.com</a></p>
<h3 id="Github-Page"><a href="#Github-Page" class="headerlink" title="Github Page"></a>Github Page</h3><p><a href="https://www.guanacossj.com" target="_blank" rel="noopener" title="https://arithmeticjia.github.io/">https://arithmeticjia.github.io/</a></p>
]]></content>
      <categories>
        <category>Welcome</category>
      </categories>
      <tags>
        <tag>blog</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2019/11/23/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><a id="more"></a>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>
]]></content>
  </entry>
</search>
